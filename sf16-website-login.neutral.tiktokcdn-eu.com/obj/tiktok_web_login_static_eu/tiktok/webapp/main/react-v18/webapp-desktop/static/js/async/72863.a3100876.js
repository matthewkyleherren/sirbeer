"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["72863"],{54516:function(e,t,n){n.d(t,{I9:function(){return l},Tq:function(){return _},tR:function(){return h}});var r=n(35383),i=n(5377),o=n(45996),c=n(16327),a=n(11201),s=n(82887),u=n(66905),d=n(10625),l=(0,s._)((0,d.p)("commentItemAtom@tiktok/webapp-atoms",{}),{rehydrationKey:"webapp.comment.items"}),m=(0,u.i)(l,function(e,t){var n;return n={setItem:function(e){t(l,function(t){return(0,o._)((0,i._)({},t),(0,r._)({},e.cid,e))})},setItemDiggState:function(n){e(l)[n.cid]&&t(l,function(e){var t,c;return(0,o._)((0,i._)({},e),(0,r._)({},n.cid,(0,o._)((0,i._)({},e[n.cid]),{user_digged:n.digged,is_author_digged:null!=(c=n.is_author_digged)?c:null==(t=e[n.cid])?void 0:t.is_author_digged})))})},setItemDiggCount:function(n){e(l)[n.cid]&&t(l,function(e){return(0,o._)((0,i._)({},e),(0,r._)({},n.cid,(0,o._)((0,i._)({},e[n.cid]),{digg_count:n.count})))})}},(0,r._)(n,"removeItem",function(e){t(l,function(t){return t[e],(0,c._)(t,[e].map(a._))})}),(0,r._)(n,"multiSetCommentItem",function(e){t(l,function(t){var n=(0,i._)({},t);return e.forEach(function(e){n[e.cid]=(0,i._)({},n[e.cid],e)}),n})}),(0,r._)(n,"multiRemoveCommentItem",function(e){t(l,function(t){var n=(0,i._)({},t);return e.forEach(function(e){delete n[e]}),n})}),(0,r._)(n,"reduceOrIncreaseCommentCount",function(n){var c,a,s=n.cid,u=n.isReduce,d=e(l);if(d[s]){var m=Number(null!=(a=null==(c=d[s])?void 0:c.reply_comment_total)?a:0);t(l,function(e){return(0,o._)((0,i._)({},e),(0,r._)({},s,(0,o._)((0,i._)({},e[s]),{reply_comment_total:u?m-1:m+1})))})}}),n}),_=(m.useAtomService,m.useServiceState),h=(m.useServiceDispatchers,m.getStaticApi)},44904:function(e,t,n){n.d(t,{lN:function(){return V},BY:function(){return H},_B:function(){return G},kH:function(){return N},OL:function(){return B}});var r=n(79066),i=n(35383),o=n(5377),c=n(45996),a=n(6586),s=n(54333),u=n(72516),d=n(54122),l=n(61945),m=n(94456),_=n(82887),h=n(66905),f=n(10625),p=n(88182),v=n(6785),g=n(88999),y=n(90432),C=n(66868),w=n(80728),S=n(71952),R=n(41076),k=n(33949),I=n(37240),b=n(12293),E=n(63004),P=n(34826),T=n(54516),M=n(25872),F=n(26869),O=n(2259),L=n(73721),A=n(44957),x=n(54149),U=(0,L.M)({csr:function(e){return(0,r._)(function(){return(0,u.__generator)(this,function(t){return[2,A.h.get("/api/comment/list/",{query:(0,c._)((0,o._)({},e),{count:20,aid:1988,app_language:"ja-JP",device_platform:"web_pc",current_region:"JP",fromWeb:1,enter_from:"tiktok_web"}),baseUrlType:x.Z4.FixedWww})]})})()},ssr:function(e){return(0,r._)(function(){var t,n,r;return(0,u.__generator)(this,function(i){switch(i.label){case 0:t=(0,O.yK)(),n=(0,F.stringifyUrl)({url:"consul://tiktok.comment.api/api/comment/list/",query:(0,c._)((0,o._)({},e),{aid:1988,count:20,device_platform:"web_pc",fromWeb:1})}),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t.fetch(n,{method:"GET",timeout:5e3,headers:(0,c._)((0,o._)({},t.headers),{referer:t.href})})];case 2:return[2,i.sent().json()];case 3:return r=i.sent(),t.logger.error("ssr fetch catch err: ".concat(r)),[2,{status_code:S.s.UnknownError,reply_style:1,has_more:1,cursor:"0"}];case 4:return[2]}})})()}}),V={awemeId:void 0,cursor:"0",comments:[],hasMore:!0,loading:!1,isFirstLoad:!1,fetchType:"load_by_current",currentAspect:"all"},z=(0,_._)((0,f.p)("commentAtom@tiktok/webapp-atoms",{}),{rehydrationKey:"webapp.comment"}),D=(0,h.i)(z,function(e,t){return{switchAspect:function(n){return(0,r._)(function(n){var r,a,s,l;return(0,u.__generator)(this,function(u){switch(u.label){case 0:if(r=n.itemId,a=n.aspect,(null==(s=e(z)[r])?void 0:s.loading)||(null==(l=e(z)[r])?void 0:l.currentAspect)===a)return[2];return t(z,function(e){return(0,c._)((0,o._)({},e),(0,i._)({},r,(0,d.A)((0,c._)((0,o._)({},V),{currentAspect:a}))))}),[4,this.fetchComment({aweme_id:r,cursor:0,fetch_type:"load_by_current",commentAspect:a})];case 1:return u.sent(),[2]}})}).apply(this,arguments)},setCommentItem:function(e){var n=e.itemId,r=void 0===n?"":n,a=e.item;a&&t(z,function(e){var t;return(0,c._)((0,o._)({},e),(0,i._)({},r,(0,o._)({},null!=(t=e[r])?t:V,a)))})},setReplyLoading:function(n){var r,i,s,u,d=(0,a._)(j(e,n),2),l=d[0],m=d[1];l&&(l.replyCache=(0,c._)((0,o._)({},null!=(u=l.replyCache)?u:{comments:null!=(i=l.reply_comment)?i:[],cursor:null!=(s=null==(r=l.reply_comment)?void 0:r.length)?s:"0",hasMore:!0}),{loading:n.loading}),K(t,n.itemId,m,(0,o._)({},l)))},setReplyComment:function(n){var r=(0,a._)(j(e,n),2),i=r[0],s=r[1];i&&K(t,n.itemId,s,(0,c._)((0,o._)({},i),{reply_comment:n.comments}))},setReplyCommentCache:function(n){var r,i,c=(0,a._)(j(e,n),2),s=c[0],u=c[1];s&&(s.replyCache={comments:n.comments,cursor:n.cursor,hasMore:n.hasMore,loading:null!=(i=null==(r=s.replyCache)?void 0:r.loading)&&i},K(t,n.itemId,u,(0,o._)({},s)))},deleteCommentFromList:function(n){var r=n.index,i=n.subIndex,c=n.itemId;if(void 0===i)K(t,c,r);else{var a,s,u=e(z)[c];if(!u)return;var d=(0,o._)({},u.comments[r]);null==(a=d.reply_comment)||a.splice(i,1),null==(s=d.replyCache)||s.comments.splice(i,1),K(t,c,r,d)}},addCommentToFirst:function(e){t(z,function(t){var n,r;return(0,c._)((0,o._)({},t),(0,i._)({},e.aweme_id,(0,c._)((0,o._)({},V,t[e.aweme_id]),{comments:[{cid:e.cid,reply_comment:[],replyCache:null}].concat((0,s._)(null!=(r=null==(n=t[e.aweme_id])?void 0:n.comments)?r:[]))})))})},addReplyToFirst:function(n){var r,i,a,u,d=n.comment,l=n.position,m=e(z),_=d.aweme_id,h=m[_];if(h){var f=h.comments[l];if(f){var p=(0,o._)({},f);p.reply_comment=[{cid:d.cid,reply_comment:null,replyCache:null}].concat((0,s._)(null!=(i=f.reply_comment)?i:[])),p.replyCache=(0,c._)((0,o._)({},null!=(a=p.replyCache)?a:{cursor:"0",hasMore:!0,loading:!1}),{comments:[{cid:d.cid,reply_comment:null,replyCache:null}].concat((0,s._)(null!=(u=null==(r=p.replyCache)?void 0:r.comments)?u:[]))}),K(t,_,l,p)}}},handlePostSuccess:function(e){var t=this,n=J([e]),r=n.users,i=n.commentItems;(0,m.unstable_batchedUpdates)(function(){t.addCommentToFirst(e),(0,b.Gp)().multiSetUser(r),(0,T.tR)().multiSetCommentItem(i),(0,P.ud)().reduceOrIncreaseCommentCount({id:e.aweme_id,isReduce:!1})})},handleReplySuccess:function(e){var t=this,n=e.comment,r=e.position,i=J([n],{ignoreReply:!0}),o=i.users,c=i.commentItems,a=(0,T.tR)();(0,m.unstable_batchedUpdates)(function(){t.addReplyToFirst({comment:n,position:r}),(0,b.Gp)().multiSetUser(o),a.multiSetCommentItem(c),a.reduceOrIncreaseCommentCount({cid:n.reply_id}),(0,P.ud)().reduceOrIncreaseCommentCount({id:n.aweme_id,isReduce:!1})})},fetchComment:function(t,n){return(0,r._)(function(){var r,i,o,c,a,s,d,_,h,f,v,g,y,C,R,E,M,F,O,L,A,x,V,D,N,G,H,B;return(0,u.__generator)(this,function(u){switch(u.label){case 0:var W;if(r=this,i=e(z),o=t.aweme_id,c=t.insert_ids,s=void 0===(a=t.fetch_type)?"load_by_current":a,_=null!=(d=i[t.aweme_id])?d:{awemeId:void 0,cursor:"0",comments:[],hasMore:!0,loading:!0,currentAspect:"all"},v=(f="string"==typeof(W=null!=(h=t.commentAspect)?h:_.currentAspect)&&W.startsWith("topic_")?{subTopicId:W.split("_")[1]}:"number"==typeof W?{subCategory:W}:{}).subTopicId,g=f.subCategory,y=(0,I.PJ)(e(I.WH)),!_.hasMore)return[2];C=_.cursor,this.setCommentItem({item:{awemeId:o,loading:!0},itemId:o}),u.label=1;case 1:if(u.trys.push([1,10,,11]),!(v||g))return[3,3];return[4,(0,p.iB)({itemID:o,subTopicId:v,subCategory:g,cursor:C})];case 2:return F=u.sent(),[3,5];case 3:return[4,U({insert_ids:"0"===C?c:void 0,aweme_id:o,cursor:C,is_non_personalized:y})];case 4:F=u.sent(),u.label=5;case 5:if(M=F,(0,w.G)(M.status_code,[S.s.Ok]),!(M.status_code===S.s.Ok&&(null==(R=M.comments)?void 0:R.length)))return[3,8];if(A=(L=J(M.comments,{logId:null==(O=M.log_pb)?void 0:O.impr_id})).users,x=L.comments,V=L.commentItems,!n)return[3,7];return D=n.translateTo,N=n.count,G=V.filter(function(e){return"un"!==e.comment_language&&e.comment_language!==D}).slice(0,N),[4,(0,k.mx)().fetchCommentTranslation(G,D,!0)];case 6:u.sent(),u.label=7;case 7:return H=_.comments,B=(0,l.A)(H.concat(x),"cid"),(0,m.unstable_batchedUpdates)(function(){(0,b.Gp)().multiSetUser(A),(0,T.tR)().multiSetCommentItem(V),r.setCommentItem({item:{comments:B,hasMore:!!M.has_more,cursor:M.cursor,loading:!1,isFirstLoad:0===Number(C),fetchType:s},itemId:o}),M.total&&(0,P.ud)().setCommentCount({id:o,commentCount:Number(M.total)})}),[3,9];case 8:M.status_code!==S.s.Ok||(null==(E=M.comments)?void 0:E.length)||M.has_more||this.setCommentItem({item:{hasMore:!!M.has_more,loading:!1},itemId:o}),u.label=9;case 9:return[3,11];case 10:return u.sent(),this.setCommentItem({item:{loading:!1},itemId:o}),[3,11];case 11:return[2]}})}).call(this)},fetchCommentReply:function(t){return(0,r._)(function(){var n,i,d,_,h,f,p,v,g,y,C,R,k,I,E;return(0,u.__generator)(this,function(P){switch(P.label){case 0:if(n=this,d=(i=(0,a._)(W(e,t),2))[0],!(_=i[1]))return[2,void console.warn("No item here in fetch commoent reply")];this.setReplyLoading((0,c._)((0,o._)({},d),{loading:!0})),P.label=1;case 1:var M;return P.trys.push([1,3,,4]),[4,(M={comment_id:d.cid,item_id:d.itemId,cursor:null!=(f=null==(h=_.replyCache)?void 0:h.cursor)?f:"0"},(0,r._)(function(){return(0,u.__generator)(this,function(e){return[2,A.h.get("/api/comment/list/reply/",{query:(0,c._)((0,o._)({},M),{count:3,aid:1988,app_language:"ja-JP",device_platform:"web_pc",current_region:"JP",fromWeb:1,enter_from:"tiktok_web"}),baseUrlType:x.Z4.FixedWww})]})})())];case 2:return p=P.sent(),(0,w.G)(p.status_code,[S.s.Ok]),p.status_code===S.s.Ok&&(y=(g=J(p.comments,{logId:null==(v=p.log_pb)?void 0:v.impr_id})).users,C=g.comments,R=g.commentItems,I=null!=(k=_.reply_comment)?k:[],E=(0,l.A)(I.concat(C),"cid"),(0,m.unstable_batchedUpdates)(function(){(0,b.Gp)().multiSetUser(y),(0,T.tR)().multiSetCommentItem(R),n.setReplyComment((0,o._)({comments:(0,s._)(E)},d)),n.setReplyCommentCache((0,o._)({comments:(0,s._)(E),hasMore:!!p.has_more,cursor:p.cursor},d)),n.setReplyLoading((0,c._)((0,o._)({},d),{loading:!1}))})),[3,4];case 3:return P.sent(),this.setReplyLoading((0,c._)((0,o._)({},d),{loading:!1})),[3,4];case 4:return[2]}})}).call(this)},handleCollapseReply:function(t){if(!(0,a._)(j(e,t),1)[0])return void console.warn("item is null");this.setReplyComment((0,c._)((0,o._)({},t),{comments:[]}))},handleShowMoreReply:function(t){return(0,r._)(function(){var n,r,i,s,d,l,m,_;return(0,u.__generator)(this,function(u){return(i=(r=(n=(0,a._)(W(e,t),2))[0]).cid,s=r.itemId,d=n[1],y.f.sendEvent("show_more_reply",{parent_comment_id:i,group_id:s}),d)?d.reply_comment&&d.replyCache&&(l=d.reply_comment.length)<(m=d.replyCache.comments.length)?(_=l+3>m?m:l+3,[2,this.setReplyComment((0,c._)((0,o._)({},t),{comments:d.replyCache.comments.slice(0,_)}))]):[2,this.fetchCommentReply(t)]:[2,void console.warn("item is null")]})}).call(this)},handleCommentLike:function(t){return(0,r._)(function(){var n,a,s,d,l,_,h,f,p,w,k,I,M,F,O,L,U;return(0,u.__generator)(this,function(V){switch(V.label){case 0:if(a=e(T.I9),s=e(b.p9),d=a[t.cid],_=null==(l=(0,g.x)().user)?void 0:l.uid,h=null==(n=e(P.Pu)[t.itemId])?void 0:n.authorId,p=s.users[null!=(f=null==d?void 0:d.user)?f:""],!d)return[2,void console.warn("No comment item here in hendle comment like")];w=d.user_digged?2:1,V.label=1;case 1:var z;return V.trys.push([1,3,,4]),[4,(z={aweme_id:t.itemId,cid:t.cid,digg_type:w},(0,r._)(function(){return(0,u.__generator)(this,function(e){return[2,A.h.post("/api/comment/digg/",{query:(0,c._)((0,o._)({},z),{aid:1988,channel_id:S.F.Hot}),headers:(0,i._)({},x.nk,A.h.csrfToken),baseUrlType:x.Z4.FixedWww})]})})())];case 2:return k=V.sent(),I=(0,E.T)(),(null==k?void 0:k.status_code)===S.s.Ok?y.f.sendEvent(1===w?"like_comment":"cancel_like_comment",{comment_id:t.cid,group_id:t.itemId,comment_user_id:null!=(M=null==p?void 0:p.id)?M:"",author_id:t.teaAuthorId,enter_method:t.enterMethod}):(null==k?void 0:k.status_code)===S.s.CommentLikePermissionDisable?(C.F.destroy(),C.F.open({content:I(2===w?"comment_turnoff_unlike":"comment_turnoff_like"),duration:3,getContainer:R.M,getContainerPosition:"fixed"})):(null==k?void 0:k.status_code)?(C.F.destroy(),C.F.open({content:I("Sorry, something wrong with the server, please try again."),duration:3,widthType:"half",getContainer:R.M,getContainerPosition:"fixed"})):(C.F.destroy(),C.F.open({content:I("comment_nointernet_toast"),duration:3,widthType:"half",getContainer:R.M,getContainerPosition:"fixed"})),k.status_code===S.s.Ok?(1===w?(F=1,O=d.digg_count+1,_===h&&(L=!0)):(F=0,O=Math.max(d.digg_count-1,0),_===h&&(L=!1)),U=(0,T.tR)(),(0,m.unstable_batchedUpdates)(function(){U.setItemDiggState({cid:t.cid,digged:F,is_author_digged:L}),U.setItemDiggCount({cid:t.cid,count:O})})):k.status_code===S.s.CommentLikePermissionDisable&&(0,P.ud)().updateItem({id:t.itemId,itemCommentStatus:v.v.OFF}),[3,4];case 3:return V.sent(),[3,4];case 4:return[2]}})})()},handleCommentDelete:function(e){return(0,r._)(function(){var t,n,o,c,a,s,d,l;return(0,u.__generator)(this,function(_){switch(_.label){case 0:t=this,n=(0,E.T)(),o=e.itemId,c=e.cid,a=e.parentCid,s=e.subIndex,_.label=1;case 1:var h;return _.trys.push([1,3,,4]),[4,(h={cid:c},(0,r._)(function(){return(0,u.__generator)(this,function(e){return[2,A.h.post("/api/comment/delete/",{query:h,baseUrlType:x.Z4.FixedWww,headers:(0,i._)({},x.nk,A.h.csrfToken)})]})})())];case 2:return(d=_.sent()).status_code===S.s.Ok?C.F.open({content:n("comment_delete_success"),duration:3,widthType:"half",getContainer:R.M,getContainerPosition:"fixed"}):C.F.open({content:n("comment_delete_failed"),duration:3,widthType:"half",getContainer:R.M,getContainerPosition:"fixed"}),d.status_code===S.s.Ok&&(l=(0,T.tR)(),(0,m.unstable_batchedUpdates)(function(){t.deleteCommentFromList(e),l.removeItem(c),(0,P.ud)().reduceOrIncreaseCommentCount({id:o,isReduce:!0}),void 0!==s&&a&&l.reduceOrIncreaseCommentCount({cid:a,isReduce:!0})})),[3,4];case 3:return _.sent(),[3,4];case 4:return[2]}})}).call(this)},switchVideo:function(e){return(0,r._)(function(){var t,n;return(0,u.__generator)(this,function(r){switch(r.label){case 0:return t=e.currId,n=e.insertCid,[4,this.fetchComment({insert_ids:n,aweme_id:t})];case 1:return r.sent(),[2]}})}).call(this)},handleCommentsPreload:function(e){var t=this,n=e.aweme_id,r=e.fetch_type,i=e.has_more,o=e.cursor,c=e.total,a=J(e.comments),s=a.users,u=a.comments,d=a.commentItems;(0,m.unstable_batchedUpdates)(function(){(0,b.Gp)().multiSetUser(s),(0,T.tR)().multiSetCommentItem(d),t.setCommentItem({item:{comments:u,hasMore:!!i,cursor:o,loading:!1,isFirstLoad:!0,fetchType:r},itemId:n}),c&&(0,P.ud)().setCommentCount({id:n,commentCount:Number(c)})})}}}),N=D.useAtomService,G=D.useServiceState,H=D.useServiceDispatchers,B=D.getStaticApi;function W(e,t){var n=(0,a._)(j(e,t),2);return[t,n[0],n[1]]}function j(e,t){var n=t.itemId,r=t.cid,i=e(z)[n];if(!i)return[void 0,-1];var o=i.comments,c=o.findIndex(function(e){return e.cid===r});return -1!==c?[o[c],c]:[void 0,-1]}function K(e,t,n,r){-1!==n&&e(z,function(e){var a,u,l=null!=(u=null==(a=e[t])?void 0:a.comments)?u:[],m=[];return m=r?(0,s._)(l.slice(0,n)).concat([(0,d.A)((0,o._)({},l[n],r))],(0,s._)(l.slice(n+1))):(0,s._)(l.slice(0,n)).concat((0,s._)(l.slice(n+1))),(0,c._)((0,o._)({},e),(0,i._)({},t,(0,c._)((0,o._)({},V,e[t]),{comments:m})))})}function J(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.reduce(function(e,n){var r=n.user,i=n.reply_comment;return e.users.push((0,M.bg)(r)),(null!=i?i:[]).forEach(function(t){var n=t.user;e.users.push((0,M.bg)(n))}),e.comments.push(function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{cid:t.cid,logId:r.logId,reply_comment:null==(n=t.reply_comment)?void 0:n.map(function(t){return e(t,r)}),replyCache:null}}(n,t)),(0,M.PT)(n,t).forEach(function(t){e.commentItems.push(t)}),e},{users:[],comments:[],commentItems:[]})}},2916:function(e,t,n){n.d(t,{Rx:function(){return u},Uf:function(){return c},XK:function(){return s},w9:function(){return a}});var r=n(73628),i=n(58034),o=n(14272),c=function(e){o.e.init(),o.e.setPage({pageName:e}),(0,r.useEffect)(function(){return function(){o.e.pageSwitch()}},[e])},a=function(e){var t=e.isCurrentVideo,n=e.index,c=e.mode;(0,r.useEffect)(function(){var e=i.Jr[c];t&&o.e.setPlayStatusAndTriggerVideoSwitch({index:n,playMode:e})},[t,n,c])},s=function(e){var t=e.isCurrentVideo,n=e.index,c=e.mode;(0,r.useEffect)(function(){var e=i.Jr[c];t&&o.e.videoSwitchInteractionEnd({index:n,playMode:e})},[t,n,c])},u=function(){return(0,r.useCallback)(function(e){o.e.setEnterMethod({enterMethod:e}),o.e.videoSwitchInteractionStart()},[])}},14272:function(e,t,n){n.d(t,{e:function(){return p}});var r=n(95170),i=n(5377),o=n(45996),c=n(90432),a=function(e){c.f.sendEvent("page_switch_actual_fmp",e)},s=function(e){c.f.sendEvent("page_switch_first_frame_video",e)},u=function(e){c.f.sendEvent("video_switch_actual_fmp",e)},d=function(e){c.f.sendEvent("video_switch_first_frame_video",e)},l=function(e){c.f.sendEvent("video_switch_interaction_latency",e)},m=function(e){c.f.sendEvent("video_switch_total_latency",e)},_=function(e){c.f.sendEvent("page_ready",e)},h=function(e){c.f.sendEvent("browser_mode_opening_latency",e)},f=function(){function e(t){(0,r._)(this,e),this._startTime=null,this._count=0,this._reportFunc=t}var t=e.prototype;return t.deInit=function(){this._startTime=null},t.resetStartTime=function(){this._startTime=performance.now(),this._count+=1},t.report=function(){if(null!==this._startTime){var e=performance.now()-this._startTime;this._startTime=null,this._reportFunc(e)}},e}(),p=new(function(){function e(){(0,r._)(this,e),this._initialized=!1,this._etParams={},this._readyReported=!1}var t=e.prototype;return t.init=function(){var e=this;this._initialized||(this._initialized=!0,this._pageSwitchActualFMPReporter=new f(function(t){a({page_name:e._etParams.page_name,prev_page:e._etParams.prev_page,duration:t})}),this._pageSwitchFirstFrameVideoReporter=new f(function(t){s({page_name:e._etParams.page_name,prev_page:e._etParams.prev_page,duration:t})}),this._videoSwitchActualFMPReporter=new f(function(t){u((0,o._)((0,i._)({},e._etParams),{duration:t}))}),this._videoSwitchFirstFrameVideoReporter=new f(function(t){d((0,o._)((0,i._)({},e._etParams),{duration:t}))}),this._videoSwitchInteractionReporter=new f(function(t){l((0,o._)((0,i._)({},e._etParams),{duration:t}))}),this._videoSwitchTotalLatencyReporter=new f(function(t){m((0,o._)((0,i._)({},e._etParams),{duration:t}))}),this._pageReadyReporter=new f(function(t){_({page_name:e._etParams.page_name})}),this._browserModeOpeningLatencyReporter=new f(function(t){h((0,o._)((0,i._)({},e._etParams),{duration:t}))}),this._pageReadyReporter.resetStartTime())},t.setPage=function(e){var t=e.pageName;this._initialized&&this._etParams.page_name!==t&&(this._etParams.prev_page=this._etParams.page_name,this._etParams.page_name=t)},t.setEnterMethod=function(e){var t=e.enterMethod;this._initialized&&(this._etParams.enter_method=t)},t.setPlayStatusAndTriggerVideoSwitch=function(e){var t=e.index,n=e.playMode;this._initialized&&((void 0!==this._etParams.index&&this._etParams.index!==t||void 0!==this._etParams.play_mode&&this._etParams.play_mode!==n)&&this.videoSwitch(),this._etParams.prev_index=this._etParams.index,this._etParams.index=t,this._etParams.prev_play_mode=this._etParams.play_mode,this._etParams.play_mode=n)},t.pageSwitch=function(){var e,t,n,r,i,o,c,a;this._initialized&&(null==(e=this._pageSwitchActualFMPReporter)||e.resetStartTime(),null==(t=this._pageSwitchFirstFrameVideoReporter)||t.resetStartTime(),null==(n=this._videoSwitchActualFMPReporter)||n.deInit(),null==(r=this._videoSwitchFirstFrameVideoReporter)||r.deInit(),null==(i=this._videoSwitchInteractionReporter)||i.deInit(),null==(o=this._videoSwitchTotalLatencyReporter)||o.deInit(),null==(c=this._browserModeOpeningLatencyReporter)||c.deInit(),this._readyReported=!1,null==(a=this._pageReadyReporter)||a.resetStartTime())},t.videoSwitch=function(){var e,t;this._initialized&&(null==(e=this._videoSwitchActualFMPReporter)||e.resetStartTime(),null==(t=this._videoSwitchFirstFrameVideoReporter)||t.resetStartTime())},t.videoSwitchInteractionStart=function(){var e,t;this._initialized&&(null==(e=this._videoSwitchInteractionReporter)||e.resetStartTime(),null==(t=this._videoSwitchTotalLatencyReporter)||t.resetStartTime())},t.videoSwitchInteractionEnd=function(e){var t=e.index,n=e.playMode;this._initialized&&(void 0!==this._etParams.index&&this._etParams.index!==t||void 0!==this._etParams.play_mode&&this._etParams.play_mode!==n)&&this.handleVideoSwitchInteractionReport()},t.handleActualFMP=function(){var e,t,n;this._initialized&&(null==(e=this._pageSwitchActualFMPReporter)||e.report(),null==(t=this._videoSwitchActualFMPReporter)||t.report(),this._readyReported||null==(n=this._pageReadyReporter)||n.report(),this._readyReported=!0)},t.handlePageReadyForEdgeCase=function(){var e;this._initialized&&!this._readyReported&&(this._readyReported=!0,null==(e=this._pageReadyReporter)||e.report())},t.handleFirstFrameVideo=function(){var e,t,n;this._initialized&&(null==(e=this._pageSwitchFirstFrameVideoReporter)||e.report(),null==(t=this._videoSwitchFirstFrameVideoReporter)||t.report(),null==(n=this._videoSwitchTotalLatencyReporter)||n.report())},t.handleVideoSwitchInteractionReport=function(){var e;this._initialized&&(null==(e=this._videoSwitchInteractionReporter)||e.report())},t.browserModeOpeningInteractionStart=function(){var e;this._initialized&&(null==(e=this._browserModeOpeningLatencyReporter)||e.resetStartTime())},t.browserModeOpeningInteractionAbort=function(){var e;this._initialized&&(null==(e=this._browserModeOpeningLatencyReporter)||e.deInit())},t.handleBrowserModeOpeningReport=function(){var e;this._initialized&&(null==(e=this._browserModeOpeningLatencyReporter)||e.report())},e}())},30401:function(e,t,n){n.d(t,{Q:function(){return v}});var r=n(48748),i=n(95170),o=n(7120),c=n(54333),a=n(79262),s=n(19293),u=n(62564),d=n(39304),l=n(78990),m=n(82379),_=n(95092),h=n(53069);function f(e,t,n,r){var i,o=arguments.length,c=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if(("undefined"==typeof Reflect?"undefined":(0,a._)(Reflect))==="object"&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(c=(o<3?i(c):o>3?i(t,n,c):i(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c}function p(e,t){if(("undefined"==typeof Reflect?"undefined":(0,a._)(Reflect))==="object"&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}var v=function(e){function t(){for(var e,n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];return(0,i._)(this,t),(e=(0,r._)(this,t,(0,c._)(o))).defaultState=(0,h.$V)(),e}return(0,o._)(t,e),t.prototype.updateVideo=function(e){var t=this;return e.pipe((0,u.T)(function(e){return(0,h.LM)().updateVideo(e),t.noop()}))},t}(l.E);v.jotaiAtom=h.yA,f([(0,m.Mj)(),p("design:type",Function),p("design:paramtypes",[void 0===s.c?Object:s.c]),p("design:returntype",void 0)],v.prototype,"updateVideo",null),v=f([(0,_.nV)("VideoPlayerJotai")],v),h.yA.__SIGI_MODULE__=v,(0,d.y)(v)},26705:function(e,t,n){n.d(t,{ao:function(){return m},uO:function(){return l}});var r,i=n(5377),o=n(45996),c=n(16327),a=n(90432),s=n(87704),u=n(70991),d=n(20746),l=((r={})[r.Loading=0]="Loading",r[r.Loaded=1]="Loaded",r),m={handleCommentClick:function(e){a.f.sendEvent("click_comment_button",e)},handleCommentLike:function(e){var t=e.isLike,n=(0,c._)(e,["isLike"]);a.f.sendEvent(t?"like_comment":"cancel_like_comment",n)},handlePostComment:function(e){var t=(0,s.Hd)(u.DK);a.f.sendEvent("post_comment",(0,o._)((0,i._)({},e),{from_group_id:t}))},handleShowMoreReply:function(e){a.f.sendEvent("show_more_reply",e)},handleCommentShow:function(e){a.f.sendEvent("video_comment_show",e)},handleSearchAt:function(e){a.f.sendEvent("search_comment_at",e)},handleSelectAt:function(e){a.f.sendEvent("add_comment_at",e)},handleEmojiSelect:function(e){a.f.sendEvent("search_comment_emoji",e)},handleClose:function(e){a.f.sendEvent("close_comment",e)},handleLeaveComment:function(e){a.f.sendEvent("leave_commet_page",e)},handleKeepComment:function(e){a.f.sendEvent("keep_editing_comment",e)},handleCopyCommentUrl:function(e){a.f.sendEvent("web_comment_url",e)},handleTapComment:function(e){a.f.sendEvent("tap_comment",e)},handleCloseCommentTab:function(){a.f.sendEvent("close_comment_tab",{enter_method:d.c.ClickCancel})},handleCloseCommentPanel:function(e){a.f.sendEvent("close_comment",e)},handleMentionItemShow:function(e){a.f.sendEvent("tag_mention_head_show",(0,o._)((0,i._)({},e),{function:"mention"}))},handleClickBackToTop:function(e){a.f.sendEvent("click_back_to_top",e)},handleCommentModuleExpose:function(e){a.f.sendEvent("reply_module_show",{type:e.type})},handleCommentExpose:function(e){a.f.sendEvent("reply_show",(0,i._)({},e))},handleCommentIconClick:function(e){a.f.sendEvent("comment_icon_click",e)},handleCommentPanelClose:function(e){a.f.sendEvent("comment_panel_close",e)},handleCommentSeeMoreClick:function(){a.f.sendEvent("comment_see_more_click")},handleCommentLoadComplete:function(e){a.f.sendEvent("comments_load_complete",e)},handleCommentLoadMore:function(e){a.f.sendEvent("comment_load_more",e)},handleCommentPreload:function(e){a.f.sendEvent("comments_preload",e)}}},38794:function(e,t,n){n.d(t,{$G:function(){return A},Cy:function(){return I},HT:function(){return M},Kq:function(){return C},M2:function(){return k},TI:function(){return F},VQ:function(){return P},ez:function(){return w},fk:function(){return T},fo:function(){return L},k0:function(){return S},ks:function(){return E},n:function(){return O},nX:function(){return R},rU:function(){return b}});var r,i,o,c,a,s,u,d,l,m,_,h,f,p,v=n(5377),g=n(45996),y=n(90432),C=((r={}).ClickEnter="click_enter",r.ClickIcon="click_icon",r.ClickViewAll="click_view_all",r.ClickSearch="homepage_click_search",r.ClickMoreGeneralList="click_more_general_list",r.ClickSearchResult="click_search_result",r.SearchHistory="search_history",r.RecomSearch="recom_search",r.ManagePersonalise="manage_personalise",r),w=((i={}).Hot="hot",i.Sav="top",i.Music="music",i.SearchBar="search_bar_outer",i.ExploreAll="explore_all",i),S=((o={}).EnrichSug="enrich_sug",o.NormalSug="normal_sug",o),R=((c={}).User="user",c.Video="video",c.General="general",c.Live="live",c.Photo="photo",c),k=((a={}).RecomSearchFeedback="recom_search_feedback",a),I=((s={}).RecomSearch="recom_search",s.SearchHistory="search_history",s.videoTitleChallenge="video_title_challenge",s.NormalSearch="normal_search",s.SearchOuter="search_outer",s.SwitchTab="switch_tab",s.ClickMoreGeneralList="click_more_general_list",s.SearchSug="search_sug",s.DefaultSearchKeyword="default_search_keyword",s.CommentRelatedSearch="comment_related_search",s.CommentHighlightedWords="comment_highlighted_words",s.RelatedSearch="related_search",s),b=((u={}).Sug="sug",u.RecomSearch="recom_search",u.SearchBar="related_search_anchor_v2",u.CommentRelatedSearch="comment_related_search",u.CommentHighlightedWords="comment_highlighted_words",u.RelatedSearch="related_search",u.ExploreAll="explore_all",u),E=((d={}).Tag="tag",d.Person="person",d.LiveCard="live_card",d.HotUser="hot_user",d),P=((l={}).ClickIntoLive="click_into_live",l.ClickInfo="click_info",l.ClickClose="click_close",l.ClickBlankSpace="click_blank_space",l.ClickDone="click_done",l),T=((m={}).Report="report",m.NotRelevant="not_relevant",m.Close="close",m),M=((_={}).Enter="enter",_.Cancel="cancel",_),F=((h={}).NotInterested="Not interested",h.UnrelatedContent="Unrelated content",h.InappropriateContent="Inappropriate content",h.Others="others",h.Cancel="cancel",h),O=((f={})[f.OnToOff=1]="OnToOff",f[f.OffToOn=2]="OffToOn",f[f.RemainOff=3]="RemainOff",f[f.RemainOn=4]="RemainOn",f),L=((p={}).On="on",p.Off="off",p),A={handleSugClick:function(e){y.f.sendEvent("trending_words_click",e)},handleSugImpression:function(e){y.f.sendEvent("trending_words_show",e)},handleSugGroupImpression:function(e){y.f.sendEvent("trending_show",e)},handleSearchEntry:function(e){y.f.sendEvent("enter_search",e)},handleSearchImpression:function(e){y.f.sendEvent("search_result_show",(0,v._)({token_type:"person"},e))},handleSearchVideoImpression:function(e){y.f.sendEvent("search_result_show_video",(0,v._)({},e))},handleSearch:function(e){y.f.sendEvent("search",(0,g._)((0,v._)({},e),{is_success:1}))},handleSearchResultClick:function(e){y.f.sendEvent("search_result_click",(0,v._)({},e))},handleSearchSessionFinish:function(e){y.f.sendEvent("search_session_finish",e)},handleSearchResultEmpty:function(e){y.f.sendEvent("empty_search",(0,v._)({},e))},handleClickSearch:function(e){var t=e.target;y.f.sendEvent("click_search",{target:void 0===t?"homepage_click_search":t})},handleEnterSearchPage:function(e){var t=e.enter_method;y.f.sendEvent("enter_search_page",{enter_method:void 0===t?"homepage_click_search":t})},handleEnterSearchBlankPage:function(e){y.f.sendEvent("enter_search_blankpage",e)},handleSearchHistory:function(e){y.f.sendEvent("search_history",e)},handleTrendingWordsShow:function(e){y.f.sendEvent("trending_words_show",e)},handleTrendingWordsClick:function(e){y.f.sendEvent("trending_words_click",e)},handleTrendingShow:function(e){y.f.sendEvent("trending_show",e)},handleCommentRelatedSearchBoardShow:function(e){y.f.sendEvent("comment_related_search_board_show",e)},handleCommentRelatedSearchBoardClick:function(e){y.f.sendEvent("comment_related_search_board_click",e)},handleSugReportConfirm:function(e){y.f.sendEvent("sug_report_confirm",e)},handleSugReportLaunch:function(e){y.f.sendEvent("sug_report_launch",e)},handleChallengeTitleClick:function(e){y.f.sendEvent("challenge_title_click",e)},handleClickSearchFeedback:function(e){y.f.sendEvent("click_search_feedback",e)},handleSearchTextSubmit:function(e){y.f.sendEvent("search_text_submit",e)},handleSearchFeedbackStatus:function(e){y.f.sendEvent("search_feedback_status",e)},handleManageSearchPopupShow:function(e){y.f.sendEvent("manage_search_popup_show",e)},handleManageSearchPopupClick:function(e){y.f.sendEvent("manage_search_popup_click",e)},handleSearchNonPersonalizationEntranceShow:function(e){y.f.sendEvent("search_non_personalization_entrance_show",e)}}}}]);