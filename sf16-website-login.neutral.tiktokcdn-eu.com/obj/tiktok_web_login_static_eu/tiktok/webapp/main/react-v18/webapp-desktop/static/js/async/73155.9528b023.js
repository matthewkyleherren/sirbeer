"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["73155"],{6754:function(e,r,t){t.d(r,{pg:function(){return Q},le:function(){return er},Pf:function(){return et}});var n,i,a,s,o,u=t(79066),l=t(35383),c=t(41386),h=t(5377),d=t(45996),_=t(16327),f=t(72516),p=t(94456),v=t(82887),m=t(66905),S=t(10625),y=t(97050),g=t(2475),L=t(88999),w=t(38794),k=t(49065),b=t(67500),P=((n={})[n.Reported=1]="Reported",n[n.Dislike=2]="Dislike",n[n.General=3]="General",n[n.Photosensitive=4]="Photosensitive",n),R=t(53069),I=t(37240),T=t(44208),x=t(12293),G=t(92739),U=t(94185),E=t(48323),D=t(42963),X={keyword:"",error:null,loading:!1,hasMore:!0,cursor:0,items:[],preloadList:[]},M={keyword:"",error:null,loading:!1,hasMore:!0,totalLength:0,cursor:0,data:{videoList:[],otherDataList:[]},items:[],preloadList:[]},V=(a={},(0,l._)(a,w.nX.General,M),(0,l._)(a,w.nX.User,X),(0,l._)(a,w.nX.Video,X),(0,l._)(a,w.nX.Live,X),(0,l._)(a,w.nX.Photo,X),a),C=t(17231),A=t(39154),O=function(e){var r=e.searchResultId,t=e.keyword,n=e.searchType,i=e.impressionId,a=function(e,a,s){var o;return w.$G.handleSearchVideoImpression({search_type:n,enter_from:C.x.SearchResult,group_id:null==e?void 0:e.id,author_id:null==e||null==(o=e.author)?void 0:o.id,rank:a,item_rank:s,search_keyword:t,impr_id:i,search_id:r})},s=function(e,a){w.$G.handleSearchImpression((0,h._)({search_type:n,enter_from:C.x.SearchResult,item_rank:e.itemRank,search_keyword:t,search_result_id:e.userId,impr_id:i,search_id:r},e)),(null==a?void 0:a.liveRoomId)&&A.lu.handleLiveShow((0,h._)({room_id:a.liveRoomId,anchor_id:e.userId,action_type:A.zT.Click,enter_from_merge:A.Se.SearchUser,enter_method:A.Mm.OthersPhoto,search_type:n,search_id:r,search_keyword:t,search_result_id:e.userId,rank:e.rank,impr_id:i},a))};return{reportEmpty:function(){return w.$G.handleSearchResultEmpty({search_keyword:t,impr_id:i,search_id:r})},reportPhoto:function(e,r,t){return a(e,r,t)},reportVideo:a,reportUser:s,reportGeneralUserLive:function(e,r,t){s((0,h._)({userId:e,rank:0},{is_aladdin:1,token_type:w.ks.HotUser,user_tag:"",user_name:r},t&&{list_result_type:"live",list_item_id:t}),{liveRoomId:t,enter_from_merge:A.Se.General})},reportLive:function(e,i){return w.$G.handleSearchImpression({search_type:n,search_id:r,search_keyword:t,search_result_id:null!=e?e:"",enter_from:C.x.SearchResult,token_type:w.ks.LiveCard,is_aladdin:1,rank:i})},reportLiveItem:function(e,i){return w.$G.handleSearchImpression((0,h._)({search_type:n,search_id:r,search_keyword:t,rank:0},{aladdin_words:e.title,aladdin_rank:i,list_result_type:"live",list_item_id:e.id_str,realtime_watch_user:e.user_count}))}}},F=t(5857),N=function(e){var r=e.searchResultId,t=e.res,n=e.hasGeneralSearchWithLive,i=e.keyword,a=e.existingTotalLength,s=e.existingVideoCount,o=e.existingUserCount,u=t.data,l=t.log_pb,c=O({searchResultId:r,keyword:i,searchType:w.nX.General,impressionId:null==l?void 0:l.impr_id}),h=0,d=0,_=0,f=a,p=!0,v=!1,m=void 0;try{for(var S,g=(void 0===u?[]:u)[Symbol.iterator]();!(p=(S=g.next()).done);p=!0){var L=S.value;if(L.type===y.uf.Video&&L.item&&c.reportVideo(L.item,s+h++,f++),L.type===y.uf.User&&(null==(k=L.user_list)||k.forEach(function(e){var r,t=e.user_info;c.reportUser({userId:t.uid,rank:o+d++,itemRank:f++},{liveRoomId:null!=(r=t.room_id_str)?r:String(t.room_id)})})),n){if(L.type===y.uf.UserLive&&L.user_live){var k,b,P,R=L.user_live.user_info,I=JSON.parse(null!=(P=null==(b=L.user_live.live_info)?void 0:b.raw_data)?P:"{}");I.id_str&&c.reportLiveItem(I,0),c.reportGeneralUserLive(R.user_info.uid,R.user_info.nickname,I.id_str),f++}if(L.type===y.uf.Live){var T,x,G=(0,F.rc)(null==(T=L.live_collection)?void 0:T.live_list);c.reportLive(null==(x=L.common)?void 0:x.doc_id_str,_++),G.forEach(function(e,r){c.reportLiveItem(e,r),f++})}}}}catch(e){v=!0,m=e}finally{try{p||null==g.return||g.return()}finally{if(v)throw m}}},H=function(e){var r=e.searchResultId,t=e.res,n=e.hasGeneralSearchWithLive,i=e.shouldUseRawPosition,a=e.state,s=e.shouldClearData,o=t.data,u=void 0===o?[]:o,l=t.status_code,c=t.has_more,h=t.log_pb,d=(0,F.wb)(l),_=[],f=[],p={hasMore:!!c,statusCode:d,itemList:[],rid:r,log_pb:h},v={hasMore:!!c,statusCode:d,liveList:[],rid:r};a.cursor=null!=(k=t.cursor)?k:a.cursor,a.preloadList=null!=(b=a.preloadList)?b:[],s&&(a.data.videoList=[],a.data.otherDataList=[],a.preloadList=[]);var m=null==(w=t.global_doodle_config)?void 0:w.forbid_search_type;(1===m||0===m&&0===u.length)&&(a.isGoToHashtag=!0);var S=!0,g=!1,L=void 0;try{for(var w,k,b,P,R=u[Symbol.iterator]();!(S=(P=R.next()).done);S=!0){var I=P.value;if(I.type===y.uf.Video&&I.item&&(p.itemList.push(I.item),a.data.videoList.push(I.item.id),a.preloadList.push({id:I.item.id,url:null!=(T=I.item.video.playAddr)?T:""}),a.totalLength++),I.type===y.uf.User){var T,x,G=(0,F._P)(I.user_list,r,null==h?void 0:h.impr_id);G.userList.forEach(function(e){return _.push(e)}),G.userStatsList.forEach(function(e){return f.push(e)});var U=a.data.videoList.length,E=_.map(function(e){return e.uniqueId}),D={type:y.uf.User,items:E,hasMore:null!=(x=I.view_more)&&x,common:I.common,position:i||U%6==0?U:6*Math.ceil(U/6)};a.data.otherDataList.push(D),a.totalLength+=E.length}if(n){if(I.type===y.uf.UserLive&&I.user_live){var X,M,V,C,A,O=I.user_live.user_info,N=(0,F.Km)(O,r,null==h?void 0:h.impr_id),H=N.user,q=N.stats;_.push(H),f.push(q);var J=JSON.parse(null!=(M=null==(X=I.user_live.live_info)?void 0:X.raw_data)?M:"{}");J.id_str&&v.liveList.push(J);var K=a.data.videoList.length,W={type:y.uf.UserLive,items:[null!=(V=O.user_info.unique_id)?V:""],lives:[null!=(C=J.id_str)?C:""],hasMore:null!=(A=I.view_more)&&A,common:I.common,position:i||K%6==0?K:6*Math.ceil(K/6),teaParams:{search_result_id:O.user_info.uid}};a.data.otherDataList.push(W),a.totalLength++}if(I.type===y.uf.Live){var z,$,Z,j,B=(0,F.rc)(null==(z=I.live_collection)?void 0:z.live_list);B.forEach(function(e){return v.liveList.push(e)});var Y=a.data.videoList.length,Q={type:y.uf.Live,lives:B.map(function(e){return e.id_str}),hasMore:null!=(Z=I.view_more)&&Z,common:I.common,position:i||Y%6==0?Y:6*Math.ceil(Y/6),teaParams:{search_result_id:null!=(j=null==($=I.common)?void 0:$.doc_id_str)?j:""}};a.data.otherDataList.push(Q),a.totalLength++}}}}catch(e){g=!0,L=e}finally{try{S||null==R.return||R.return()}finally{if(g)throw L}}return{userList:_,userStatsList:f,itemListRes:p,liveListRes:v,newState:a}},q=t(52380),J=((i={})[i.NetworkError=-1]="NetworkError",i[i.NoResultText=10]="NoResultText",i[i.SelfHarmText=11]="SelfHarmText",i[i.HateSexualizationText=12]="HateSexualizationText",i[i.Guide=13]="Guide",i),K=function(e){var r;return!!((null==(r=e.search_nil_info)?void 0:r.text_type)&&[J.SelfHarmText,J.Guide].includes(e.search_nil_info.text_type))},W=(s={},(0,l._)(s,J.SelfHarmText,function(e,r){return{type:J.SelfHarmText,data:(0,d._)((0,h._)({},e.suicide_prevent),{et_search_id:r})}}),(0,l._)(s,J.Guide,function(e,r){return{type:J.Guide,data:{et_search_id:r}}}),s),z=t(44957),$=t(54149),Z=(o={},(0,l._)(o,w.nX.General,function(e){return(0,u._)(function(){return(0,f.__generator)(this,function(r){return[2,z.h.get("/api/search/general/full/",{query:e,baseUrlType:$.Z4.FixedWww})]})})()}),(0,l._)(o,w.nX.User,function(e){return(0,u._)(function(){return(0,f.__generator)(this,function(r){return[2,z.h.get("/api/search/user/full/",{query:e,baseUrlType:$.Z4.FixedWww})]})})()}),(0,l._)(o,w.nX.Video,function(e){return(0,u._)(function(){return(0,f.__generator)(this,function(r){return[2,z.h.get("/api/search/item/full/",{query:e,baseUrlType:$.Z4.FixedWww})]})})()}),(0,l._)(o,w.nX.Live,function(e){return(0,u._)(function(){return(0,f.__generator)(this,function(r){return[2,z.h.get("/api/search/live/full/",{query:e,baseUrlType:$.Z4.FixedWww})]})})()}),(0,l._)(o,w.nX.Photo,function(e){return(0,u._)(function(){return(0,f.__generator)(this,function(r){return[2,z.h.get("/api/search/photo/full/",{query:e,baseUrlType:$.Z4.FixedWww})]})})()}),o),j={v1:8,v2:10,v3:16,v4:20},B=(0,v._)((0,S.p)("searchResultMapAtom@tiktok/webapp-atoms",V),{rehydrationKey:"webapp.search-result-map"}),Y=(0,v._)((0,S.p)("searchResultStateAtom@tiktok/webapp-atoms",{activeSearchType:w.nX.General,teaParams:{}}),{rehydrationKey:"webapp.search-result-state"}),Q=(0,S.p)("searchResultAtom@tiktok/webapp-atoms",function(e){var r=e(Y),t=r.searchPrecheck,n=(0,_._)(r,["searchPrecheck"]),i=e(B),a=(null==t?void 0:t.type)===J.Guide?t.data.secondary_page:void 0;return(0,d._)((0,h._)({},n),{searchPrecheck:t,searchReminderData:a,resultMap:i})},function(e,r,t){console.warn("Tried to set searchResultAtom with:",t)}),ee=(0,m.i)(Q,function(e,r){return{setSearchGlobalParams:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r(Y,function(r){return(0,d._)((0,h._)({},r),{searchGlobalParams:t?e:(0,h._)({},r.searchGlobalParams,e)})})},resetSearchResult:function(e){e?r(B,function(r){return(0,d._)((0,h._)({},r),(0,l._)({},e,e===w.nX.General?M:X))}):r(B,V)},mergeState:function(e,t){r(B,function(r){return(0,d._)((0,h._)({},r),(0,l._)({},e,(0,h._)({},r[e],t)))})},updateStateDataForSearchType:function(t,n){var i,a,s=n.searchResultId,o=n.items,u=n.preloadList,l=n.keyword,c=n.cursor,_=n.hasMore,f=e(B)[t],p=null!=(i=null==f?void 0:f.items)?i:[],v=null!=(a=null==f?void 0:f.preloadList)?a:[];this.mergeState(t,{keyword:l,cursor:null!=c?c:0,error:null,loading:!1,items:p.concat(o),hasMore:_,preloadList:v.concat(null!=u?u:[]),searchResultId:s}),r(Y,function(e){return(0,d._)((0,h._)({},e),{activeSearchType:t,searchGlobalParams:(0,d._)((0,h._)({},e.searchGlobalParams),{preSearchId:s})})})},handleSearchPrecheck:function(e,t,n){if(null==(i=t.search_nil_info)?void 0:i.text_type){var i,a,s=null==(a=W[t.search_nil_info.text_type])?void 0:a.call(W,t,n);s&&(r(Y,function(e){return(0,d._)((0,h._)({},e),{searchPrecheck:s})}),r(B,function(r){return(0,d._)((0,h._)({},r),(0,l._)({},e,(0,d._)((0,h._)({},r[e]),{searchPrecheck:s})))}))}},handleSearchError:function(t){var n,i,a=t.searchType,s=t.keyword,o=t.isEmpty,u=t.res,l=e(Y),c=e(B)[a].cursor;o&&(0,T.u8)().addToast({toastMessageType:T.PU.Error,messageKey:"server_error_title"}),0===c&&w.$G.handleSearch((0,d._)((0,h._)({},l.teaParams),{search_type:a,search_id:"",search_keyword:s}));var f=u?null!=(i=null==(n=u.search_nil_info)?void 0:n.text_type)?i:J.NoResultText:J.NetworkError,p={type:f,extra:f===J.HateSexualizationText?null==u?void 0:u.search_nil_text:void 0};this.mergeState(a,{keyword:s,error:p,loading:!1,hasMore:!1}),r(Y,function(e){return e.searchPrecheck,(0,_._)(e,["searchPrecheck"])})},performFetchSearch:function(t,n,i,a){return(0,u._)(function(){var s,o,u,l,_,p,v,m,S,y,g,k,b,P,T,x,G,U,E,D,X,M,V,C,A,O;return(0,f.__generator)(this,function(f){switch(f.label){case 0:o=e(Y),u=e(B)[t],l=!e(I.WH).isSearchPersonalized,p=null==(_=(0,L.x)().abTestVersion)||null==(s=_.parameters.search_item_list_count)?void 0:s.vid,m=null!=(v=null==_?void 0:_.versionName)?v:"",S=Z[t],f.label=1;case 1:return f.trys.push([1,3,,4]),this.mergeState(t,{loading:!0,keyword:n}),y=p?j[p]:void 0,g=S((0,h._)({keyword:n,cursor:u.cursor,count:null!=y?y:12,offset:u.cursor,client_ab_versions:m,web_search_code:(0,F.cG)(),is_non_personalized_search:Number(l),search_id:u.searchResultId},a)),k=Date.now(),[4,g];case 2:if(P=(b=f.sent()).has_more,T=b.log_pb,G=(null!=(x=b.extra)?x:{}).logid,D=null!=(E=null!=(U=u.searchResultId)?U:G)?E:"",0===u.cursor&&(M=e(R.yA).currentVideo,w.$G.handleSearch((0,d._)((0,h._)({},o.teaParams),{search_type:t,search_id:D,search_keyword:n,impr_id:null==T?void 0:T.impr_id,duration:Date.now()-k,pre_search_id:null==(X=o.searchGlobalParams)?void 0:X.preSearchId,group_id:null!=(V=null==M?void 0:M.id)?V:void 0}))),C=i in b?b[i]:[],A=K(b),!(null==C?void 0:C.length)&&!P&&!A)throw this.handleSearchError({searchType:t,keyword:n,res:b}),Error("handled");return this.handleSearchPrecheck(t,b,D),r(Y,function(e){return(0,d._)((0,h._)({},e),{res:b})}),[2,{searchResultId:D,res:b}];case 3:throw O=f.sent(),(0,c._)(O,Error)&&"handled"===O.message||this.handleSearchError({searchType:t,keyword:n}),O;case 4:return[2]}})}).call(this)},fetchSearchGeneral:function(t,n,i){return(0,u._)(function(){var a,s,o,u,l,c,_,v,m,S,R,I,T,G,X,M,V,C;return(0,f.__generator)(this,function(f){switch(f.label){case 0:if(a=this,o=t!==(s=e(B)[w.nX.General]).keyword,u=e(k.x).photoSensitiveVideosSetting,l=(0,L.x)().user,_="v1"===(0,b.d)("search_add_live")&&(null==(c=null==l?void 0:l.hasSearchLivePermission)||c),v="v0"!==(0,b.d)("search_page_redesign"),s.loading)return[2];f.label=1;case 1:return f.trys.push([1,3,,4]),r(Y,function(e){return(0,d._)((0,h._)({},e),{teaParams:n})}),[4,this.performFetchSearch(w.nX.General,t,"data",i)];case 2:return N({searchResultId:S=(m=f.sent()).searchResultId,res:R=m.res,hasGeneralSearchWithLive:_,keyword:t,existingTotalLength:s.totalLength,existingVideoCount:s.data.videoList.length,existingUserCount:s.data.otherDataList.filter(function(e){return e.type===y.uf.User||e.type===y.uf.UserLive}).length}),T=(I=H({searchResultId:S,res:R,hasGeneralSearchWithLive:_,shouldUseRawPosition:v,state:s,shouldClearData:o})).userList,G=I.userStatsList,X=I.itemListRes,M=I.liveListRes,V=I.newState,C=X.itemList,(null==l?void 0:l.photoSensitiveVideosSetting)!==g.ll.CLOSE&&(l||u!==g.ll.CLOSE)||(C=C.filter(function(e){return e.maskType!==P.Photosensitive})),(0,p.unstable_batchedUpdates)(function(){(0,x.Gp)().multiSetUser(T),(0,x.Gp)().multiSetUserStats(G),o&&(r(Y,function(e){return(0,d._)((0,h._)({},e),{searchPrecheck:null})}),r(q.TD,U.hA)),(0,E.Tj)(e,r,q.TD,D.Lz.SearchTop,X),(0,q.go)().setItems(M.liveList),a.updateStateDataForSearchType(w.nX.General,(0,d._)((0,h._)({},R,V),{searchResultId:S,items:C.map(function(e){return e.id}),keyword:t,hasMore:!!R.has_more}))}),[3,4];case 3:return console.warn({error:f.sent()}),(0,E.e_)(r,q.TD),[3,4];case 4:return[2]}})}).call(this)},fetchSearchVideo:function(t,n,i){return(0,u._)(function(){var a,s,o,u,l,c,_,v,m,S,y,b,R,I,T;return(0,f.__generator)(this,function(f){switch(f.label){case 0:if(a=this,o=t!==(s=e(B)[w.nX.Video]).keyword,u=e(k.x).photoSensitiveVideosSetting,l=(0,L.x)().user,s.loading)return[2];f.label=1;case 1:return f.trys.push([1,3,,4]),r(Y,function(e){return(0,d._)((0,h._)({},e),{teaParams:n})}),[4,this.performFetchSearch(w.nX.Video,t,"item_list",i)];case 2:return _=(c=f.sent()).searchResultId,S=void 0===(m=(v=c.res).item_list)?[]:m,y=v.status_code,b=v.has_more,R=v.log_pb,I=O({keyword:t,searchResultId:_,searchType:w.nX.Video,impressionId:null==R?void 0:R.impr_id}),S.length?S.forEach(function(e,r,t){I.reportVideo(e,t.length+r,s.items.length+r)}):I.reportEmpty(),T=S,(null==l?void 0:l.photoSensitiveVideosSetting)!==g.ll.CLOSE&&(l||u!==g.ll.CLOSE)||(T=T.filter(function(e){return e.maskType!==P.Photosensitive})),(0,p.unstable_batchedUpdates)(function(){o&&(r(Y,function(e){return(0,d._)((0,h._)({},e),{searchPrecheck:null})}),r(q.A8,U.hA)),(0,E.Tj)(e,r,q.A8,D.Lz.SearchVideo,{itemList:T,hasMore:!!b,statusCode:(0,F.wb)(y),log_pb:R}),a.updateStateDataForSearchType(w.nX.Video,(0,d._)((0,h._)({},v),{searchResultId:_,items:T.map(function(e){return e.id}),preloadList:T.map(function(e){var r;return{id:e.id,url:null!=(r=e.video.playAddr)?r:""}}),keyword:t,hasMore:!!v.has_more}))}),[3,4];case 3:return console.warn({error:f.sent()}),(0,E.e_)(r,q.A8),[3,4];case 4:return[2]}})}).call(this)},fetchSearchUser:function(t,n,i){return(0,u._)(function(){var a,s,o,u,l,c,_,v,m,S,y,g,L;return(0,f.__generator)(this,function(f){switch(f.label){case 0:if(a=this,o=t!==(s=e(B)[w.nX.User]).keyword,s.loading)return[2];f.label=1;case 1:return f.trys.push([1,3,,4]),r(Y,function(e){return(0,d._)((0,h._)({},e),{teaParams:n})}),[4,this.performFetchSearch(w.nX.User,t,"user_list",i)];case 2:return l=(u=f.sent()).searchResultId,v=void 0===(_=(c=u.res).user_list)?[]:_,m=c.log_pb,S=O({keyword:t,searchResultId:l,searchType:w.nX.User,impressionId:null==m?void 0:m.impr_id}),g=(y=(0,F._P)(v,l,null==m?void 0:m.impr_id)).userList,L=y.userStatsList,g.length?g.forEach(function(e,r){S.reportUser({userId:e.id,rank:r,itemRank:s.items.length+r})}):S.reportEmpty(),(0,p.unstable_batchedUpdates)(function(){o&&r(Y,function(e){return(0,d._)((0,h._)({},e),{searchPrecheck:null})}),(0,x.Gp)().multiSetUser(g),(0,x.Gp)().multiSetUserStats(L),a.updateStateDataForSearchType(w.nX.User,(0,d._)((0,h._)({},c),{items:g.map(function(e){return e.uniqueId}),searchResultId:l,keyword:t,hasMore:!!c.has_more}))}),[3,4];case 3:return console.warn({error:f.sent()}),[3,4];case 4:return[2]}})}).call(this)},fetchSearchLive:function(t,n,i){return(0,u._)(function(){var a,s,o,u,l,c,_,v,m,S,y,g;return(0,f.__generator)(this,function(f){switch(f.label){case 0:if(a=this,o=t!==(s=e(B)[w.nX.Live]).keyword,s.loading)return[2];f.label=1;case 1:return f.trys.push([1,3,,4]),r(Y,function(e){return(0,d._)((0,h._)({},e),{teaParams:n})}),[4,this.performFetchSearch(w.nX.Live,t,"data",i)];case 2:return l=(u=f.sent()).searchResultId,v=void 0===(_=(c=u.res).data)?[]:_,m=c.log_pb,S=O({keyword:t,searchResultId:l,searchType:w.nX.Live,impressionId:null==m?void 0:m.impr_id}),g=(y=(0,F.rc)(v.map(function(e){return e.live_info}))).flatMap(function(e){return e.owner?(0,F.Km)((0,G.E)(e.owner),l,null==m?void 0:m.impr_id):[]}),y.length?y.forEach(function(e,r){S.reportLiveItem(e,r)}):S.reportEmpty(),(0,p.unstable_batchedUpdates)(function(){o&&r(Y,function(e){return(0,d._)((0,h._)({},e),{searchPrecheck:null})}),(0,x.Gp)().multiSetUser(g.map(function(e){return e.user})),(0,x.Gp)().multiSetUserStats(g.map(function(e){var r=e.stats;return(0,d._)((0,h._)({},r),{needFix:!0})})),(0,q.go)().setItems(y),a.updateStateDataForSearchType(w.nX.Live,(0,d._)((0,h._)({},c),{searchResultId:l,items:y.map(function(e){return e.id_str}),keyword:t,hasMore:!!c.has_more}))}),[3,4];case 3:return console.warn({error:f.sent()}),[3,4];case 4:return[2]}})}).call(this)},fetchSearchPhoto:function(t,n,i){return(0,u._)(function(){var a,s,o,u,l,c,_,v,m,S,y,b,R,I,T;return(0,f.__generator)(this,function(f){switch(f.label){case 0:if(a=this,o=t!==(s=e(B)[w.nX.Photo]).keyword,u=e(k.x).photoSensitiveVideosSetting,l=(0,L.x)().user,s.loading)return[2];f.label=1;case 1:return f.trys.push([1,3,,4]),r(Y,function(e){return(0,d._)((0,h._)({},e),{teaParams:n})}),[4,this.performFetchSearch(w.nX.Photo,t,"item_list",i)];case 2:return _=(c=f.sent()).searchResultId,S=void 0===(m=(v=c.res).item_list)?[]:m,y=v.status_code,b=v.has_more,R=v.log_pb,I=O({keyword:t,searchResultId:_,searchType:w.nX.Photo,impressionId:null==R?void 0:R.impr_id}),S.length?S.forEach(function(e,r,t){I.reportPhoto(e,t.length+r,s.items.length+r)}):I.reportEmpty(),T=S,(null==l?void 0:l.photoSensitiveVideosSetting)!==g.ll.CLOSE&&(l||u!==g.ll.CLOSE)||(T=T.filter(function(e){return e.maskType!==P.Photosensitive})),(0,p.unstable_batchedUpdates)(function(){o&&(r(Y,function(e){return(0,d._)((0,h._)({},e),{searchPrecheck:null})}),r(q.fL,U.hA)),(0,E.Tj)(e,r,q.fL,D.Lz.SearchPhoto,{itemList:T,hasMore:!!b,statusCode:(0,F.wb)(y),log_pb:R}),a.updateStateDataForSearchType(w.nX.Photo,(0,d._)((0,h._)({},v),{searchResultId:_,items:T.map(function(e){return e.id}),preloadList:T.map(function(e){return{id:e.id,url:""}}),keyword:t,hasMore:!!v.has_more}))}),[3,4];case 3:return console.warn({error:f.sent()}),(0,E.e_)(r,q.fL),[3,4];case 4:return[2]}})}).call(this)}}}),er=(ee.useAtomService,ee.useServiceState),et=ee.useServiceDispatchers;ee.getStaticApi},5857:function(e,r,t){t.d(r,{Km:function(){return o},_P:function(){return u},cG:function(){return c},rc:function(){return l},wb:function(){return h}});var n=t(54333),i=t(88999),a=t(71952),s=t(25872),o=function(e,r,t){var n;return{user:(0,s.bg)(e,{search_id:r,impr_id:t}),stats:{uniqueId:null!=(n=e.unique_id)?n:"",stats:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=e.follower_count,n=e.following_count,i=e.aweme_count,a=e.total_favorited;return{diggCount:0,followerCount:null!=t?t:0,followingCount:null!=n?n:0,heart:Number(null!=a?a:0),heartCount:Number(null!=a?a:0),videoCount:null!=i?i:0,needFix:r}}(e,!0)}}},u=function(e,r,t){return(null!=e?e:[]).reduce(function(e,i){var a=i.user_info;if(!a.unique_id)return e;var s=o(a,r,t),u=s.user,l=s.stats;return{userList:(0,n._)(e.userList).concat([u]),userStatsList:(0,n._)(e.userStatsList).concat([l])}},{userList:[],userStatsList:[]})},l=function(e){return(null!=e?e:[]).map(function(e){var r=e.raw_data;return JSON.parse(void 0===r?"{}":r)}).filter(function(e){return e.id_str})},c=function(){var e,r,t=(0,i.x)().abTestVersion,n=(null!=t?t:{}).parameters,a=void 0===n?{}:n,s=a.search_add_live,o=a.search_server,u={tiktok:{client_params_x:{search_engine:{}},search_server:{}}};return(null==s?void 0:s.vid)==="v2"&&(u.tiktok.client_params_x.search_engine.ies_mt_user_live_video_card_use_libra=1,u.tiktok.client_params_x.search_engine.mt_search_general_user_live_card=1),Object.keys(null!=(e=null==o?void 0:o.vid)?e:{}).length>0&&(u.tiktok.search_server=null!=(r=null==o?void 0:o.vid)?r:{}),JSON.stringify(u)},h=function(e){return[a.s.Ok,a.s.SearchYoungCode,a.s.SearchSensitiveCode].includes(e)?a.s.Ok:e}},44208:function(e,r,t){t.d(r,{PU:function(){return l},ku:function(){return _},u8:function(){return f}});var n,i=t(35383),a=t(5377),s=t(45996),o=t(66905),u=t(10625),l=((n={}).Notice="notice",n.Error="error",n.CTA="cta",n),c=(0,u.p)("toastAtom@tiktok/webapp-atoms",{}),h=0,d=(0,o.i)(c,function(e,r){return{addToast:function(e){var t="".concat(Number(new Date).toString(36),"_").concat(h++);r(c,function(r){return(0,s._)((0,a._)({},r),(0,i._)({},t,(0,a._)({id:t},e)))})},removeToast:function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var a=e(c);n.forEach(function(e){e in a&&delete a[e]}),r(c,a)}}}),_=d.useAtomService,f=(d.useServiceDispatchers,d.useServiceState,d.getStaticApi)},62010:function(e,r,t){t.d(r,{K:function(){return o}});var n=t(73628),i=t(89485),a=t(36646),s=t(79178);function o(e,r,t){function o(s,o,u){var l=e(),c=t.useServiceState(s,null!=o?o:i.bN),h=(0,a.P)(r,{selector:s,dependencies:null!=u?u:[]});return(0,n.useMemo)(function(){return l?c:h},[l,c,h])}function u(){var i=e(),a=t.useServiceDispatchers(),o=(0,s.w)(r);return(0,n.useMemo)(function(){return i?a:o},[i,a,o])}return{useSigiOrJotaiService:function(e,r,t){var i=o(e,r,t),a=u();return(0,n.useMemo)(function(){return[i,a]},[i,a])},useSigiOrJotaiState:o,useSigiOrJotaiDispatchers:u}}},36494:function(e,r,t){t.d(r,{IE:function(){return p},Pf:function(){return v},es:function(){return f}});var n=t(5377),i=t(16327),a=t(73628),s=t(79178),o=t(38794),u=t(6754),l=t(49339),c=t(62010),h=t(22221),d=t(69517),_=(0,c.K)(function(){return(0,l.XRV)().shouldUseSearchPageJotai},d.tq,{useServiceState:function(e,r){return(0,u.le)(function(r){var t=r.resultMap,a=(0,i._)(r,["resultMap"]);return e((0,n._)({},t,a))},r)},useServiceDispatchers:function(){var e=(0,u.Pf)(),r=(0,s.w)(h.d);return(0,a.useMemo)(function(){return{getTopSearch:function(r){var t=r.keyword,n=r.teaParams,i=r.search_source,a=r.device_type;return e.fetchSearchGeneral(t,n,{search_source:i,device_type:a})},getUserSearch:function(r){var t=r.keyword,n=r.teaParams;return e.fetchSearchUser(t,n)},getVideoSearch:function(r){var t=r.keyword,n=r.teaParams,i=void 0===n?{search_type:o.nX.Video}:n;return e.fetchSearchVideo(t,i)},getLiveSearch:function(t){var n=t.keyword,i=t.teaParams,a=t.device_type;return e.fetchSearchLive(n,i,{device_type:a}).then(r.syncStateFromSearchLiveListAtom)},getPhotoSearch:function(r){var t=r.keyword,n=r.teaParams;return e.fetchSearchPhoto(t,n)},setSearchResult:function(r){var t=r.key,n=(r.result.loading,(0,i._)(r.result,["loading"]));return e.mergeState(t,n)},resetSearchResult:e.resetSearchResult,setSearchGlobalParams:function(r){return e.setSearchGlobalParams(r)},setSearchReminderData:function(){},setShowTabs:function(){},dispose:function(){}}},[])}}),f=_.useSigiOrJotaiService,p=_.useSigiOrJotaiState,v=_.useSigiOrJotaiDispatchers}}]);