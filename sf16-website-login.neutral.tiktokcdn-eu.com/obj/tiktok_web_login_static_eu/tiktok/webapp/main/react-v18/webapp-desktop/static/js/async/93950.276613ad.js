"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["93950"],{22221:function(e,t,r){r.d(t,{d:function(){return k}});var n,i=r(48748),o=r(95170),a=r(7120),s=r(5377),l=r(45996),d=r(79262),u=r(4237),c=r(78990),h=r(82379),p=r(95092),_=r(52380),v=r(25872),f=r(2999),y=r(11483),g=r(58394);function S(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if(("undefined"==typeof Reflect?"undefined":(0,d._)(Reflect))==="object"&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a}function m(e,t){if(("undefined"==typeof Reflect?"undefined":(0,d._)(Reflect))==="object"&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}var k=function(e){function t(e,r){var n;return(0,o._)(this,t),(n=(0,i._)(this,t)).userModule=e,n.jotaiStore=r,n.defaultState={},n}(0,a._)(t,e);var r=t.prototype;return r.syncStateFromSearchLiveListAtom=function(e){var t=this.jotaiStore.get(_.hu);this.multiSetItem(e,Object.values(t))},r.setItem=function(e,t){t.id_str&&(e[t.id_str]=t)},r.updateItem=function(e,t){t.id_str&&e[t.id_str]&&(e[t.id_str]=(0,u.A)(e[t.id_str],t))},r.multiSetItem=function(e,t){var r=this;t.forEach(function(t){return r.setItem(e,t)})},r.addItems=function(e){var t=e.filter(function(e){return!!e.owner}).map(function(e){var t,r;return(0,v.bg)((0,l._)((0,s._)({},e.owner),{unique_id:null==(t=e.owner)?void 0:t.display_id,custom_verify:null==(r=e.owner)?void 0:r.authentication_info,room_id:e.id_str}))});return[this.userModule.getActions().multiSetUser(t),this.getActions().multiSetItem(e)]},r.setDeleteVideo=function(e,t){e[t]&&(e[t]=void 0)},t}(c.E);S([(0,h.h5)(),m("design:type",Function),m("design:paramtypes",["undefined"==typeof LiveModuleState?Object:LiveModuleState]),m("design:returntype",void 0)],k.prototype,"syncStateFromSearchLiveListAtom",null),S([(0,h.h5)(),m("design:type",Function),m("design:paramtypes",["undefined"==typeof LiveModuleState?Object:LiveModuleState,"undefined"==typeof room||void 0===room.Room?Object:room.Room]),m("design:returntype",void 0)],k.prototype,"setItem",null),S([(0,h.h5)(),m("design:type",Function),m("design:paramtypes",["undefined"==typeof Draft?Object:Draft,Object]),m("design:returntype",void 0)],k.prototype,"updateItem",null),S([(0,h.h5)(),m("design:type",Function),m("design:paramtypes",["undefined"==typeof LiveModuleState?Object:LiveModuleState,Array]),m("design:returntype",void 0)],k.prototype,"multiSetItem",null),S([(0,h.h5)(),m("design:type",Function),m("design:paramtypes",["undefined"==typeof LiveModuleState?Object:LiveModuleState,String]),m("design:returntype",void 0)],k.prototype,"setDeleteVideo",null),k=S([(0,p.nV)("LiveModule"),(n=(0,f.y)(y.J7),function(e,t){n(e,t,1)}),m("design:type",Function),m("design:paramtypes",[void 0===g.U?Object:g.U,"undefined"==typeof JotaiStoreType?Object:JotaiStoreType])],k)},80151:function(e,t,r){r.d(t,{F:function(){return b}});var n=r(48748),i=r(95170),o=r(7120),a=r(6586),s=r(54333),l=r(79262),d=r(76186),u=r(61945),c=r(23999),h=r(19293),p=r(24451),_=r(68710),v=r(78990),f=r(82379),y=r(95092),g=r(71952),S=r(22221);function m(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if(("undefined"==typeof Reflect?"undefined":(0,l._)(Reflect))==="object"&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a}function k(e,t){if(("undefined"==typeof Reflect?"undefined":(0,l._)(Reflect))==="object"&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}Object.freeze({statusCode:g.s.Ok,loading:!0,list:[],browserList:[],hasMore:!0,cursor:"0"});var b=function(e){function t(e){var r;return(0,i._)(this,t),(r=(0,n._)(this,t)).live=e,r.defaultState={},r}(0,o._)(t,e);var r=t.prototype;return r.resetLiveList=function(e,t){var r=t.key,n=t.hasMore,i=t.loading,o=t.cursor;e[r]={list:[],browserList:[],loading:void 0===i||i,statusCode:g.s.Ok,hasMore:void 0===n||n,cursor:void 0===o?"0":o}},r.addLiveList=function(e,t){var r=t.key,n=t.list,i=t.statusCode,o=void 0===i?g.s.Ok:i,a=t.hasMore,s=t.cursor;e[r]||(e[r]={list:[],browserList:[],loading:!1,statusCode:o,hasMore:!!a,cursor:s}),e[r].list=(0,d.A)(e[r].list,(0,u.A)(n,"id_str").map(function(e){return e.id_str})),e[r].statusCode=o,e[r].hasMore=a,e[r].cursor=s},r.setLoading=function(e,t){var r=t.loading,n=t.key;e[n]||(e[n]={list:[],browserList:[],loading:r,statusCode:g.s.Ok,hasMore:!0,cursor:"0"}),e[n].loading=r},r.setListKeyword=function(e,t){var r=t.keyword,n=t.key;e[n]||(e[n]={keyword:r,list:[],browserList:[],loading:!1,statusCode:g.s.Ok,hasMore:!0,cursor:"0"}),e[n].keyword=r},r.setList=function(e){var t=this;return e.pipe((0,p.E)(this.state$),(0,_.Z)(function(e){var r=(0,a._)(e,1)[0],n=r.key,i=r.response,o=i.liveList,l=void 0===o?[]:o,d=i.statusCode,u=void 0===d?g.s.Ok:d,h=i.hasMore,p=i.cursor;return u===g.s.Ok?c.of.apply(void 0,(0,s._)(t.live.addItems(l)).concat([t.getActions().addLiveList({key:n,list:l,statusCode:u,hasMore:void 0!==h&&h,cursor:void 0===p?"0":p})])):(0,c.of)(t.getActions().addLiveList({key:n,list:[],statusCode:u,hasMore:!0}))}))},t}(v.E);m([(0,f.uk)(),k("design:type",void 0===h.c?Object:h.c)],b.prototype,"dispose$",void 0),m([(0,f.h5)(),k("design:type",Function),k("design:paramtypes",["undefined"==typeof LiveListModuleState?Object:LiveListModuleState,Object]),k("design:returntype",void 0)],b.prototype,"resetLiveList",null),m([(0,f.h5)(),k("design:type",Function),k("design:paramtypes",["undefined"==typeof LiveListModuleState?Object:LiveListModuleState,Object]),k("design:returntype",void 0)],b.prototype,"addLiveList",null),m([(0,f.h5)(),k("design:type",Function),k("design:paramtypes",["undefined"==typeof LiveListModuleState?Object:LiveListModuleState,Object]),k("design:returntype",void 0)],b.prototype,"setLoading",null),m([(0,f.h5)(),k("design:type",Function),k("design:paramtypes",["undefined"==typeof LiveListModuleState?Object:LiveListModuleState,Object]),k("design:returntype",void 0)],b.prototype,"setListKeyword",null),m([(0,f.Mj)(),k("design:type",Function),k("design:paramtypes",[void 0===h.c?Object:h.c]),k("design:returntype",void 0)],b.prototype,"setList",null),b=m([(0,y.nV)("LiveList"),k("design:type",Function),k("design:paramtypes",[void 0===S.d?Object:S.d])],b)},26273:function(e,t,r){r.d(t,{f:function(){return L}});var n=r(48748),i=r(95170),o=r(7120),a=r(6586),s=r(54333),l=r(79262),d=r(46657),u=r(25572),c=r(23999),h=r(19293),p=r(24451),_=r(35572),v=r(68710),f=r(80339),y=r(39304),g=r(82379),S=r(95092),m=r(4076),k=r(37240);function b(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if(("undefined"==typeof Reflect?"undefined":(0,l._)(Reflect))==="object"&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a}function w(e,t){if(("undefined"==typeof Reflect?"undefined":(0,l._)(Reflect))==="object"&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}var L=function(e){function t(){for(var e,r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return(0,i._)(this,t),(e=(0,n._)(this,t,(0,s._)(o))).defaultState={isSearchPersonalized:!0,isFeedPersonalized:!0,isSearchConfigInitialized:!1,isFeedConfigInitialized:!1,isManageModalOpen:!1,isExplanationModalOpen:!1,isShowingToast:!1},e}(0,o._)(t,e);var r=t.prototype;return r.setIsShowingToast=function(e,t){(0,k.nH)().setIsShowingToast(t)},r.setIsManageModalOpen=function(e,t){(0,k.nH)().setIsManageModalOpen(t)},r.setIsExplanationModalOpen=function(e,t){(0,k.nH)().setIsExplanationModalOpen(t)},r.setIsSearchPersonalized=function(e,t){(0,k.nH)().setIsSearchPersonalized(t)},r.setIsFeedPersonalized=function(e,t){(0,k.nH)().setIsFeedPersonalized(t)},r.setSearchConfigInitialized=function(e,t){(0,k.nH)().setSearchConfigInitialized(t)},r.setFeedConfigInitialized=function(e,t){(0,k.nH)().setFeedConfigInitialized(t)},r.staticInit=function(e,t){(0,k.nH)().init(t)},r.init=function(e){var t=this;return e.pipe((0,p.E)(this.state$),(0,_.p)(function(e){var r=(0,a._)(e,2),n=r[0].isFeed,i=r[1],o=i.isSearchConfigInitialized,s=i.isFeedConfigInitialized;return o&&!n||s&&n?d.w:(0,u.H)((0,k.nH)().init({isFeed:n})).pipe((0,v.Z)(function(){return(0,c.of)(t.noop())}),(0,f.q)(t.terminate("init")))}))},t}(m.E);L.jotaiAtom=k.WH,b([(0,g.h5)(),w("design:type",Function),w("design:paramtypes",["undefined"==typeof PersonalizationState?Object:PersonalizationState,Boolean]),w("design:returntype",void 0)],L.prototype,"setIsShowingToast",null),b([(0,g.h5)(),w("design:type",Function),w("design:paramtypes",["undefined"==typeof PersonalizationState?Object:PersonalizationState,Boolean]),w("design:returntype",void 0)],L.prototype,"setIsManageModalOpen",null),b([(0,g.h5)(),w("design:type",Function),w("design:paramtypes",["undefined"==typeof PersonalizationState?Object:PersonalizationState,Boolean]),w("design:returntype",void 0)],L.prototype,"setIsExplanationModalOpen",null),b([(0,g.h5)(),w("design:type",Function),w("design:paramtypes",["undefined"==typeof PersonalizationState?Object:PersonalizationState,Boolean]),w("design:returntype",void 0)],L.prototype,"setIsSearchPersonalized",null),b([(0,g.h5)(),w("design:type",Function),w("design:paramtypes",["undefined"==typeof PersonalizationState?Object:PersonalizationState,Boolean]),w("design:returntype",void 0)],L.prototype,"setIsFeedPersonalized",null),b([(0,g.h5)(),w("design:type",Function),w("design:paramtypes",["undefined"==typeof PersonalizationState?Object:PersonalizationState,Boolean]),w("design:returntype",void 0)],L.prototype,"setSearchConfigInitialized",null),b([(0,g.h5)(),w("design:type",Function),w("design:paramtypes",["undefined"==typeof PersonalizationState?Object:PersonalizationState,Boolean]),w("design:returntype",void 0)],L.prototype,"setFeedConfigInitialized",null),b([(0,g.h5)(),w("design:type",Function),w("design:paramtypes",["undefined"==typeof PersonalizationState?Object:PersonalizationState,Object]),w("design:returntype",void 0)],L.prototype,"staticInit",null),b([(0,g.Mj)(),w("design:type",Function),w("design:paramtypes",[void 0===h.c?Object:h.c]),w("design:returntype",void 0)],L.prototype,"init",null),L=b([(0,S.nV)("SearchPersonalization")],L),k.WH.__SIGI_MODULE__=L,(0,y.y)(L)},69517:function(e,t,r){r.d(t,{bD:function(){return ep},tq:function(){return eS},I4:function(){return ev},Fy:function(){return e_},k4:function(){return eh}});var n,i,o,a,s,l,d=r(79066),u=r(48748),c=r(95170),h=r(35383),p=r(7120),_=r(5377),v=r(45996),f=r(16327),y=r(6586),g=r(54333),S=r(79262),m=r(72516),k=r(23999),b=r(63700),w=r(19293),L=r(24451),O=r(62564),P=r(72916),M=r(68710),j=r(74690),A=r(80339),C=r(76435),T=r(95719),V=r(20259),I=r(78990),x=r(82379),E=r(95092),R=r(2999),z=r(97050),G=r(2475),F=r(3595),U=r(38794),$=r(39154),q=r(17231),D=r(66868),X=r(77417),H=r(42963),Z=r(25872),B=r(67500),N=r(89134),W=r(71952),J=r(16020),K=r(49065),Q=r(85443),Y=r(95952),ee=r(49339),et=r(53535),er=((n={}).SearchTop="search_top",n.SearchVideo="search_video",n.SearchLive="search_live",n),en=r(80151),ei=r(26273),eo=r(5462),ea=r(58394),es=r(30401),el=r(70143),ed=r(24616);function eu(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if(("undefined"==typeof Reflect?"undefined":(0,S._)(Reflect))==="object"&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a}function ec(e,t){if(("undefined"==typeof Reflect?"undefined":(0,S._)(Reflect))==="object"&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}var eh=((i={})[i.NetworkError=-1]="NetworkError",i[i.NoResultText=10]="NoResultText",i[i.SelfHarmText=11]="SelfHarmText",i[i.HateSexualizationText=12]="HateSexualizationText",i[i.Guide=13]="Guide",i),ep=((o={}).ShowWithButton="show_with_button",o.ShowDirectly="show_directly",o.NoResult="no_results",o),e_={keyword:"",error:null,loading:!0,hasMore:!0,cursor:0,items:[],preloadList:[],searchPrecheck:null},ev={keyword:"",error:null,loading:!0,hasMore:!0,totalLength:0,isGoToHashtag:!1,cursor:0,data:{videoList:[],otherDataList:[]},preloadList:[],searchPrecheck:null},ef={rootEnterFrom:void 0,preSearchId:void 0},ey=(s={},(0,h._)(s,z.gA.Video,function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2],t.totalLength++,t.data.videoList=(0,g._)(t.data.videoList).concat([null!=(s=null==(r=e.item)?void 0:r.id)?s:""]);var r,n,i,o,a,s,l,d,u,c={id:null!=(l=null==(i=e.item)||null==(n=i.video)?void 0:n.id)?l:"",url:null!=(d=null==(a=e.item)||null==(o=a.video)?void 0:o.playAddr)?d:""};t.preloadList=(0,g._)(null!=(u=t.preloadList)?u:[]).concat([c])}),(0,h._)(s,z.gA.Users,function(e,t){var r,n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=t.data.videoList.length,a={type:e.type,items:null==(r=e.user_list)?void 0:r.map(function(e){var r,n=e.user_info;return t.totalLength++,null!=(r=n.unique_id)?r:""}),position:i||o%6==0?o:6*Math.ceil(o/6),hasMore:null!=(n=e.view_more)&&n,common:e.common};t.data.otherDataList=(0,g._)(t.data.otherDataList).concat([a])}),(0,h._)(s,z.gA.UserLive,function(e,t){var r,n,i,o,a,s,l,d,u,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],h=t.data.videoList.length;t.totalLength++;var p={type:e.type,items:[null!=(s=null==(r=e.user_live)?void 0:r.user_info.user_info.unique_id)?s:""],lives:[null!=(l=null==(i=e.user_live)||null==(n=i.live_info)?void 0:n.id_str)?l:""],position:c||h%6==0?h:6*Math.ceil(h/6),hasMore:null!=(d=e.view_more)&&d,common:e.common,teaParams:{search_result_id:null!=(u=null==(a=e.user_live)||null==(o=a.user_info)?void 0:o.user_info.uid)?u:""}};t.data.otherDataList=(0,g._)(t.data.otherDataList).concat([p])}),(0,h._)(s,z.gA.Lives,function(e,t){var r,n,i,o,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=t.data.videoList.length;t.totalLength++;var l={type:e.type,lives:null==(r=e.live_collection)?void 0:r.map(function(e){return e.id_str}),position:a||s%6==0?s:6*Math.ceil(s/6),hasMore:null!=(i=e.view_more)&&i,common:e.common,teaParams:{search_result_id:null!=(o=null==(n=e.common)?void 0:n.doc_id_str)?o:""}};t.data.otherDataList=(0,g._)(t.data.otherDataList).concat([l])}),s),eg=(l={},(0,h._)(l,z.gA.Video,function(e,t,r){var n,i,o,a=t.enter_from,s=t.totalLength,l=t.count,d=t.impr_id,u=t.videoCount,c=t.videoStart;U.$G.handleSearchVideoImpression((0,v._)((0,_._)({},r),{enter_from:a,rank:c+u,item_rank:s+l,group_id:null==(n=e.item)?void 0:n.id,author_id:null==(o=e.item)||null==(i=o.author)?void 0:i.id,impr_id:d})),t.count++,t.videoCount++}),(0,h._)(l,z.gA.Users,function(e,t,r){var n,i=t.enter_from,o=t.userStart,a=t.userCount,s=t.totalLength,l=t.count,d=t.impr_id;return null==(n=e.user_list)||n.forEach(function(e){var n,u=(0,v._)((0,_._)({},r),{search_result_id:e.user_info.uid});U.$G.handleSearchImpression((0,_._)({enter_from:i,rank:o+a,item_rank:s+l,impr_id:d},u));var c=null!=(n=e.user_info.room_id_str)?n:String(e.user_info.room_id);Number(c)&&$.lu.handleLiveShow((0,_._)({room_id:c,anchor_id:e.user_info.uid,action_type:$.zT.Click,enter_from_merge:$.Se.General,enter_method:$.Mm.OthersPhoto},u)),t.count++,t.userCount++}),t}),(0,h._)(l,z.gA.Lives,function(e,t,r){var n,i,o,a=t.enter_from,s=(0,v._)((0,_._)({},r),{search_result_id:null!=(o=null==(n=e.common)?void 0:n.doc_id_str)?o:"",enter_from:a,token_type:U.ks.LiveCard,is_aladdin:1,rank:0});U.$G.handleSearchImpression(s),null==(i=e.live_collection)||i.forEach(function(e,t){U.$G.handleSearchImpression((0,v._)((0,_._)({},s),{aladdin_words:e.title,aladdin_rank:t,list_result_type:"live",list_item_id:e.id_str,realtime_watch_user:e.user_count}))}),t.count++}),(0,h._)(l,z.gA.UserLive,function(e,t,r){var n,i,o,a,s,l=t.enter_from,d=t.impr_id,u=null!=(i=null==e?void 0:e.user_live)?i:{},c=u.user_info,h=u.live_info,p=(0,v._)((0,_._)({},r),{search_result_id:null!=(o=null==c?void 0:c.user_info.uid)?o:""}),f=(0,v._)((0,_._)({},p),{user_name:null==c||null==(n=c.user_info)?void 0:n.nickname,user_tag:"",enter_from:l,token_type:U.ks.HotUser,is_aladdin:1,rank:0});U.$G.handleSearchImpression((0,v._)((0,_._)({},f),{impr_id:d})),U.$G.handleSearchImpression((0,v._)((0,_._)({},f),{list_result_type:"live",list_item_id:null!=(a=null==h?void 0:h.id_str)?a:""}));var y=null==h?void 0:h.id_str;y&&$.lu.handleLiveShow((0,v._)((0,_._)({},p),{room_id:y,anchor_id:null!=(s=null==c?void 0:c.user_info.uid)?s:"",action_type:$.zT.Click,enter_from_merge:$.Se.General,enter_method:$.Mm.OthersPhoto})),t.count++}),l),eS=function(e){function t(e,r,n,i,o,a,s,l,d,p){var _,v;return(0,c._)(this,t),(_=(0,u._)(this,t)).service=e,_.user=r,_.seoModule=n,_.itemList=i,_.liveList=o,_.videoMask=a,_.bizContext=s,_.videoPlayerJotai=l,_.personalization=d,_.t=p,v={showTabs:!0},(0,h._)(v,U.nX.General,ev),(0,h._)(v,U.nX.User,e_),(0,h._)(v,U.nX.Video,e_),(0,h._)(v,U.nX.Live,e_),(0,h._)(v,U.nX.Photo,e_),(0,h._)(v,"searchReminderData",null),(0,h._)(v,"searchGlobalParams",ef),_.defaultState=v,_}(0,p._)(t,e);var r=t.prototype;return r.setSearchResult=function(e,t){var r=null!=t?t:{},n=r.key,i=r.result;e[n]=i},r.setSearchReminderData=function(e,t){e.searchReminderData=t.data},r.addSearchResult=function(e,t){var r,n,i,o,a,s=null!=t?t:{},l=s.key,d=s.result;if(!e[l])return e[l]=d,e;e[l]=(0,v._)((0,_._)({},e[l],d),{items:null==(n=e[l])||null==(r=n.items)?void 0:r.concat(d.items),preloadList:null==(o=e[l])||null==(i=o.preloadList)?void 0:i.concat(null!=(a=d.preloadList)?a:[])})},r.addTopSearchResult=function(e,t){var r,n,i="v0"!==(0,B.d)("search_page_redesign"),o=e.general;null==(r=t.data)||r.forEach(function(e){e.type&&ey[e.type](e,o,i)}),e.general=(0,v._)((0,_._)({},e.general),{hasMore:!!t.has_more,cursor:null!=(n=t.cursor)?n:0,data:(0,_._)({},o.data),rid:t.rid,preloadList:o.preloadList})},r.setSearchLoading=function(e,t){var r=null!=t?t:{},n=r.key,i=r.loading;e[n].loading=i},r.setIsGoToHashtag=function(e,t){var r=null!=t?t:{},n=r.key,i=r.isGoToHashtag;e[n].isGoToHashtag=i},r.setShowTabs=function(e,t){e.showTabs=t},r.setSearchGlobalParams=function(e,t){e.searchGlobalParams=(0,_._)({},e.searchGlobalParams,t)},r.setSearchPrecheck=function(e,t){var r=null!=t?t:{},n=r.key,i=r.value;e[n].searchPrecheck=i},r.setKeyword=function(e,t){var r=t.key,n=t.keyword;e[r].keyword=n},r.resetSearchResult=function(e){e.general=ev,e.user=e_,e.video=e_,e.live=e_,e.photo=e_},r.getTopSearch=function(e){var t=this;return e.pipe((0,L.E)(this.state$,this.videoMask.state$,this.bizContext.state$,this.personalization.state$,this.videoPlayerJotai.state$),(0,O.T)(function(e){var t=(0,y._)(e,6),r=t[0],n=t[1],i=t[2],o=t[3],a=t[4].isSearchPersonalized,s=t[5];return{query:r,state:n.general,videoMaskState:i,bizContextState:o,searchGlobalParams:n.searchGlobalParams,nonPersonalized:a?void 0:1,currentVideo:s.currentVideo}}),(0,P.n)(function(e){var r=e.query,n=r.teaParams,i=r.abTestVersion,o=r.user,a=r.language,s=r.hasSearchLive,l=e.state,d=e.state,u=d.cursor,c=d.data,h=d.rid,p=e.videoMaskState,y=e.searchGlobalParams,g=e.nonPersonalized,S=e.currentVideo,m=(0,f._)(e.query,["teaParams","abTestVersion","user","language","hasSearchLive"]),w=(0,k.of)({});if(m.keyword&&!(0,N.fU)()){var L,P=(0,ee.MpA)().searchItemListCount;w=t.service.getTopSearch((0,v._)((0,_._)({},m),{client_ab_versions:null!=(L=null==i?void 0:i.versionName)?L:"",count:null!=P?P:12,offset:u,search_id:h,web_search_code:t.getWebSearchCode(i),is_non_personalized_search:g}))}var T=Date.now();return w.pipe((0,O.T)(function(e){var t,r;return Object.assign(e,{data:null!=(r=null==(t=e.data)?void 0:t.map(function(e){var t,r,n,i,o,a;switch(e.type){case z.gA.UserLive:if(!s)return null;return Object.assign(e,{user_live:{live_info:JSON.parse(null!=(i=null==(r=e.user_live)||null==(t=r.live_info)?void 0:t.raw_data)?i:"{}"),user_info:null==(n=e.user_live)?void 0:n.user_info}});case z.gA.Lives:if(!s)return null;return Object.assign(e,{live_collection:null==(a=e.live_collection)||null==(o=a.live_list)?void 0:o.map(function(e){var t=e.raw_data;return JSON.parse(void 0===t?"{}":t)})});case z.gA.Users:case z.gA.Video:return e;default:return null}}).filter(function(e){return!!e}))?r:[]})}),t.handleTopSearchReport({state:l,keyword:m.keyword,isSendSearch:0===u,teaParams:n,requestStart:T,searchGlobalParams:y,groupId:null==S?void 0:S.id}),(0,M.Z)(function(e){var r,n,s,d,u,c,f=!1,y=null==e||null==(r=e.global_doodle_config)?void 0:r.forbid_search_type;(1===y||0===y&&(null==e||null==(n=e.data)?void 0:n.length)===0)&&(f=!0);var g=t.seoModule.setSearchSEOProps(e,{language:a},{pathname:F.OZ.searchHome,input_keyword:m.keyword}),S=e.has_more,w=e.data,L=void 0===w?[]:w,O=e.extra,P=e.search_nil_info,M=e.suicide_prevent,j=e.search_nil_text,A=e.status_code,C=e.log_pb,T=[W.s.Ok,W.s.SearchYoungCode,W.s.SearchSensitiveCode].includes(A)?W.s.Ok:A,V=(void 0===O?{}:O).logid,I=null!=(s=null!=h?h:V)?s:"",x=P&&[11,13].includes(null!=(d=P.text_type)?d:0);if(!L.length&&!S&&!x)return t.generateErrorState({search_nil_info:P,search_nil_text:j,suicide_prevent:M,state:l,key:U.nX.General,keyword:m.keyword,pathname:F.OZ.searchHome,action$s:[g]});var E=[],R=[],$={hasMore:!!S,statusCode:T,itemList:[],rid:I,log_pb:C},q={hasMore:!!S,statusCode:T,liveList:[],rid:I},D=null;x&&(D={type:null!=(u=null==P?void 0:P.text_type)?u:11,data:(0,v._)((0,_._)({},M),{et_search_id:I})}),L.forEach(function(e){switch(e.type){case z.gA.Video:$.itemList.push(e.item);break;case z.gA.Users:var r,n,i,o,a,s=(0,v._)((0,_._)({},e),{items:[]}),l=e.user_list;(void 0===l?[]:l).forEach(function(e){var r=e.user_info,n=void 0===r?{}:r,i=t.userConvertor(n,I,null==C?void 0:C.impr_id),o=i.user,a=i.stats,l=n.unique_id;E.push(o),R.push(a),s.items.push(void 0===l?"":l)});break;case z.gA.UserLive:if(null==(n=e.user_live)||null==(r=n.user_info)?void 0:r.user_info){var d=e.user_live.user_info.user_info,u=t.userConvertor(d,I,null==C?void 0:C.impr_id),c=u.user,h=u.stats;E.push(c),R.push(h)}(null==(o=e.user_live)||null==(i=o.live_info)?void 0:i.id_str)&&q.liveList.push(e.user_live.live_info);break;case z.gA.Lives:null==(a=e.live_collection)||a.forEach(function(e){e.id_str&&q.liveList.push(e)})}}),(null==o?void 0:o.photoSensitiveVideosSetting)!==G.ll.CLOSE&&(o||p.photoSensitiveVideosSetting!==G.ll.CLOSE)||(e.data=null==(c=e.data)?void 0:c.filter(function(e){var t;return e.type===z.gA.Users||(null==(t=e.item)?void 0:t.maskType)!==X.D.Photosensitive}));var Z=(0,k.of)(t.user.getActions().multiSetUser(E),t.user.getActions().multiSetUserStats(R),t.itemList.getActions().setList({response:$,key:H.Lz.SearchTop,abTestVersion:i,user:o,language:a}),t.liveList.getActions().setList({response:q,key:er.SearchTop,abTestVersion:i,user:o,language:a}),t.getActions().addTopSearchResult((0,v._)((0,_._)({},e),{rid:I})),t.getActions().setSearchPrecheck({key:U.nX.General,value:D}),t.getActions().setIsGoToHashtag({key:U.nX.General,isGoToHashtag:f}),t.getActions().setSearchGlobalParams({preSearchId:I}));return(0,b.h)(Z,g)}),t.catchError({isEmpty:!!(c.videoList.length||c.otherDataList.length),key:U.nX.General,keyword:m.keyword,state:l,teaParams:n,isSendSearch:0===u}),(0,j.Z)(t.getActions().setSearchLoading({key:U.nX.General,loading:!0}),t.getActions().setShowTabs(!0),t.getActions().setKeyword({key:U.nX.General,keyword:m.keyword})),(0,A.q)(t.getActions().setSearchLoading({key:U.nX.General,loading:!1}),t.terminate()),(0,C.Q)(t.getAction$().dispose))}))},r.getUserSearch=function(e){var t=this;return e.pipe((0,L.E)(this.state$,this.bizContext.state$,this.personalization.state$,this.videoPlayerJotai.state$),(0,O.T)(function(e){var t=(0,y._)(e,5),r=t[0],n=t[1],i=t[2],o=t[3].isSearchPersonalized,a=t[4];return{query:r,state:n.user,bizContextState:i,currentVideo:a.currentVideo,searchGlobalParams:n.searchGlobalParams,nonPersonalized:o?void 0:1}}),(0,P.n)(function(e){var r=e.query,n=r.teaParams,i=r.abTestVersion,o=r.language,a=(r.user,e.state),s=e.state,l=s.cursor,d=s.items,u=s.rid,c=e.searchGlobalParams,h=e.nonPersonalized,p=e.currentVideo,y=(0,f._)(e.query,["teaParams","abTestVersion","language","user"]),g=(0,k.of)({});y.keyword&&!(0,N.fU)()&&(g=t.service.getUserSearch((0,v._)((0,_._)({},y),{cursor:l,search_id:u,web_search_code:t.getWebSearchCode(i),is_non_personalized_search:h})));var S=Date.now();return g.pipe((0,T.M)(function(e){var t,r,i=e.user_list,o=void 0===i?[]:i,a=e.log_pb,s=e.extra,h=(null!=a?a:{}).impr_id,f=(null!=s?s:{}).logid,g=null!=(t=null!=u?u:f)?t:"";if(o.length){var m=d.length;o.forEach(function(e,t){U.$G.handleSearchImpression({search_type:U.nX.User,enter_from:q.x.SearchResult,rank:m+t,search_keyword:y.keyword,search_result_id:e.user_info.uid,impr_id:h,search_id:g});var r,n=null!=(r=e.user_info.room_id_str)?r:String(e.user_info.room_id);Number(n)&&$.lu.handleLiveShow({room_id:n,anchor_id:e.user_info.uid,action_type:$.zT.Click,enter_from_merge:$.Se.SearchUser,enter_method:$.Mm.OthersPhoto,search_type:U.nX.User,search_id:g,search_keyword:y.keyword,search_result_id:e.user_info.uid,rank:m+t,impr_id:h})})}else U.$G.handleSearchResultEmpty({search_keyword:y.keyword,impr_id:h,search_id:g});0===l&&n&&U.$G.handleSearch((0,v._)((0,_._)({},n),{search_id:g,search_keyword:y.keyword,impr_id:h,duration:Date.now()-S,pre_search_id:c.preSearchId,group_id:null!=(r=null==p?void 0:p.id)?r:void 0}))}),(0,M.Z)(function(e){var r,n,i,s=t.seoModule.setSearchSEOProps(e,{language:o},{pathname:F.OZ.searchUser,input_keyword:y.keyword}),l=e.has_more,d=e.cursor,c=e.user_list,h=void 0===c?[]:c,p=e.extra,f=e.search_nil_info,g=e.suicide_prevent,S=e.search_nil_text,m=e.log_pb,w=null!=(r=null!=u?u:null==p?void 0:p.logid)?r:"",L=f&&[11,13].includes(null!=(n=f.text_type)?n:0),O=null,P=null;if(L&&(P={type:null!=(i=null==f?void 0:f.text_type)?i:11,data:(0,v._)((0,_._)({},g),{et_search_id:w})},O=(0,k.of)(t.getActions().setSearchPrecheck({key:U.nX.User,value:P}))),!h.length&&!l&&!L)return t.generateErrorState({res:e,search_nil_info:f,search_nil_text:S,suicide_prevent:g,state:a,key:U.nX.User,keyword:y.keyword,pathname:F.OZ.searchUser,action$s:[s]});if(h.length){var M=[],j=[],A=h.map(function(e){var r=e.user_info,n=t.userConvertor(r,w,null==m?void 0:m.impr_id),i=n.user,o=n.stats;return M.push(i),j.push(o),i.uniqueId}),C=(0,k.of)(t.user.getActions().multiSetUser(M),t.user.getActions().multiSetUserStats(j),t.getActions().addSearchResult({key:U.nX.User,result:{hasMore:!!l,keyword:y.keyword,cursor:d,error:null,items:A,loading:!1,rid:w,preloadList:[]}}),t.getActions().setSearchGlobalParams({preSearchId:w}));return O?(0,b.h)(s,C,O):(0,b.h)(s,C)}return O?(0,b.h)(s,O):s}),t.catchError({isEmpty:!!d.length,key:U.nX.User,keyword:y.keyword,state:a,teaParams:n,isSendSearch:0===l}),(0,j.Z)(t.getActions().setSearchLoading({key:U.nX.User,loading:!0}),t.getActions().setShowTabs(!0),t.getActions().setKeyword({key:U.nX.User,keyword:y.keyword})),(0,A.q)(t.getActions().setSearchLoading({key:U.nX.User,loading:!1}),t.terminate()),(0,C.Q)(t.getAction$().dispose))}))},r.getVideoSearch=function(e){var t=this;return e.pipe((0,L.E)(this.state$,this.videoMask.state$,this.bizContext.state$,this.personalization.state$,this.videoPlayerJotai.state$),(0,O.T)(function(e){var t=(0,y._)(e,6),r=t[0],n=t[1],i=t[2],o=t[3],a=t[4].isSearchPersonalized,s=t[5];return{query:r,state:n.video,searchGlobalParams:n.searchGlobalParams,videoMaskState:i,bizContextState:o,nonPersonalized:a?void 0:1,currentVideo:s.currentVideo}}),(0,P.n)(function(e){var r=e.query,n=r.teaParams,i=r.abTestVersion,o=r.language,a=r.user,s=r.filterId,l=e.state,d=e.state,u=d.cursor,c=d.items,h=d.rid,p=e.videoMaskState,y=e.searchGlobalParams,g=e.currentVideo,S=e.nonPersonalized,m=(0,f._)(e.query,["teaParams","abTestVersion","language","user","filterId"]),w=(0,k.of)({});if(m.keyword&&!(0,N.fU)()){var L=(0,ee.MpA)().searchItemListCount;w=t.service.getVideoSearch((0,v._)((0,_._)({},m),{count:null!=L?L:12,offset:u,search_id:h,web_search_code:t.getWebSearchCode(i),is_non_personalized_search:S}))}var O=Date.now();return w.pipe((0,T.M)(function(e){var t,r,i=e.item_list,o=void 0===i?[]:i,a=e.log_pb,s=e.extra,l=null!=(t=null!=h?h:null==s?void 0:s.logid)?t:"";if(o.length){var d=c.length;o.forEach(function(e,t){var r;U.$G.handleSearchVideoImpression({search_type:U.nX.Video,enter_from:q.x.SearchResult,group_id:null==e?void 0:e.id,author_id:null==e||null==(r=e.author)?void 0:r.id,rank:d+t,search_keyword:m.keyword,impr_id:null==a?void 0:a.impr_id,search_id:l})})}else U.$G.handleSearchResultEmpty({search_keyword:m.keyword,impr_id:null==a?void 0:a.impr_id,search_id:l});0===u&&n&&U.$G.handleSearch((0,v._)((0,_._)({},n),{search_id:l,search_keyword:m.keyword,impr_id:null==a?void 0:a.impr_id,duration:Date.now()-O,pre_search_id:y.preSearchId,group_id:null!=(r=null==g?void 0:g.id)?r:void 0}))}),(0,M.Z)(function(e){var r,n,d,u,c,f=t.seoModule.setSearchSEOProps(e,{language:o},{pathname:F.OZ.searchVideo,input_keyword:m.keyword}),y=e.has_more,g=e.cursor,S=e.item_list,w=void 0===S?[]:S,L=e.extra,O=e.search_nil_info,P=e.suicide_prevent,M=e.search_nil_text,j=e.status_code,A=e.log_pb,C=[W.s.Ok,W.s.SearchYoungCode,W.s.SearchSensitiveCode].includes(j)?W.s.Ok:j,T=O&&[11,13].includes(null!=(r=O.text_type)?r:0),V=null!=(n=null!=h?h:null==L?void 0:L.logid)?n:"";if(!w.length&&!y&&!T)return t.generateErrorState({search_nil_info:O,search_nil_text:M,suicide_prevent:P,state:l,key:U.nX.Video,keyword:m.keyword,pathname:F.OZ.searchVideo,action$s:[f]});var I=[],x=w.filter(function(e){return e.id!==s});I=(null==a?void 0:a.photoSensitiveVideosSetting)!==G.ll.CLOSE&&(a||p.photoSensitiveVideosSetting!==G.ll.CLOSE)?x.map(function(e){return e.id}):x.filter(function(e){return(null==e?void 0:e.maskType)!==X.D.Photosensitive}).map(function(e){return e.id});var E=null!=(d=x.map(function(e){var t=e.video,r=t.id,n=t.playAddr;return{id:r,url:void 0===n?"":n}}))?d:[],R=null;T&&(R={type:null!=(u=null==O?void 0:O.text_type)?u:11,data:(0,v._)((0,_._)({},P),{et_search_id:null!=(c=null==L?void 0:L.logid)?c:""})});var z=(0,k.of)(t.itemList.getActions().setList({response:{itemList:x,hasMore:!!y,statusCode:C,log_pb:A},key:H.Lz.SearchVideo,abTestVersion:i,language:o,user:a}),t.getActions().addSearchResult({key:U.nX.Video,result:{hasMore:!!y,keyword:m.keyword,cursor:null!=g?g:0,error:null,items:I,loading:!1,rid:null!=h?h:null==L?void 0:L.logid,preloadList:E}}),t.getActions().setSearchPrecheck({key:U.nX.Video,value:R}),t.getActions().setSearchGlobalParams({preSearchId:V}));return(0,b.h)(z,f)}),t.catchError({isEmpty:!!c.length,state:l,keyword:m.keyword,teaParams:n,key:U.nX.Video,isSendSearch:0===u}),(0,j.Z)(t.getActions().setSearchLoading({key:U.nX.Video,loading:!0}),t.getActions().setShowTabs(!0),t.getActions().setKeyword({key:U.nX.Video,keyword:m.keyword})),(0,A.q)(t.getActions().setSearchLoading({key:U.nX.Video,loading:!1}),t.terminate()),(0,C.Q)(t.getAction$().dispose))}))},r.getPhotoSearch=function(e){var t=this;return e.pipe((0,L.E)(this.state$,this.videoMask.state$,this.bizContext.state$,this.personalization.state$,this.videoPlayerJotai.state$),(0,O.T)(function(e){var t=(0,y._)(e,6),r=t[0],n=t[1],i=t[2],o=t[3],a=t[4].isSearchPersonalized,s=t[5];return{query:r,state:n.photo,searchGlobalParams:n.searchGlobalParams,videoMaskState:i,bizContextState:o,nonPersonalized:a?void 0:1,currentVideo:s.currentVideo}}),(0,P.n)(function(e){var r=e.query,n=r.teaParams,i=r.abTestVersion,o=r.language,a=r.user,s=r.filterId,l=e.state,d=e.state,u=d.cursor,c=d.items,h=d.rid,p=e.videoMaskState,y=e.searchGlobalParams,g=e.currentVideo,S=e.nonPersonalized,m=(0,f._)(e.query,["teaParams","abTestVersion","language","user","filterId"]),w=(0,k.of)({});if(m.keyword&&!(0,N.fU)()){var L,O=(0,ee.MpA)().searchItemListCount;w=t.service.getPhotoSearch((0,v._)((0,_._)({},m),{count:null!=O?O:12,offset:u,search_id:h,web_search_code:t.getWebSearchCode(i),is_non_personalized_search:S,client_ab_versions:null!=(L=null==i?void 0:i.versionName)?L:""}))}var P=Date.now();return w.pipe((0,T.M)(function(e){var t,r,i=e.item_list,o=void 0===i?[]:i,a=e.log_pb,s=e.extra,l=null!=(t=null!=h?h:null==s?void 0:s.logid)?t:"";if(o.length){var d=c.length;o.forEach(function(e,t){var r;U.$G.handleSearchVideoImpression({search_type:U.nX.Photo,enter_from:q.x.SearchResult,group_id:null==e?void 0:e.id,author_id:null==e||null==(r=e.author)?void 0:r.id,rank:d+t,search_keyword:m.keyword,impr_id:null==a?void 0:a.impr_id,search_id:l})})}else U.$G.handleSearchResultEmpty({search_keyword:m.keyword,impr_id:null==a?void 0:a.impr_id,search_id:l});0===u&&n&&U.$G.handleSearch((0,v._)((0,_._)({},n),{search_id:l,search_keyword:m.keyword,impr_id:null==a?void 0:a.impr_id,duration:Date.now()-P,pre_search_id:y.preSearchId,group_id:null!=(r=null==g?void 0:g.id)?r:void 0}))}),(0,M.Z)(function(e){var r,n,d,u,c=t.seoModule.setSearchSEOProps(e,{language:o},{pathname:F.OZ.searchPhoto,input_keyword:m.keyword}),f=e.has_more,y=e.cursor,g=e.item_list,S=void 0===g?[]:g,w=e.extra,L=e.search_nil_info,O=e.suicide_prevent,P=e.search_nil_text,M=e.status_code,j=e.log_pb,A=[W.s.Ok,W.s.SearchYoungCode,W.s.SearchSensitiveCode].includes(M)?W.s.Ok:M,C=L&&[11,13].includes(null!=(r=L.text_type)?r:0),T=null!=(n=null!=h?h:null==w?void 0:w.logid)?n:"";if(!S.length&&!f&&!C)return t.generateErrorState({search_nil_info:L,search_nil_text:P,suicide_prevent:O,state:l,key:U.nX.Photo,keyword:m.keyword,pathname:F.OZ.searchPhoto,action$s:[c]});var V=[],I=S.filter(function(e){return e.id!==s});V=(null==a?void 0:a.photoSensitiveVideosSetting)!==G.ll.CLOSE&&(a||p.photoSensitiveVideosSetting!==G.ll.CLOSE)?I.map(function(e){return e.id}):I.filter(function(e){return(null==e?void 0:e.maskType)!==X.D.Photosensitive}).map(function(e){return e.id});var x=null;C&&(x={type:null!=(d=null==L?void 0:L.text_type)?d:11,data:(0,v._)((0,_._)({},O),{et_search_id:null!=(u=null==w?void 0:w.logid)?u:""})});var E=(0,k.of)(t.itemList.getActions().setList({response:{itemList:I,hasMore:!!f,statusCode:A,log_pb:j},key:H.Lz.SearchPhoto,abTestVersion:i,language:o,user:a}),t.getActions().addSearchResult({key:U.nX.Photo,result:{hasMore:!!f,keyword:m.keyword,cursor:null!=y?y:0,error:null,items:V,loading:!1,rid:null!=h?h:null==w?void 0:w.logid}}),t.getActions().setSearchPrecheck({key:U.nX.Photo,value:x}),t.getActions().setSearchGlobalParams({preSearchId:T}));return(0,b.h)(E,c)}),t.catchError({isEmpty:!!c.length,state:l,keyword:m.keyword,teaParams:n,key:U.nX.Photo,isSendSearch:0===u}),(0,j.Z)(t.getActions().setSearchLoading({key:U.nX.Photo,loading:!0}),t.getActions().setShowTabs(!0),t.getActions().setKeyword({key:U.nX.Photo,keyword:m.keyword})),(0,A.q)(t.getActions().setSearchLoading({key:U.nX.Photo,loading:!1}),t.terminate()),(0,C.Q)(t.getAction$().dispose))}))},r.getLiveSearch=function(e){var t=this;return e.pipe((0,L.E)(this.state$,this.bizContext.state$,this.personalization.state$,this.videoPlayerJotai.state$),(0,O.T)(function(e){var t=(0,y._)(e,5),r=t[0],n=t[1],i=t[2],o=t[3].isSearchPersonalized,a=t[4];return{query:r,state:n.live,searchGlobalParams:n.searchGlobalParams,bizContextState:i,nonPersonalized:o?void 0:1,currentVideo:a.currentVideo}}),(0,P.n)(function(e){var r=e.query,n=r.teaParams,i=r.abTestVersion,o=r.language,a=r.user,s=e.state,l=e.state,d=l.cursor,u=l.items,c=l.rid,h=e.searchGlobalParams,p=e.currentVideo,y=e.nonPersonalized,g=(0,f._)(e.query,["teaParams","abTestVersion","language","user"]),S=(0,k.of)({});if(g.keyword&&!(0,N.fU)()){var m=(0,ee.MpA)().searchItemListCount;S=t.service.getLiveSearch((0,v._)((0,_._)({},g),{count:null!=m?m:12,offset:d,search_id:c,web_search_code:t.getWebSearchCode(i),is_non_personalized_search:y}))}var w=Date.now();return S.pipe((0,O.T)(function(e){var t;return(0,v._)((0,_._)({},e),{data:null==(t=e.data)?void 0:t.map(function(e){var t,r;return JSON.parse(null!=(r=null==(t=e.live_info)?void 0:t.raw_data)?r:"{}")})})})).pipe((0,T.M)(function(e){var t,r,i=e.data,o=void 0===i?[]:i,a=e.log_pb,s=e.extra,l=null!=(t=null!=c?c:null==s?void 0:s.logid)?t:"";if(o.length){var f=u.length;o.forEach(function(e,t){var r=e.user_count,n=void 0===r?0:r,i=e.like_count,o=void 0===i?0:i,s=e.id_str,d=n<=50&&o>n;U.$G.handleSearchImpression({search_id:l,search_result_id:s,enter_from:q.x.SearchResult,search_keyword:g.keyword,token_type:U.ks.LiveCard,is_aladdin:0,rank:f+t,result_source:"search",room_tag:"",like_number:d?o:"",realtime_watch_user:d?"":n,search_type:U.nX.Live,impr_id:null==a?void 0:a.impr_id})})}else U.$G.handleSearchResultEmpty({search_keyword:g.keyword,impr_id:null==a?void 0:a.impr_id,search_id:l});0===d&&n&&U.$G.handleSearch((0,v._)((0,_._)({},n),{search_id:l,search_keyword:g.keyword,impr_id:null==a?void 0:a.impr_id,duration:Date.now()-w,pre_search_id:h.preSearchId,group_id:null!=(r=null==p?void 0:p.id)?r:void 0}))}),(0,M.Z)(function(e){var r,n,l,d,u=t.seoModule.setSearchSEOProps(e,{language:o},{pathname:F.OZ.searchLive,input_keyword:g.keyword}),h=e.has_more,p=e.cursor,f=e.data,y=void 0===f?[]:f,S=e.extra,m=e.search_nil_info,w=e.suicide_prevent,L=e.search_nil_text,O=e.status_code,P=[W.s.Ok,W.s.SearchYoungCode,W.s.SearchSensitiveCode].includes(O)?W.s.Ok:O,M=m&&[11,13].includes(null!=(r=m.text_type)?r:0),j=null!=(n=null!=c?c:null==S?void 0:S.logid)?n:"";if(!y.length&&!h&&!M)return t.generateErrorState({search_nil_info:m,search_nil_text:L,suicide_prevent:w,state:s,key:U.nX.Live,keyword:g.keyword,pathname:F.OZ.searchLive,action$s:[u]});var A=null;M&&(A={type:null!=(l=null==m?void 0:m.text_type)?l:11,data:(0,v._)((0,_._)({},w),{et_search_id:null!=(d=null==S?void 0:S.logid)?d:""})});var C=(0,k.of)(t.liveList.getActions().setList({response:{liveList:y,hasMore:!!h,statusCode:P},key:er.SearchLive,abTestVersion:i,language:o,user:a}),t.getActions().addSearchResult({key:U.nX.Live,result:{hasMore:!!h,keyword:g.keyword,cursor:null!=p?p:0,error:null,items:y.map(function(e){return e.id_str}),loading:!1,rid:null!=c?c:null==S?void 0:S.logid}}),t.getActions().setSearchPrecheck({key:U.nX.Live,value:A}),t.getActions().setSearchGlobalParams({preSearchId:j}));return(0,b.h)(C,u)}),t.catchError({isEmpty:!!u.length,state:s,keyword:g.keyword,teaParams:n,key:U.nX.Video,isSendSearch:0===d}),(0,j.Z)(t.getActions().setSearchLoading({key:U.nX.Live,loading:!0}),t.getActions().setShowTabs(!0),t.getActions().setKeyword({key:U.nX.Live,keyword:g.keyword})),(0,A.q)(t.getActions().setSearchLoading({key:U.nX.Live,loading:!1}),t.terminate()),(0,C.Q)(t.getAction$().dispose))}))},r.handleTopSearchReport=function(e){var t=e.state,r=t.data,n=t.totalLength,i=t.rid,o=e.isSendSearch,a=e.teaParams,s=e.keyword,l=e.requestStart,d=e.searchGlobalParams,u=e.groupId;return(0,T.M)(function(e){var t,c=e.data,h=void 0===c?[]:c,p=e.log_pb,f=e.extra,y=(void 0===f?{}:f).logid,g=null!=(t=null!=i?i:y)?t:"",S=(null!=p?p:{}).impr_id;if(h.length){var m=r.videoList.length,k=n-r.videoList.length,b={enter_from:q.x.GeneralSearch,userStart:k,totalLength:n,keyword:s,impr_id:S,searchId:g,videoStart:m,count:0,userCount:0,videoCount:0},w={search_type:U.nX.General,search_id:g,search_keyword:s};h.forEach(function(e){var t,r;null==(t=eg[null!=(r=null==e?void 0:e.type)?r:""])||t.call(eg,e,b,w)})}else U.$G.handleSearchResultEmpty({search_keyword:s,impr_id:S,search_id:g});o&&a&&U.$G.handleSearch((0,v._)((0,_._)({},a),{search_id:g,search_keyword:s,impr_id:S,duration:Date.now()-l,pre_search_id:d.preSearchId,group_id:null!=u?u:void 0}))})},r.catchError=function(e){var t=this,r=e.isEmpty,n=e.teaParams,i=e.keyword,o=e.key,a=e.state,s=e.isSendSearch;return(0,V.W)(function(){return r?(D.F.open({content:t.t("server_error_title"),duration:3,widthType:"half"}),(0,k.of)(t.noop())):(s&&n&&U.$G.handleSearch((0,v._)((0,_._)({},n),{search_id:"",search_keyword:i})),(0,k.of)(t.getActions().setSearchResult({key:o,result:(0,v._)((0,_._)({},a),{keyword:i,error:{type:-1}})})))})},r.generateErrorState=function(e){var t=e.search_nil_info,r=e.search_nil_text,n=e.state,i=e.key,o=e.keyword,a=e.action$s,s=(null!=t?t:{text_type:10}).text_type,l={type:s||10};12===s&&(l.extra=r);var d=(0,k.of)(this.getActions().setSearchResult({key:i,result:(0,v._)((0,_._)({},n),{keyword:o,error:l})}));return b.h.apply(void 0,[d].concat((0,g._)(void 0===a?[]:a)))},r.userConvertor=function(e,t,r){var n;return{user:(0,Z.bg)(e,{search_id:t,impr_id:r}),stats:{uniqueId:null!=(n=e.unique_id)?n:"",stats:(0,et.sg)(e,!0)}}},r.getWebSearchCode=function(e){var t,r,n=(null!=e?e:{}).parameters,i=void 0===n?{}:n,o=i.search_add_live,a=i.search_server,s={tiktok:{client_params_x:{search_engine:{}},search_server:{}}};return(null==o?void 0:o.vid)==="v2"&&(s.tiktok.client_params_x.search_engine.ies_mt_user_live_video_card_use_libra=1,s.tiktok.client_params_x.search_engine.mt_search_general_user_live_card=1),Object.keys(null!=(t=null==a?void 0:a.vid)?t:{}).length>0&&(s.tiktok.search_server=null!=(r=null==a?void 0:a.vid)?r:{}),JSON.stringify(s)},t}(I.E);eu([(0,x.uk)(),ec("design:type",void 0===w.c?Object:w.c)],eS.prototype,"dispose",void 0),eu([(0,x.h5)(),ec("design:type",Function),ec("design:paramtypes",["undefined"==typeof SearchModuleState?Object:SearchModuleState,Object]),ec("design:returntype",void 0)],eS.prototype,"setSearchResult",null),eu([(0,x.h5)(),ec("design:type",Function),ec("design:paramtypes",["undefined"==typeof SearchModuleState?Object:SearchModuleState,Object]),ec("design:returntype",void 0)],eS.prototype,"setSearchReminderData",null),eu([(0,x.h5)(),ec("design:type",Function),ec("design:paramtypes",["undefined"==typeof SearchModuleState?Object:SearchModuleState,Object]),ec("design:returntype",void 0)],eS.prototype,"addSearchResult",null),eu([(0,x.h5)(),ec("design:type",Function),ec("design:paramtypes",["undefined"==typeof SearchModuleState?Object:SearchModuleState,Object]),ec("design:returntype",void 0)],eS.prototype,"addTopSearchResult",null),eu([(0,x.h5)(),ec("design:type",Function),ec("design:paramtypes",["undefined"==typeof SearchModuleState?Object:SearchModuleState,Object]),ec("design:returntype",void 0)],eS.prototype,"setSearchLoading",null),eu([(0,x.h5)(),ec("design:type",Function),ec("design:paramtypes",["undefined"==typeof SearchModuleState?Object:SearchModuleState,Object]),ec("design:returntype",void 0)],eS.prototype,"setIsGoToHashtag",null),eu([(0,x.h5)(),ec("design:type",Function),ec("design:paramtypes",["undefined"==typeof SearchModuleState?Object:SearchModuleState,Boolean]),ec("design:returntype",void 0)],eS.prototype,"setShowTabs",null),eu([(0,x.h5)(),ec("design:type",Function),ec("design:paramtypes",["undefined"==typeof SearchModuleState?Object:SearchModuleState,"undefined"==typeof Partial?Object:Partial]),ec("design:returntype",void 0)],eS.prototype,"setSearchGlobalParams",null),eu([(0,x.h5)(),ec("design:type",Function),ec("design:paramtypes",["undefined"==typeof SearchModuleState?Object:SearchModuleState,Object]),ec("design:returntype",void 0)],eS.prototype,"setSearchPrecheck",null),eu([(0,x.h5)(),ec("design:type",Function),ec("design:paramtypes",["undefined"==typeof SearchModuleState?Object:SearchModuleState,Object]),ec("design:returntype",void 0)],eS.prototype,"setKeyword",null),eu([(0,x.h5)(),ec("design:type",Function),ec("design:paramtypes",["undefined"==typeof SearchModuleState?Object:SearchModuleState]),ec("design:returntype",void 0)],eS.prototype,"resetSearchResult",null),eu([(0,x.Mj)({payloadGetter:(0,Y.i)([F.OZ.searchHome],function(e){return(0,d._)(function(){var t,r,n,i,o,a;return(0,m.__generator)(this,function(s){switch(s.label){case 0:return[4,e.service.baseContext.getBaseContext()];case 1:return n=(r=s.sent()).abTestVersion,i=r.language,o=r.user,[2,{keyword:null!=(a=null==(t=e.request.query)?void 0:t.q)?a:"",abTestVersion:n,language:i,user:o}]}})})()}),skipFirstClientDispatch:!1}),ec("design:type",Function),ec("design:paramtypes",[void 0===w.c?Object:w.c]),ec("design:returntype",void 0)],eS.prototype,"getTopSearch",null),eu([(0,x.Mj)({payloadGetter:(0,Y.i)([F.OZ.searchUser],function(e){return(0,d._)(function(){var t,r,n,i,o,a;return(0,m.__generator)(this,function(s){switch(s.label){case 0:return[4,e.service.baseContext.getBaseContext()];case 1:return n=(r=s.sent()).abTestVersion,i=r.language,o=r.user,[2,{keyword:null!=(a=null==(t=e.request.query)?void 0:t.q)?a:"",abTestVersion:n,language:i,user:o}]}})})()}),skipFirstClientDispatch:!1}),ec("design:type",Function),ec("design:paramtypes",[void 0===w.c?Object:w.c]),ec("design:returntype",void 0)],eS.prototype,"getUserSearch",null),eu([(0,x.Mj)({payloadGetter:(0,Y.i)([F.OZ.searchVideo],function(e){return(0,d._)(function(){var t,r,n,i,o,a;return(0,m.__generator)(this,function(s){switch(s.label){case 0:return[4,e.service.baseContext.getBaseContext()];case 1:return n=(r=s.sent()).abTestVersion,i=r.language,o=r.user,[2,{keyword:null!=(a=null==(t=e.request.query)?void 0:t.q)?a:"",abTestVersion:n,language:i,user:o}]}})})()}),skipFirstClientDispatch:!1}),ec("design:type",Function),ec("design:paramtypes",[void 0===w.c?Object:w.c]),ec("design:returntype",void 0)],eS.prototype,"getVideoSearch",null),eu([(0,x.Mj)({payloadGetter:(0,Y.i)([F.OZ.searchPhoto],function(e){return(0,d._)(function(){var t,r,n,i,o,a;return(0,m.__generator)(this,function(s){switch(s.label){case 0:return[4,e.service.baseContext.getBaseContext()];case 1:return n=(r=s.sent()).abTestVersion,i=r.language,o=r.user,[2,{keyword:null!=(a=null==(t=e.request.query)?void 0:t.q)?a:"",abTestVersion:n,language:i,user:o}]}})})()}),skipFirstClientDispatch:!1}),ec("design:type",Function),ec("design:paramtypes",[void 0===w.c?Object:w.c]),ec("design:returntype",void 0)],eS.prototype,"getPhotoSearch",null),eu([(0,x.Mj)({payloadGetter:(0,Y.i)([F.OZ.searchVideo],function(e){return(0,d._)(function(){var t,r,n,i,o,a;return(0,m.__generator)(this,function(s){switch(s.label){case 0:return[4,e.service.baseContext.getBaseContext()];case 1:return n=(r=s.sent()).abTestVersion,i=r.language,o=r.user,[2,{keyword:null!=(a=null==(t=e.request.query)?void 0:t.q)?a:"",abTestVersion:n,language:i,user:o}]}})})()}),skipFirstClientDispatch:!1}),ec("design:type",Function),ec("design:paramtypes",[void 0===w.c?Object:w.c]),ec("design:returntype",void 0)],eS.prototype,"getLiveSearch",null),eS=eu([(0,E.nV)("Search"),(a=(0,R.y)(J.hp),function(e,t){a(e,t,9)}),ec("design:type",Function),ec("design:paramtypes",[void 0===ed.S?Object:ed.S,void 0===ea.U?Object:ea.U,void 0===eo.E?Object:eo.E,void 0===el.O?Object:el.O,void 0===en.F?Object:en.F,void 0===K.w?Object:K.w,void 0===Q.$?Object:Q.$,void 0===es.Q?Object:es.Q,void 0===ei.f?Object:ei.f,"undefined"==typeof I18NTranslate?Object:I18NTranslate])],eS)},24616:function(e,t,r){r.d(t,{S:function(){return d}});var n=r(95170),i=r(79262),o=r(97623),a=r(54149),s=r(10987);function l(e,t){if(("undefined"==typeof Reflect?"undefined":(0,i._)(Reflect))==="object"&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}var d=function(){function e(t){(0,n._)(this,e),this.fetch=t}var t=e.prototype;return t.getTopSearch=function(e){return this.fetch.get("/api/search/general/full/",{query:e,baseUrlType:a.Z4.FixedWww})},t.getUserSearch=function(e){return this.fetch.get("/api/search/user/full/",{query:e,baseUrlType:a.Z4.FixedWww})},t.getVideoSearch=function(e){return this.fetch.get("/api/search/item/full/",{query:e,baseUrlType:a.Z4.FixedWww})},t.getPhotoSearch=function(e){return this.fetch.get("/api/search/photo/full/",{query:e,baseUrlType:a.Z4.FixedWww})},t.getLiveSearch=function(e){return this.fetch.get("/api/search/live/full/",{query:e,baseUrlType:a.Z4.FixedWww})},e}();d=function(e,t,r,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if(("undefined"==typeof Reflect?"undefined":(0,i._)(Reflect))==="object"&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(a<3?o(s):a>3?o(t,r,s):o(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s}([(0,o._q)(),l("design:type",Function),l("design:paramtypes",[void 0===s.p?Object:s.p])],d)},97050:function(e,t,r){r.d(t,{An:function(){return c},Rs:function(){return h},gA:function(){return d},uf:function(){return u},xh:function(){return l}});var n,i,o,a,s,l=((n={}).NORMAL="0",n.NEW="1",n.HOT="2",n.RECOM="3",n.EXCLUSIVE="4",n.LOCAL="5",n.BURST="6",n.BOIL="7",n.WENDACLUE="8",n.LONGVIDEO="9",n.LIVE="10",n.UPDATE="15",n.BUBBLEWORDS="16",n.SAV="17",n.MUSIC="18",n),d=((i={})[i.Video=1]="Video",i[i.Users=4]="Users",i[i.UserLive=20]="UserLive",i[i.Lives=61]="Lives",i),u=((o={})[o.Video=1]="Video",o[o.User=4]="User",o[o.UserLive=20]="UserLive",o[o.Live=61]="Live",o),c=((a={}).Live="tiktok_live_view_window",a),h=((s={}).CommentTop="comment_top",s.FeedBar="feed_bar",s)},17231:function(e,t,r){r.d(t,{x:function(){return i}});var n,i=((n={}).VideoDetail="video_detail",n.EffectDetail="effect_detail",n.HomepageHot="homepage_hot",n.SearchSug="search_sug",n.SearchResult="search_result",n.SearchOuter="search_outer",n.Inbox="homepage_message",n.InboxFollowRequest="follow_request_page",n.Channel="channel",n.GeneralSearch="general_search",n.PrivacyAndSafetySettings="privacy_and_safety_settings",n)}}]);