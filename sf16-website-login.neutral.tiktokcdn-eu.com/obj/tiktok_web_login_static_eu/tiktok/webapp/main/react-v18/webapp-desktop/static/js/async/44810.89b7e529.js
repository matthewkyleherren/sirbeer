(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["44810"],{94686:function(e,t,n){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function r(e,t,n){return t=c(t),p(e,h()?Reflect.construct(t,n||[],c(e).constructor):t.apply(e,n))}function o(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_(i.key),i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t,n){return(t=_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!({}).hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}}).apply(null,arguments)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(h=function(){return!!e})()}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){u(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function p(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t,n,i){var r=l(c(1&i?e.prototype:e),t,n);return 2&i&&"function"==typeof r?function(e){return r.apply(n,e)}:r}function m(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,{B:function(){return f},GM:function(){return p},Og:function(){return m},T1:function(){return g},hz:function(){return v},j6:function(){return a},n8:function(){return u},qW:function(){return r},uk:function(){return k},xs:function(){return o}})},45390:function(e,t,n){"use strict";n.d(t,{A2:function(){return S},AB:function(){return w},BY:function(){return l},C2:function(){return I},CM:function(){return R},DH:function(){return P},Dx:function(){return b},F4:function(){return T},F5:function(){return k},KH:function(){return g},N8:function(){return m},Rj:function(){return c},Ut:function(){return x},W5:function(){return u},Wr:function(){return v},Wz:function(){return y},dQ:function(){return A},ff:function(){return r},h9:function(){return _},mQ:function(){return o},m_:function(){return f},nQ:function(){return a},pi:function(){return E},q_:function(){return p},tr:function(){return i},uE:function(){return s},uv:function(){return d},vB:function(){return O},vN:function(){return C},yE:function(){return h}});var i="play",r="error",o="seeked",s="waiting",a="canplay",u="durationchange",l="loadeddata",c="focus",f="blur",h="ready",d="urlNull",g="autoplay_started",p="autoplay_was_prevented",y="complete",v="replay",m="destroy",_="urlchange",k="loading",b="fullscreen_change",A="cssFullscreen_change",E="mini_state_change",C="definition_change",w="after_definition_change",T="video_resize",S="playnext",O="user_action",x="reset",P="source_error",I="source_success",R=["play","playing","ended","pause","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","loadedmetadata","ratechange","progress","loadstart","emptied","stalled","suspend","abort","lowdecode"]},26481:function(e,t,n){"use strict";n.d(t,{A:function(){return el}});var i=n(94686),r=n(22626),o=n.n(r),s=n(37545),a=n(90882),u=function(){try{return"3.0.31"}catch(e){return""}}(),l={1:"media",2:"media",3:"media",4:"media",5:"media",6:"media"},c={1:5101,2:5102,3:5103,4:5104,5:5105,6:5106},f=(0,i.j6)(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null};(0,i.xs)(this,e);var r=t&&t.i18n?t.i18n.ERROR_TYPES:null;if(t.media){var o=n.mediaError?n.mediaError:t.media.error||{},a=t.duration,l=t.currentTime,f=t.ended,h=t.src,d=t.currentSrc,g=t.media,p=g.readyState,y=g.networkState,v=n.errorCode||o.code;c[v]&&(v=c[v]);var m={playerVersion:u,currentTime:l,duration:a,ended:f,readyState:p,networkState:y,src:h||d,errorType:n.errorType,errorCode:v,message:n.errorMessage||o.message,mediaError:o,originError:n.originError?n.originError.stack:"",host:s.Ay.getHostFromUrl(h||d)};return n.ext&&Object.keys(n.ext).map(function(e){m[e]=n.ext[e]}),m}if(arguments.length>1){for(var _={playerVersion:u,domain:document.domain},k=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],b=0;b<arguments.length;b++)_[k[b]]=arguments[b];return _.ex=r?(r[arguments[0]]||{}).msg:"",_}}),h=n(45390);function d(e,t){this&&this.emit&&("error"===e?this.errorHandler(e,t.error):this.emit(e,t))}var g=function(e){function t(e){(0,i.xs)(this,t),(n=(0,i.qW)(this,t,[e]))._hasStart=!1,n._currentTime=0,n._duration=0,n._internalOp={},n._lastMuted=!1,n.vtype="MP4",n._rate=-1,n.mediaConfig=Object.assign({},{controls:!1,autoplay:e.autoplay,playsinline:e.playsinline,"x5-playsinline":e.playsinline,"webkit-playsinline":e.playsinline,"x5-video-player-fullscreen":e["x5-video-player-fullscreen"]||e.x5VideoPlayerFullscreen,"x5-video-orientation":e["x5-video-orientation"]||e.x5VideoOrientation,airplay:e.airplay,"webkit-airplay":e.airplay,tabindex:0|e.tabindex,mediaType:e.mediaType||"video","data-index":-1},e.videoConfig,e.videoAttributes);var n,r=e["x5-video-player-type"]||e.x5VideoPlayerType;return a.A.isWeixin&&a.A.os.isAndroid&&r&&(n.mediaConfig["x5-video-player-type"]=r,delete n.mediaConfig.playsinline,delete n.mediaConfig["webkit-playsinline"],delete n.mediaConfig["x5-playsinline"]),e.loop&&(n.mediaConfig.loop="loop"),e.autoplayMuted&&!Object.prototype.hasOwnProperty.call(n.mediaConfig,"muted")&&(n.mediaConfig.muted=!0),n.media=s.Ay.createDom(n.mediaConfig.mediaType,"",n.mediaConfig,""),e.defaultPlaybackRate&&(n.media.defaultPlaybackRate=n.media.playbackRate=e.defaultPlaybackRate),"Number"===s.Ay.typeOf(e.volume)&&(n.volume=e.volume),e.autoplayMuted&&(n.media.muted=!0,n._lastMuted=!0),e.autoplay&&(n.media.autoplay=!0),n._interval={},n.mediaEventMiddleware={},n.attachVideoEvents(),n}return(0,i.B)(t,e),(0,i.j6)(t,[{key:"setEventsMiddleware",value:function(e){var t=this;Object.keys(e).map(function(n){t.mediaEventMiddleware[n]=e[n]})}},{key:"removeEventsMiddleware",value:function(e){var t=this;Object.keys(e).map(function(e){delete t.mediaEventMiddleware[e]})}},{key:"attachVideoEvents",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.media;this._evHandlers||(this._evHandlers=h.CM.map(function(t){var n="on".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));return"function"==typeof e[n]&&e.on(t,e[n]),(0,i.n8)({},t,function(n,i){var r={player:e,eventName:t,originalEvent:n,detail:n.detail||{},timeStamp:n.timeStamp,currentTime:e.currentTime,duration:e.duration,paused:e.paused,ended:e.ended,isInternalOp:!!e._internalOp[n.type],muted:e.muted,volume:e.volume,host:s.Ay.getHostFromUrl(e.currentSrc),vtype:e.vtype};if(e.removeInnerOP(n.type),"timeupdate"===t&&(e._currentTime=e.media&&e.media.currentTime),"ratechange"===t){var o=e.media?e.media.playbackRate:0;if(o&&e._rate===o)return;e._rate=e.media&&e.media.playbackRate}if("durationchange"===t&&(e._duration=e.media.duration),"volumechange"===t&&(r.isMutedChange=e._lastMuted!==e.muted,e._lastMuted=e.muted),"error"===t&&(r.error=i||e.video.error),e.mediaEventMiddleware[t]){var a=d.bind(e,t,r);try{e.mediaEventMiddleware[t].call(e,r,a)}catch(n){throw d.call(e,t,r),n}}else d.call(e,t,r)})})),this._evHandlers.forEach(function(e){var n=Object.keys(e)[0];t.addEventListener(n,e[n],!1)})}},{key:"detachVideoEvents",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.media;this._evHandlers.forEach(function(e){var n=Object.keys(e)[0];t.removeEventListener(n,e[n],!1)}),this._evHandlers.forEach(function(t){var n=Object.keys(t)[0],i="on".concat(n.charAt(0).toUpperCase()).concat(n.slice(1));"function"==typeof e[i]&&e.off(n,e[i])}),this._evHandlers=null}},{key:"_attachSourceEvents",value:function(e,t){var n=this;e.removeAttribute("src"),e.load(),t.forEach(function(e,t){n.media.appendChild(s.Ay.createDom("source","",{src:"".concat(e.src),type:"".concat(e.type||""),"data-index":t+1}))});var i=e.children;if(i){this._videoSourceCount=i.length,this._videoSourceIndex=i.length,this._vLoadeddata=function(e){n.emit(h.C2,{src:e.target.currentSrc,host:s.Ay.getHostFromUrl(e.target.currentSrc)})};for(var r=null,o=0;o<this._evHandlers.length;o++)if("error"===Object.keys(this._evHandlers[o])[0]){r=this._evHandlers[o];break}this._sourceError||(this._sourceError=function(e){var t=parseInt(e.target.getAttribute("data-index"),10);if(n._videoSourceIndex--,0===n._videoSourceIndex||t>=n._videoSourceCount){var i={code:4,message:"sources_load_error"};r?r.error(e,i):n.errorHandler("error",i)}var o=l["4"];n.emit(h.DH,new f(n,{errorType:o,errorCode:4,errorMessage:"sources_load_error",mediaError:{code:4,message:"sources_load_error"},src:e.target.src}))});for(var a=0;a<i.length;a++)i[a].addEventListener("error",this._sourceError);e.addEventListener("loadeddata",this._vLoadeddata)}}},{key:"_detachSourceEvents",value:function(e){var t=e.children;if(t&&0!==t.length&&this._sourceError){for(var n=0;n<t.length;n++)t[n].removeEventListener("error",this._sourceError);for(;t.length>0;)e.removeChild(t[0]);this._vLoadeddata&&e.removeEventListener("loadeddata",this._vLoadeddata)}}},{key:"errorHandler",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.media&&(this.media.error||t)){var n=this.media.error||t,i=n.code?l[n.code]:"other",r=n.message;this.media.currentSrc||(n={code:6,message:"empty_src"}),this.emit(e,new f(this,{errorType:i,errorCode:n.code,errorMessage:n.message||"",mediaError:n}))}}},{key:"destroy",value:function(){for(var e in this.media&&(this.media.pause&&(this.media.pause(),this.media.muted=!0),this.media.removeAttribute("src"),this.media.load()),this._currentTime=0,this._duration=0,this.mediaConfig=null,this._interval)Object.prototype.hasOwnProperty.call(this._interval,e)&&(clearInterval(this._interval[e]),this._interval[e]=null);this.detachVideoEvents(),this.media=null,this.mediaEventMiddleware={},this.removeAllListeners()}},{key:"video",get:function(){return this.media},set:function(e){this.media=e}},{key:"play",value:function(){return this.media?this.media.play():null}},{key:"pause",value:function(){this.media&&this.media.pause()}},{key:"load",value:function(){this.media&&this.media.load()}},{key:"canPlayType",value:function(e){return!!this.media&&this.media.canPlayType(e)}},{key:"getBufferedRange",value:function(e){var t=[0,0];if(!this.media)return t;e||(e=this.media.buffered);var n=this.media.currentTime;if(e)for(var i=0,r=e.length;i<r&&(t[0]=e.start(i),t[1]=e.end(i),!(t[0]<=n)||!(n<=t[1]));i++);return t[0]-n<=0&&n-t[1]<=0?t:[0,0]}},{key:"autoplay",get:function(){return!!this.media&&this.media.autoplay},set:function(e){this.media&&(this.media.autoplay=e)}},{key:"buffered",get:function(){return this.media?this.media.buffered:null}},{key:"buffered2",get:function(){return this.media&&this.media.buffered?s.Ay.getBuffered2(this.media.buffered):null}},{key:"bufferedPoint",get:function(){var e={start:0,end:0};if(!this.media)return e;var t=this.media.buffered;if(!t||0===t.length)return e;for(var n=0;n<t.length;n++)if((t.start(n)<=this.currentTime||.1>t.start(n))&&t.end(n)>=this.currentTime)return{start:t.start(n),end:t.end(n)};return e}},{key:"crossOrigin",get:function(){return this.media?this.media.crossOrigin:""},set:function(e){this.media&&(this.media.crossOrigin=e)}},{key:"currentSrc",get:function(){return this.media?this.media.currentSrc:""},set:function(e){this.media&&(this.media.currentSrc=e)}},{key:"currentTime",get:function(){return this.media?void 0!==this.media.currentTime?this.media.currentTime:this._currentTime:0},set:function(e){try{this.media&&(this.media.currentTime=e)}catch(e){}}},{key:"defaultMuted",get:function(){return!!this.media&&this.media.defaultMuted},set:function(e){this.media&&(this.media.defaultMuted=e)}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return!!this.media&&this.media.ended}},{key:"error",get:function(){return this.media.error}},{key:"errorNote",get:function(){return this.media.error?["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"][this.media.error.code-1]:""}},{key:"loop",get:function(){return!!this.media&&this.media.loop},set:function(e){this.media&&(this.media.loop=e)}},{key:"muted",get:function(){return!!this.media&&this.media.muted},set:function(e){if(this.media&&this.media.muted!==e){this._lastMuted=this.media.muted;try{this.media.muted=e}catch(e){}}}},{key:"networkState",get:function(){return this.media.networkState}},{key:"paused",get:function(){return!this.media||this.media.paused}},{key:"playbackRate",get:function(){return this.media?this.media.playbackRate:0},set:function(e){this.media&&e!==1/0&&(this.media.defaultPlaybackRate=e,this.media.playbackRate=e)}},{key:"played",get:function(){return this.media?this.media.played:null}},{key:"preload",get:function(){return!!this.media&&this.media.preload},set:function(e){this.media&&(this.media.preload=e)}},{key:"readyState",get:function(){return this.media.readyState}},{key:"seekable",get:function(){return!!this.media&&this.media.seekable}},{key:"seeking",get:function(){return!!this.media&&this.media.seeking}},{key:"src",get:function(){return this.media?this.media.src:""},set:function(e){if(this.media){if(this.emit(h.h9,e),this.emit(h.uE),this._currentTime=0,this._duration=0,s.Ay.isMSE(this.media))return void this.onWaiting();this._detachSourceEvents(this.media),"Array"===s.Ay.typeOf(e)?this._attachSourceEvents(this.media,e):e?this.media.src=e:this.media.removeAttribute("src"),this.load()}}},{key:"volume",get:function(){return this.media?this.media.volume:0},set:function(e){if(e!==1/0&&this.media)try{this.media.volume=e}catch(e){}}},{key:"aspectRatio",get:function(){return this.media?this.media.videoWidth/this.media.videoHeight:0}},{key:"addInnerOP",value:function(e){this._internalOp[e]=!0}},{key:"removeInnerOP",value:function(e){delete this._internalOp[e]}},{key:"emit",value:function(e,n){for(var r=arguments.length,o=Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];(0,i.hz)(t,"emit",this,3)([e,n].concat(o))}},{key:"on",value:function(e,n){for(var r=arguments.length,o=Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];(0,i.hz)(t,"on",this,3)([e,n].concat(o))}},{key:"once",value:function(e,n){for(var r=arguments.length,o=Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];(0,i.hz)(t,"once",this,3)([e,n].concat(o))}},{key:"off",value:function(e,n){for(var r=arguments.length,o=Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];(0,i.hz)(t,"off",this,3)([e,n].concat(o))}},{key:"offAll",value:function(){(0,i.hz)(t,"removeAllListeners",this,3)([])}}])}(o()),p=(0,i.j6)(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};(0,i.xs)(this,e),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=t},[{key:"openDB",value:function(e){var t=this,n=this,i=this.myDB.version||1,r=n.indexedDB.open(n.myDB.name,i);r.onerror=function(e){},r.onsuccess=function(i){t.myDB.db=i.target.result,e.call(n)},r.onupgradeneeded=function(e){var t=e.target.result;e.target.transaction,t.objectStoreNames.contains(n.myDB.ojstore.name)||t.createObjectStore(n.myDB.ojstore.name,{keyPath:n.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){this.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(e,t){for(var n,i=this.myDB.db.transaction(e,"readwrite").objectStore(e),r=0;r<t.length;r++)(n=i.add(t[r])).onerror=function(){},n.onsuccess=function(){}}},{key:"putData",value:function(e,t){for(var n,i=this.myDB.db.transaction(e,"readwrite").objectStore(e),r=0;r<t.length;r++)(n=i.put(t[r])).onerror=function(){},n.onsuccess=function(){}}},{key:"getDataByKey",value:function(e,t,n){var i=this,r=this.myDB.db.transaction(e,"readwrite").objectStore(e).get(t);r.onerror=function(){n.call(i,null)},r.onsuccess=function(e){var t=e.target.result;n.call(i,t)}}},{key:"deleteData",value:function(e,t){this.myDB.db.transaction(e,"readwrite").objectStore(e).delete(t)}},{key:"clearData",value:function(e){this.myDB.db.transaction(e,"readwrite").objectStore(e).clear()}}]),y=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],v=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],m=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],_="data-xgplayerid",k=n(51371),b=n(5653),A=(0,i.j6)(function e(){var t=this;if((0,i.xs)(this,e),(0,i.n8)(this,"__trigger",function(e){t.timeStamp=new Date().getTime();for(var n=0;n<e.length;n++)t.__runHandler(e[n].target)}),this.__handlers=[],this.timeStamp=0,this.observer=null,window.ResizeObserver)try{this.observer=new window.ResizeObserver((0,s.nF)(this.__trigger,100,{trailing:!0})),this.timeStamp=new Date().getTime()}catch(e){console.error(e)}},[{key:"addObserver",value:function(e,t){if(this.observer){this.observer&&this.observer.observe(e);for(var n=e.getAttribute(_),i=this.__handlers,r=-1,o=0;o<i.length;o++)i[o]&&e===i[o].target&&(r=o);r>-1?this.__handlers[r].handler=t:this.__handlers.push({target:e,handler:t,playerId:n})}}},{key:"unObserver",value:function(e){var t=-1;this.__handlers.map(function(n,i){e===n.target&&(t=i)});try{this.observer&&this.observer.unobserve(e)}catch(e){}this.observer&&this.observer.unobserve(e),t>-1&&this.__handlers.splice(t,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(e){for(var t=this.__handlers,n=0;n<t.length;n++)if(t[n]&&e===t[n].target){try{t[n].handler(e)}catch(e){console.error(e)}return!0}return!1}}]),E=null,C={pluginGroup:{},init:function(e){var t,n=e._pluginInfoId;n||(e._pluginInfoId=n=s.Ay.generateSessionId()),!e.config.closeResizeObserver&&e.root&&(t=e.root,E||(E=new A),E.addObserver(t,function(){e.resize()})),this.pluginGroup[n]={_originalOptions:e.config||{},_plugins:{}}},formatPluginInfo:function(e,t){var n=null,i=null;return e.plugin&&"function"==typeof e.plugin?(n=e.plugin,i=e.options):(n=e,i={}),t&&(i.config=t||{}),{PLUFGIN:n,options:i}},checkPluginIfExits:function(e,t){for(var n=0;n<t.length;n++)if(e.toLowerCase()===t[n].pluginName.toLowerCase())return!0;return!1},getRootByConfig:function(e,t){for(var n=Object.keys(t),i=null,r=0;r<n.length;r++)if(e.toLowerCase()===n[r].toLowerCase()){i=t[n[r]];break}return"Object"===s.Ay.typeOf(i)?{root:i.root,position:i.position}:{}},lazyRegister:function(e,t){var n=this,i=t.timeout||1500;return Promise.race([t.loader().then(function(t){var i;i=t&&t.__esModule?t.default:t,n.register(e,i,t.options)}),new Promise(function(e,t){setTimeout(function(){t(Error("timeout"))},i)})])},register:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&t&&"function"==typeof t&&void 0!==t.prototype){var i=e._pluginInfoId;if(i&&this.pluginGroup[i]){this.pluginGroup[i]._plugins||(this.pluginGroup[i]._plugins={});var r=this.pluginGroup[i]._plugins,o=this.pluginGroup[i]._originalOptions;n.player=e;var a=n.pluginName||t.pluginName;if(!a)throw Error("The property pluginName is necessary");if(t.isSupported&&!t.isSupported(e.config.mediaType,e.config.codecType))return void console.warn("not supported plugin [".concat(a,"]"));n.config||(n.config={});for(var u=Object.keys(o),l=0;l<u.length;l++)if(a.toLowerCase()===u[l].toLowerCase()){var c=o[u[l]];"Object"===s.Ay.typeOf(c)?n.config=Object.assign({},n.config,o[u[l]]):"Boolean"===s.Ay.typeOf(c)&&(n.config.disable=!c);break}t.defaultConfig&&Object.keys(t.defaultConfig).forEach(function(e){void 0===n.config[e]&&(n.config[e]=t.defaultConfig[e])}),n.root?"string"==typeof n.root&&(n.root=e[n.root]):n.root=e.root,n.index=n.config.index||0;try{r[a.toLowerCase()]&&(this.unRegister(i,a.toLowerCase()),console.warn("the is one plugin with same pluginName [".concat(a,"] exist, destroy the old instance")));var f=new t(n);return r[a.toLowerCase()]=f,r[a.toLowerCase()].func=t,f&&"function"==typeof f.afterCreate&&f.afterCreate(),f}catch(e){throw console.error(e),e}}}},unRegister:function(e,t){e._pluginInfoId&&(e=e._pluginInfoId),t=t.toLowerCase();try{var n=this.pluginGroup[e]._plugins[t];n&&(n.pluginName&&n.__destroy(),delete this.pluginGroup[e]._plugins[t])}catch(n){console.error("[unRegister:".concat(t,"] cgid:[").concat(e,"] error"),n)}},deletePlugin:function(e,t){var n=e._pluginInfoId;n&&this.pluginGroup[n]&&this.pluginGroup[n]._plugins&&delete this.pluginGroup[n]._plugins[t]},getPlugins:function(e){var t=e._pluginInfoId;return t&&this.pluginGroup[t]?this.pluginGroup[t]._plugins:{}},findPlugin:function(e,t){var n=e._pluginInfoId;if(!n||!this.pluginGroup[n])return null;var i=t.toLowerCase();return this.pluginGroup[n]._plugins[i]},beforeInit:function(e){var t=this;function n(e){return e&&e.then?e:new Promise(function(e){e()})}return new Promise(function(i){if(t.pluginGroup)return(e._loadingPlugins&&e._loadingPlugins.length?Promise.all(e._loadingPlugins):Promise.resolve()).then(function(){var r=e._pluginInfoId;if(!t.pluginGroup[r])return void i();var o=t.pluginGroup[r]._plugins,s=[];Object.keys(o).forEach(function(e){if(o[e]&&o[e].beforePlayerInit)try{var t=o[e].beforePlayerInit();s.push(n(t))}catch(e){throw s.push(n(null)),e}}),Promise.all([].concat(s)).then(function(){i()}).catch(function(e){console.error(e),i()})})})},afterInit:function(e){var t=e._pluginInfoId;if(t&&this.pluginGroup[t]){var n=this.pluginGroup[t]._plugins;Object.keys(n).forEach(function(e){n[e]&&n[e].afterPlayerInit&&n[e].afterPlayerInit()})}},setLang:function(e,t){var n=t._pluginInfoId;if(n&&this.pluginGroup[n]){var i=this.pluginGroup[n]._plugins;Object.keys(i).forEach(function(t){if(i[t].updateLang)i[t].updateLang(e);else try{i[t].lang=e}catch(e){console.warn("".concat(t," setLang"))}})}},reRender:function(e){var t=this,n=e._pluginInfoId;if(n&&this.pluginGroup[n]){var i=[],r=this.pluginGroup[n]._plugins;Object.keys(r).forEach(function(e){"controls"!==e&&r[e]&&(i.push({plugin:r[e].func,options:r[e].__args}),t.unRegister(n,e))}),i.forEach(function(n){t.register(e,n.plugin,n.options)})}},onPluginsReady:function(e){var t=e._pluginInfoId;if(t&&this.pluginGroup[t]){var n=this.pluginGroup[t]._plugins||{};Object.keys(n).forEach(function(e){n[e].onPluginsReady&&"function"==typeof n[e].onPluginsReady&&n[e].onPluginsReady()})}},destroy:function(e){var t=e._pluginInfoId;if(this.pluginGroup[t]){e.root&&(n=e.root,E.unObserver(n,void 0));for(var n,i=this.pluginGroup[t]._plugins,r=0,o=Object.keys(i);r<o.length;r++){var s=o[r];this.unRegister(t,s)}delete this.pluginGroup[t],delete e._pluginInfoId}}},w="xgplayer-is-enter",T="xgplayer-pause",S="xgplayer-playing",O="xgplayer-ended",x="xgplayer-isloading",P="xgplayer-is-error",I="xgplayer-replay",R="xgplayer-nostart",L="xgplayer-inactive",F="xgplayer-is-fullscreen",j="xgplayer-is-cssfullscreen",N="xgplayer-rotate-fullscreen",D="xgplayer-rotate-parent",M="xgplayer-fullscreen-parent",B="xgplayer-fullscreen-inner",H="controls-autohide",z="not-allow-autoplay",U="seeking",W="xgplayer-built-in";function G(){return{id:"",el:null,isNoRoot:!1,isCustomRoot:!0,url:"",domEventType:"default",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,isLive:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!0,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!0,closeControlsBlur:!0,topBarAutoHide:!0,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},preProcessUrl:null,ignores:[],whitelist:[],inactive:3e3,lang:(0,s.Xo)(),controls:!0,marginControls:!1,fullscreenTarget:null,screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],tabindex:0,thumbnail:null,videoConfig:{},isHideTips:!1,minWaitDelay:200,commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}}}var V=function(e,t){var n,r,o=t.preset&&t.options?new t.preset(t.options,e.config):new t({},e.config),s=o.plugins,a=o.ignores,u=o.icons,l=void 0===u?{}:u,c=o.i18n,f=void 0===c?[]:c;e.config.plugins||(e.config.plugins=[]),e.config.ignores||(e.config.ignores=[]),(n=e.config.plugins).push.apply(n,(0,i.Og)(void 0===s?[]:s)),(r=e.config.ignores).push.apply(r,(0,i.Og)(void 0===a?[]:a)),Object.keys(l).map(function(t){e.config.icons[t]||(e.config.icons[t]=l[t])});var h=e.config.i18n||[];f.push.apply(f,(0,i.Og)(h)),e.config.i18n=f},K=n(78206),q=function(e){function t(){var e;(0,i.xs)(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=(0,i.qW)(this,t,[].concat(r)),(0,i.n8)(e,"onMouseEnter",function(t){var n=e.player;e.playerConfig.closeControlsBlur&&n.focus({autoHide:!1})}),(0,i.n8)(e,"onMouseLeave",function(t){e.player.focus()}),e}return(0,i.B)(t,e),(0,i.j6)(t,[{key:"beforeCreate",value:function(e){e.config.mode||"mobile"!==a.A.device||(e.config.mode="flex"),e.player.config.marginControls&&(e.config.autoHide=!1)}},{key:"afterCreate",value:function(){var e=this,t=this.config,n=t.disable,i=t.height,r=t.mode;if(!n){"flex"===r&&this.player.addClass("flex-controls");var o={height:"".concat(i,"px")};Object.keys(o).map(function(t){e.root.style[t]=o[t]}),this.left=this.find("xg-left-grid"),this.center=this.find("xg-center-grid"),this.right=this.find("xg-right-grid"),this.innerRoot=this.find("xg-inner-controls"),this.on(h.pi,function(t){t?s.Ay.addClass(e.root,"mini-controls"):s.Ay.removeClass(e.root,"mini-controls")});var u=this.playerConfig.isMobileSimulateMode;"mobile"!==a.A.device&&"mobile"!==u&&(this.bind("mouseenter",this.onMouseEnter),this.bind("mouseleave",this.onMouseLeave))}}},{key:"focus",value:function(){this.player.focus({autoHide:!1})}},{key:"focusAwhile",value:function(){this.player.focus({autoHide:!0})}},{key:"blur",value:function(){this.player.blur({ignorePaused:!0})}},{key:"recoverAutoHide",value:function(){this.config.autoHide&&s.Ay.addClass(this.root,H)}},{key:"pauseAutoHide",value:function(){s.Ay.removeClass(this.root,H)}},{key:"show",value:function(e){this.root.style.display="",this.player.focus()}},{key:"hide",value:function(){this.root.style.display="none"}},{key:"mode",get:function(){return this.config.mode}},{key:"registerPlugin",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;if(this.root){var o=e.defaultConfig||{};if(!n.root){switch(n.position?n.position:n.config&&n.config.position?n.config.position:o.position){case k.lP.CONTROLS_LEFT:n.root=this.left;break;case k.lP.CONTROLS_RIGHT:n.root=this.right;break;case k.lP.CONTROLS_CENTER:n.root=this.center;break;case k.lP.CONTROLS:n.root=this.root;break;default:n.root=this.left}return(0,i.hz)(t,"registerPlugin",this,3)([e,n,r])}}}},{key:"destroy",value:function(){"mobile"!==a.A.device&&(this.unbind("mouseenter",this.onMouseEnter),this.unbind("mouseleave",this.onMouseLeave))}},{key:"render",value:function(){var e=this.config,t=e.mode,n=e.autoHide,r=e.initShow;if(!e.disable){var o=s.Ay.classNames({"xgplayer-controls":!0},{"flex-controls":"flex"===t},{"bottom-controls":"bottom"===t},(0,i.n8)({},H,n),{"xgplayer-controls-initshow":r||!n});return'<xg-controls class="'.concat(o,'" unselectable="on">\n    <xg-inner-controls class="xg-inner-controls xg-pos">\n      <xg-left-grid class="xg-left-grid">\n      </xg-left-grid>\n      <xg-center-grid class="xg-center-grid"></xg-center-grid>\n      <xg-right-grid class="xg-right-grid">\n      </xg-right-grid>\n    </xg-inner-controls>\n    </xg-controls>')}}}],[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:"",initShow:!1}}}])}(k.Ay),X=n(77102),Y={lang:{},langKeys:[],textKeys:[]};function Q(e,t){return Object.keys(t).forEach(function(n){var r,o=s.Ay.typeOf(t[n]),a=s.Ay.typeOf(e[n]);"Array"===o?("Array"!==a&&(e[n]=[]),(r=e[n]).push.apply(r,(0,i.Og)(t[n]))):"Object"===o?("Object"!==a&&(e[n]={}),Q(e[n],t[n])):e[n]=t[n]}),e}function $(){Object.keys(Y.lang.en).map(function(e){Y.textKeys[e]=e})}function Z(e,t){var n=e.LANG;if(t||(t=Y),t.lang){var i=e.TEXT||{};"zh"===n&&(n="zh-cn"),t.lang[n]?Q(t.lang[n],i):(t.langKeys.push(n),t.lang[n]=i),$()}}Z({LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}});var J={get textKeys(){return Y.textKeys},get langKeys(){return Y.langKeys},get lang(){var ee={};return Y.langKeys.map(function(e){ee[e]=Y.lang[e]}),Y.lang["zh-cn"]&&(ee.zh=Y.lang["zh-cn"]||{}),ee},extend:function(e,t){var n=[];if(t||(t=Y),t.lang){n="Array"!==s.Ay.typeOf(e)?Object.keys(e).map(function(t){return{LANG:"zh"===t?"zh-cn":t,TEXT:e[t]}}):e;var i=t.lang;n.map(function(e){"zh"===e.LANG&&(e.LANG="zh-cn"),i[e.LANG]?Q(i[e.LANG]||{},e.TEXT||{}):Z(e,t)}),$()}},use:Z,init:function(e){var t,n={lang:{},langKeys:[],textKeys:{},pId:e};return Q(n.lang,Y.lang),(t=n.langKeys).push.apply(t,(0,i.Og)(Y.langKeys)),Q(n.textKeys,Y.textKeys),n}},et=["ERROR","INITIAL","READY","ATTACHING","ATTACHED","NOTALLOW","RUNNING","ENDED","DESTROYED"],en={},ei=null,er=function(e){function t(){return(0,i.xs)(this,t),(0,i.qW)(this,t,arguments)}return(0,i.B)(t,e),(0,i.j6)(t,[{key:"add",value:function(e){e&&(en[e.playerId]=e,1===Object.keys(en).length&&this.setActive(e.playerId,!0))}},{key:"remove",value:function(e){e&&(e.isUserActive,delete en[e.playerId])}},{key:"_iterate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in en)if(Object.prototype.hasOwnProperty.call(en,n)){var i=en[n];if(t){if(e(i))break}else e(i)}}},{key:"forEach",value:function(e){this._iterate(e)}},{key:"find",value:function(e){var t=null;return this._iterate(function(n){var i=e(n);return i&&(t=n),i},!0),t}},{key:"findAll",value:function(e){var t=[];return this._iterate(function(n){e(n)&&t.push(n)}),t}},{key:"setActive",value:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(en[e])return t?this.forEach(function(t){e===t.playerId?(t.isUserActive=!0,t.isInstNext=!1):t.isUserActive=!1}):en[e].isUserActive=t,e}},{key:"getActiveId",value:function(){for(var e=Object.keys(en),t=0;t<e.length;t++){var n=en[e[t]];if(n&&n.isUserActive)return e[t]}return null}},{key:"setNext",value:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(en[e])return t?this.forEach(function(t){e===t.playerId?(t.isUserActive=!1,t.isInstNext=!0):t.isInstNext=!1}):en[e].isInstNext=t,e}}],[{key:"getInstance",value:function(){return ei||(ei=new t),ei}}])}(r.EventEmitter),eo=["play","pause","replay","retry"],es=0,ea=0,eu=null,el=function(e){function t(e){(0,i.xs)(this,t);var n,r=s.Ay.deepMerge(G(),e);n=(0,i.qW)(this,t,[r]),(0,i.n8)(n,"canPlayFunc",function(){if(n.config){var e=n.config,t=e.autoplay,i=e.defaultPlaybackRate;X.A.logInfo("player","canPlayFunc, startTime",n.__startTime),n._seekToStartTime(),n.playbackRate=i,(t||n._useAutoplay)&&n.mediaPlay(),n.off(h.nQ,n.canPlayFunc),n.removeClass(w)}}),(0,i.n8)(n,"onFullscreenChange",function(e,t){var i=function(){s.Ay.setTimeout(n,function(){n.resize()},100)},r=s.Ay.getFullScreenEl();n._fullActionFrom?n._fullActionFrom="":n.emit(h.vB,{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:n.currentTime,duration:n.duration,props:[{prop:"fullscreen",from:!0,to:!1}]});var o=(0,s.Dq)(r,n.playerId,_),a=(0,s.Zt)(r);if(t||r&&(r===n._fullscreenEl||o)||a&&n._fullscreenEl)i(),n.config.closeFocusVideoFocus||n.media.focus(),n.fullscreen=!0,n.changeFullStyle(n.root,r,F),n.emit(h.Dx,!0,n._fullScreenOffset),n.cssfullscreen&&n.exitCssFullscreen();else if(n.fullscreen){i();var u=n._fullScreenOffset;if(n.config.needFullscreenScroll?(window.scrollTo(u.left,u.top),s.Ay.setTimeout(n,function(){n.fullscreen=!1,n._fullScreenOffset=null},100)):(n.config.closeFocusVideoFocus||n.media.focus(),n.fullscreen=!1,n._fullScreenOffset=null),n.cssfullscreen)n.removeClass(F);else{var l=n._fullscreenEl;!l&&(n.root.contains(e.target)||e.target===n.root)&&(l=e.target),n.recoverFullStyle(n.root,l,F)}n._fullscreenEl=null,n.emit(h.Dx,!1)}}),(0,i.n8)(n,"_onWebkitbeginfullscreen",function(e){n._fullscreenEl=n.media,n.onFullscreenChange(e,!0)}),(0,i.n8)(n,"_onWebkitendfullscreen",function(e){n.onFullscreenChange(e,!1)}),(0,K.Ay)(n,eo),n.config=r,n._pluginInfoId=s.Ay.generateSessionId(),(0,X.P)(n);var o=n.constructor.defaultPreset,u=n.config.presets;if(u.length){var l=u.indexOf("default");l>=0&&o&&(u[l]=o)}else o&&u.push(o);n.userTimer=null,n.waitTimer=null,n.handleSource=!0,n._state=1,n.isError=!1,n._hasStart=!1,n.isSeeking=!1,n.isCanplay=!1,n._useAutoplay=!1,n.__startTime=-1,n.rotateDeg=0,n.isActive=!1,n.fullscreen=!1,n.cssfullscreen=!1,n.isRotateFullscreen=!1,n._fullscreenEl=null,n.timeSegments=[],n._cssfullscreenEl=null,n.curDefinition=null,n._orgCss="",n._fullScreenOffset=null,n._videoHeight=0,n._videoWidth=0,n.videoPos={pi:1,scale:0,rotate:-1,x:0,y:0,h:-1,w:-1,vy:0,vx:0},n.sizeInfo={width:0,height:0,left:0,top:0},n._accPlayed={t:0,acc:0,loopAcc:0},n._offsetInfo={currentTime:-1,duration:-1},n.innerContainer=null,n.controls=null,n.topBar=null,n.root=null,n.__i18n=J.init(n._pluginInfoId),a.A.os.isAndroid&&a.A.osVersion>0&&a.A.osVersion<6&&(n.config.autoplay=!1),n.database=new p,n.isUserActive=!1,n._onceSeekCanplay=null,n._isPauseBeforeSeek=0,n.innerStates={isActiveLocked:!1},n.instManager=eu,n._initMedia();var c=n.config.isNoRoot,f=!c&&n._initDOM();if(!c&&!f)return console.error(Error("can't find the dom which id is ".concat(n.config.id," or this.config.el does not exist"))),(0,i.GM)(n);C.init(n);var d=n.config,g=d.definition,y=void 0===g?{}:g;if(!d.url&&y.list&&y.list.length>0){var v=y.list.find(function(e){return e.definition&&e.definition===y.defaultDefinition});v||(y.defaultDefinition=y.list[0].definition,v=y.list[0]),n.config.url=v.url,n.curDefinition=v}return n._bindEvents(),n._registerPresets(),n._registerPlugins(),C.onPluginsReady(n),n.getInitDefinition(),n.setState(2),s.Ay.setTimeout(n,function(){n.emit(h.yE)},0),n.onReady&&n.onReady(),(n.config.videoInit||n.config.autoplay)&&(!n.hasStart||n.state<4)&&n.start(),n}return(0,i.B)(t,e),(0,i.j6)(t,[{key:"_initMedia",value:function(){var e=this.constructor.XgVideoProxy;if(e&&this.mediaConfig.mediaType===e.mediaType){var t=this.innerContainer||this.root;this.detachVideoEvents(this.media);var n=new e(t,this.config,this.mediaConfig);this.attachVideoEvents(n),this.media=n}this.media.setAttribute(_,this.playerId)}},{key:"_initDOM",value:function(){var e,t=this,n=this.config,i=n.id,r=n.el,o=n.isCustomRoot,u=n.controls,l=n.autoplay,c=n.isMobileSimulateMode;if(this.root=i?document.getElementById(i):null,!this.root)if(r&&1===r.nodeType)this.root=r;else{if(o)return this.emit(h.ff,new f("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),console.error("this.confg.id or this.config.el can't be empty"),!1;this.root=s.Ay.createDom("div","",{id:i,class:W})}var d=function(e){for(var t=Object.keys(en),n=0;n<t.length;n++){var i=en[t[n]];if(i.root===e)return i}return null}(this.root);d&&(X.A.logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),d.destroy()),this.root.setAttribute(_,this.playerId),null==(e=eu)||e.add(this),C.init(this),this._initBaseDoms();var g=this.constructor.XgVideoProxy;if(g&&this.mediaConfig.mediaType===g.mediaType){var p=this.innerContainer||this.root;this.detachVideoEvents(this.media);var y=new g(p,this.config,this.mediaConfig);this.attachVideoEvents(y),this.media=y}if(this.media.setAttribute(_,this.playerId),u){var v=u.root||null,m=C.register(this,q,{root:v});this.controls=m}var k="mobile"===c?"mobile":a.A.device;if(this.addClass("".concat("xgplayer"," ").concat(L," xgplayer-").concat(k," ").concat(u?"":"no-controls")),l?this.addClass(w):this.addClass(R),this.config.fluid){var b=this.config,A=b.width,E=b.height;("number"!=typeof A||"number"!=typeof E)&&(A=600,E=337.5);var T={width:"100%",height:"0","max-width":"100%","padding-top":"".concat(100*E/A,"%")};Object.keys(T).forEach(function(e){t.root.style[e]=T[e]})}else["width","height"].forEach(function(e){t.config[e]&&("number"!=typeof t.config[e]?t.root.style[e]=t.config[e]:t.root.style[e]="".concat(t.config[e],"px"))});var S=this.root.getBoundingClientRect(),O=S.width,x=S.height,P=S.left,I=S.top;return this.sizeInfo.width=O,this.sizeInfo.height=x,this.sizeInfo.left=P,this.sizeInfo.top=I,!0}},{key:"_initBaseDoms",value:function(){this.topBar=null,this.leftBar=null,this.rightBar=null,this.config.marginControls&&(this.innerContainer=s.Ay.createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer))}},{key:"_bindEvents",value:function(){var e=this;["focus","blur"].forEach(function(t){e.on(t,e["on"+t.charAt(0).toUpperCase()+t.slice(1)])}),y.forEach(function(t){document&&document.addEventListener(t,e.onFullscreenChange)}),a.A.os.isIos&&(this.media.addEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.addEventListener("webkitendfullscreen",this._onWebkitendfullscreen)),this.once(h.BY,this.resize),this.playFunc=function(){e.config.closeFocusVideoFocus||e.media.focus()},this.once(h.tr,this.playFunc)}},{key:"_unbindEvents",value:function(){var e=this;this.root&&this.root.removeEventListener("mousemove",this.mousemoveFunc),y.forEach(function(t){document.removeEventListener(t,e.onFullscreenChange)}),this.playFunc&&this.off(h.tr,this.playFunc),this.off(h.nQ,this.canPlayFunc),this.media.removeEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.removeEventListener("webkitendfullscreen",this._onWebkitendfullscreen)}},{key:"_clearUserTimer",value:function(){this.userTimer&&(s.Ay.clearTimeout(this,this.userTimer),this.userTimer=null)}},{key:"_startInit",value:function(e){var t=this;if(this.media){if((!e||""===e||"Array"===s.Ay.typeOf(e)&&0===e.length)&&(e="",this.emit(h.uv),X.A.logWarn("config.url is null, please get url and run player._startInit(url)"),this.config.nullUrlStart))return;this.handleSource&&(this._detachSourceEvents(this.media),"Array"===s.Ay.typeOf(e)&&e.length>0?this._attachSourceEvents(this.media,e):this.media.src&&this.media.src===e?e||this.media.removeAttribute("src"):this.media.src=e),"Number"===s.Ay.typeOf(this.config.volume)&&(this.volume=this.config.volume);var n=this.innerContainer?this.innerContainer:this.root;n&&this.media instanceof window.Element&&!n.contains(this.media.media||this.media)&&n.insertBefore(this.media.media||this.media,n.firstChild);var i=this.media.readyState;X.A.logInfo("_startInit readyState",i),this.config.autoplay&&(s.Ay.isMSE(this.media)||this.load(),(a.A.os.isIpad||a.A.os.isPhone)&&this.mediaPlay());var r=this.config.startTime;this.__startTime=r>0?r:-1,this.config.startTime=0,i>=2&&this.duration>0?this.canPlayFunc():this.on(h.nQ,this.canPlayFunc),(!this.hasStart||this.state<4)&&C.afterInit(this),this.hasStart=!0,this.setState(4),s.Ay.setTimeout(this,function(){t.emit(h.Wz)},0)}}},{key:"_registerPlugins",value:function(){var e=this,t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];this._loadingPlugins=[];var n=this.config.ignores||[],i=this.config.plugins||[],r=this.config.i18n||[];t&&J.extend(r,this.__i18n);var o=n.join("||").toLowerCase().split("||"),s=this.plugins;i.forEach(function(n){try{var i=n.plugin?n.plugin.pluginName:n.pluginName;if(i&&o.indexOf(i.toLowerCase())>-1)return null;if(!t&&s[i.toLowerCase()])return;if(n.lazy&&n.loader){var r=C.lazyRegister(e,n);n.forceBeforeInit&&(r.then(function(){e._loadingPlugins.splice(e._loadingPlugins.indexOf(r),1)}).catch(function(t){X.A.logError("_registerPlugins:loadingPlugin",t),e._loadingPlugins.splice(e._loadingPlugins.indexOf(r),1)}),e._loadingPlugins.push(r));return}return e.registerPlugin(n)}catch(e){X.A.logError("_registerPlugins:",e)}})}},{key:"_registerPresets",value:function(){var e=this;this.config.presets.forEach(function(t){V(e,t)})}},{key:"_getRootByPosition",value:function(e){var t=null;switch(e){case k.lP.ROOT_RIGHT:this.rightBar||(this.rightBar=s.Ay.createPositionBar("xg-right-bar",this.root)),t=this.rightBar;break;case k.lP.ROOT_LEFT:this.leftBar||(this.leftBar=s.Ay.createPositionBar("xg-left-bar",this.root)),t=this.leftBar;break;case k.lP.ROOT_TOP:!this.topBar&&(this.topBar=s.Ay.createPositionBar("xg-top-bar",this.root),this.config.topBarAutoHide&&s.Ay.addClass(this.topBar,"top-bar-autohide")),t=this.topBar;break;default:t=this.innerContainer||this.root}return t}},{key:"registerPlugin",value:function(e,t){var n=C.formatPluginInfo(e,t),i=n.PLUFGIN,r=n.options,o=this.config.plugins;C.checkPluginIfExits(i.pluginName,o)||o.push(i);var s=C.getRootByConfig(i.pluginName,this.config);s.root&&(r.root=s.root),s.position&&(r.position=s.position);var a=r.position?r.position:r.config&&r.config.position||i.defaultConfig&&i.defaultConfig.position;return!r.root&&"string"==typeof a&&a.indexOf("controls")>-1?this.controls&&this.controls.registerPlugin(i,r,i.pluginName):(r.root||(r.root="controls"===i.pluginName?this.root:this._getRootByPosition(a)),C.register(this,i,r))}},{key:"deregister",value:function(e){"string"==typeof e?C.unRegister(this,e):e instanceof b.A&&C.unRegister(this,e.pluginName)}},{key:"unRegisterPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.deregister(e),t&&this.removePluginFromConfig(e)}},{key:"removePluginFromConfig",value:function(e){var t;if("string"==typeof e?t=e:e instanceof b.A&&(t=e.pluginName),t){for(var n=this.config.plugins.length-1;n>-1;n--)if(this.config.plugins[n].pluginName.toLowerCase()===t.toLowerCase()){this.config.plugins.splice(n,1);break}}}},{key:"plugins",get:function(){return C.getPlugins(this)}},{key:"getPlugin",value:function(e){var t=C.findPlugin(this,e);return t&&t.pluginName?t:null}},{key:"addClass",value:function(e){this.root&&(s.Ay.hasClass(this.root,e)||s.Ay.addClass(this.root,e))}},{key:"removeClass",value:function(e){this.root&&s.Ay.removeClass(this.root,e)}},{key:"hasClass",value:function(e){if(this.root)return s.Ay.hasClass(this.root,e)}},{key:"setAttribute",value:function(e,t){this.root&&this.root.setAttribute(e,t)}},{key:"removeAttribute",value:function(e,t){this.root&&this.root.removeAttribute(e,t)}},{key:"start",value:function(e){var t=this;if(!(this.state>3))return e||this.config.url||this.getInitDefinition(),this.hasStart=!0,this.setState(3),this._registerPlugins(!1),C.beforeInit(this).then(function(){if(t.config){e||(e=t.url||t.config.url);var n=t._preProcessUrl(e);return t._startInit(n.url)}}).catch(function(e){throw e.fileName="player",e.lineNumber="236",X.A.logError("start:beforeInit:",e),e})}},{key:"switchURL",value:function(e,t){var n=this,i=e;"Object"===s.Ay.typeOf(e)&&(i=e.url),i=this._preProcessUrl(i).url;var r=this.currentTime;this.__startTime=r;var o=this.paused&&!this.isError;return this.src=i,new Promise(function(e,t){var r=function(e){n.off("timeupdate",s),n.off("canplay",s),t(e)},s=function(){n._seekToStartTime(),o&&n.pause(),n.off("error",r),e(!0)};if(n.once("error",r),!i)return void n.errorHandler("error",{code:6,message:"empty_src"});a.A.os.isAndroid?n.once("timeupdate",s):n.once("canplay",s),n.play()})}},{key:"videoPlay",value:function(){this.mediaPlay()}},{key:"mediaPlay",value:function(){var e=this;if(!this.hasStart&&this.state<4){this.removeClass(R),this.addClass(w),this.start(),this._useAutoplay=!0;return}this.state<6&&(this.removeClass(R),this.isCanplay||this.addClass(w));var n=(0,i.hz)(t,"play",this,3)([]);return void 0!==n&&n&&n.then?n.then(function(){e.removeClass(z),e.addClass(S),e.state<6&&(X.A.logInfo(">>>>playPromise.then"),e.setState(6),e.emit(h.KH))}).catch(function(t){if(X.A.logWarn(">>>>playPromise.catch",t.name),e.media&&e.media.error){e.onError(),e.removeClass(w);return}"NotAllowedError"===t.name&&(e._errorTimer=s.Ay.setTimeout(e,function(){e._errorTimer=null,e.emit(h.q_),e.addClass(z),e.removeClass(w),e.pause(),e.setState(5)},0))}):(X.A.logWarn("video.play not return promise"),this.state<6&&(this.setState(6),this.removeClass(z),this.removeClass(R),this.removeClass(w),this.addClass(S),this.emit(h.KH))),n}},{key:"mediaPause",value:function(){(0,i.hz)(t,"pause",this,3)([])}},{key:"videoPause",value:function(){(0,i.hz)(t,"pause",this,3)([])}},{key:"play",value:function(){var e=this;return this.removeClass(T),(0,K.Eu)(this,"play",function(){return e.mediaPlay()})}},{key:"pause",value:function(){var e=this;(0,K.Eu)(this,"pause",function(){(0,i.hz)(t,"pause",e,3)([])})}},{key:"seek",value:function(e,t){var n=this;if(!(!this.media||Number.isNaN(Number(e)))&&this.hasStart){var i=this.config,r=i.isSeekedPlay,o=i.seekedStatus,s=t||(r?"play":o);e=e<0?0:e>this.duration?parseInt(this.duration,10):e,this._isPauseBeforeSeek||(this._isPauseBeforeSeek=this.paused?2:1),this._onceSeekCanplay&&this.off(h.mQ,this._onceSeekCanplay),this._onceSeekCanplay=function(){switch(n.removeClass(w),n.isSeeking=!1,s){case"play":n.play();break;case"pause":n.pause();break;default:n._isPauseBeforeSeek>1||n.paused?n.pause():n.play()}n._isPauseBeforeSeek=0,n._onceSeekCanplay=null},this.once(h.mQ,this._onceSeekCanplay),this.state<6?(this.removeClass(R),this.currentTime=e,this.play()):this.currentTime=e}}},{key:"getInitDefinition",value:function(){var e=this,t=this.config,n=t.definition;!t.url&&n&&n.list&&n.list.length>0&&n.defaultDefinition&&n.list.map(function(t){t.definition===n.defaultDefinition&&(e.config.url=t.url,e.curDefinition=t)})}},{key:"changeDefinition",value:function(e,t){var n=this,r=this.config.definition;if(Array.isArray(null==r?void 0:r.list)&&r.list.forEach(function(t){(null==e?void 0:e.definition)===t.definition&&(n.curDefinition=t)}),null!=e&&e.bitrate&&"number"!=typeof e.bitrate&&(e.bitrate=parseInt(e.bitrate,10)||0),this.emit(h.vN,{from:t,to:e}),!this.hasStart){this.config.url=e.url;return}var o=this.switchURL(e.url,(0,i.T1)({seamless:!1!==r.seamless&&"undefined"!=typeof MediaSource&&"function"==typeof MediaSource.isTypeSupported},e));o&&o.then?o.then(function(){n.emit(h.AB,{from:t,to:e})}):this.emit(h.AB,{from:t,to:e})}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play()},this.once(h.BY,this.reloadFunc)}},{key:"resetState",value:function(){var e=this;this.hasStart=!1,this.isError=!1,this._useAutoplay=!1,this.mediaPause(),this._accPlayed.acc=0,this._accPlayed.t=0,this._accPlayed.loopAcc=0,[z,S,R,T,I,w,O,P,x].forEach(function(t){e.removeClass(t)}),this.addClass(R),this.emit(h.Ut)}},{key:"reset",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;if(this.resetState(),this.plugins&&(t.map(function(t){e.deregister(t)}),n)){var i=G();Object.keys(this.config).keys(function(t){"undefined"!==e.config[t]&&("plugins"===t||"presets"===t||"el"===t||"id"===t)&&(e.config[t]=i[t])})}}},{key:"destroy",value:function(){var e,n=this,r=this.innerContainer,o=this.root,a=this.media;if(a){var u=a.media||a;if(this.hasStart=!1,this._useAutoplay=!1,o&&o.removeAttribute(_),this.updateAcc("destroy"),this._unbindEvents(),this._detachSourceEvents(this.media),s.Ay.clearAllTimers(this),this.emit(h.N8),null==(e=eu)||e.remove(this),C.destroy(this),(0,K.Vj)(this),(0,i.hz)(t,"destroy",this,3)([]),this.fullscreen&&this._fullscreenEl===o&&this.exitFullscreen(),r)for(var l=r.children,c=0;c<l.length;c++)r.removeChild(l[c]);o&&!r&&u instanceof window.Node&&o.contains(u)&&o.removeChild(u),["topBar","leftBar","rightBar","innerContainer"].map(function(e){n[e]&&o.removeChild(n[e]),n[e]=null});var f=o?o.className.split(" "):[],d=o&&s.Ay.hasClass(o,W);f.length>0?o.className=f.filter(function(e){return 0>e.indexOf("xgplayer")}).join(" "):o&&(o.className=""),this.removeAttribute("data-xgfill"),["isSeeking","isCanplay","isActive","cssfullscreen","fullscreen"].forEach(function(e){n[e]=!1}),d&&this.root.parentNode&&this.root.parentNode.removeChild(this.root)}}},{key:"replay",value:function(){var e=this;this.removeClass(O),this.currentTime=0,this.isSeeking=!1,(0,K.Eu)(this,"replay",function(){e.once(h.mQ,function(){var t=e.mediaPlay();t&&t.catch&&t.catch(function(e){console.log(e)})}),e.emit(h.Wr),e.onPlay()})}},{key:"retry",value:function(){var e=this;this.removeClass(P),this.addClass(x),(0,K.Eu)(this,"retry",function(){var t=e.currentTime,n=e.config.url,i=s.Ay.isMSE(e.media)?{url:n}:e._preProcessUrl(n);e.src=i.url,e.config.isLive||(e.currentTime=t),e.once(h.nQ,function(){e.mediaPlay()})})}},{key:"changeFullStyle",value:function(e,t,n,i){e&&(i||(i=M),this._orgCss||(this._orgCss=s.Ay.filterStyleFromText(e)),s.Ay.addClass(e,n),t&&t!==e&&!this._orgPCss&&(this._orgPCss=s.Ay.filterStyleFromText(t),s.Ay.addClass(t,i),t.setAttribute(_,this.playerId)))}},{key:"recoverFullStyle",value:function(e,t,n,i){i||(i=M),this._orgCss&&(s.Ay.setStyleFromCsstext(e,this._orgCss),this._orgCss=""),s.Ay.removeClass(e,n),t&&t!==e&&this._orgPCss&&(s.Ay.setStyleFromCsstext(t,this._orgPCss),this._orgPCss="",s.Ay.removeClass(t,i),t.removeAttribute(_))}},{key:"getFullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget,t=this.root,n=this.media;if(("video"===e||"media"===e)&&(e=this[e]),e||(e=t),this._fullScreenOffset={top:s.Ay.scrollTop(),left:s.Ay.scrollLeft()},this._fullscreenEl=e,this._fullActionFrom="get",s.Ay.getFullScreenEl()===this._fullscreenEl)return this.onFullscreenChange(),Promise.resolve();try{for(var i=0;i<v.length;i++){var r=v[i];if(e[r]){var o="webkitRequestFullscreen"===r?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):e[r]();if(o&&o.then)return o;return Promise.resolve()}}if(n.fullscreenEnabled||n.webkitSupportsFullscreen)return n.webkitEnterFullscreen(),Promise.resolve();return Promise.reject(Error("call getFullscreen fail"))}catch(e){return Promise.reject(Error("call getFullscreen fail"))}}},{key:"exitFullscreen",value:function(e){this.isRotateFullscreen&&this.exitRotateFullscreen();var t=s.Ay.getFullScreenEl();if(this._fullscreenEl||t){this.root;var n=this.media;this._fullActionFrom="exit";try{for(var i=0;i<m.length;i++){var r=m[i];if(document[r]){var o=t?document[r]():"";if(o&&o.then)return o;return Promise.resolve()}}if(n&&n.webkitSupportsFullscreen)return n.webkitExitFullScreen(),Promise.resolve();return Promise.reject(Error("call exitFullscreen fail"))}catch(e){return Promise.reject(Error("call exitFullscreen fail"))}}}},{key:"getCssFullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget;this.isRotateFullscreen?this.exitRotateFullscreen():this.fullscreen&&this.exitFullscreen();var t=e?"".concat(B," ").concat(j):j;this.changeFullStyle(this.root,e,t);var n=this.config.fullscreen,i=void 0===n?{}:n;(!0===i.useCssFullscreen||"function"==typeof i.useCssFullscreen&&i.useCssFullscreen())&&(this.fullscreen=!0,this.emit(h.Dx,!0)),this._cssfullscreenEl=e,this.cssfullscreen=!0,this.emit(h.dQ,!0)}},{key:"exitCssFullscreen",value:function(){var e=this._cssfullscreenEl?"".concat(B," ").concat(j):j;if(this.fullscreen){var t=this.config.fullscreen,n=void 0===t?{}:t;!0===n.useCssFullscreen||"function"==typeof n.useCssFullscreen&&n.useCssFullscreen()?(this.recoverFullStyle(this.root,this._cssfullscreenEl,e),this.fullscreen=!1,this.emit(h.Dx,!1)):this.removeClass(e)}else this.recoverFullStyle(this.root,this._cssfullscreenEl,e);this._cssfullscreenEl=null,this.cssfullscreen=!1,this.emit(h.dQ,!1)}},{key:"getRotateFullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget;this.cssfullscreen&&this.exitCssFullscreen(e);var t=e?"".concat(B," ").concat(N):N;this._fullscreenEl=e||this.root,this.changeFullStyle(this.root,e,t,D),this.isRotateFullscreen=!0,this.fullscreen=!0,this.setRotateDeg(90),this._rootStyle=this.root.getAttribute("style"),this.root.style.width="".concat(window.innerHeight,"px"),this.emit(h.Dx,!0)}},{key:"exitRotateFullscreen",value:function(e){var t=this._fullscreenEl!==this.root?"".concat(B," ").concat(N):N;this.recoverFullStyle(this.root,this._fullscreenEl,t,D),this.isRotateFullscreen=!1,this.fullscreen=!1,this.setRotateDeg(0),this.emit(h.Dx,!1),this._rootStyle&&(this.root.style.style=this._rootStyle,this._rootStyle=!1)}},{key:"setRotateDeg",value:function(e){90===window.orientation||-90===window.orientation?this.rotateDeg=0:this.rotateDeg=e}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoHide:!this.config.closeDelayBlur,delay:this.config.inactive};if(this.isActive)return void this.onFocus(e);this.emit(h.Rj,(0,i.T1)({paused:this.paused,ended:this.ended},e))}},{key:"blur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ignorePaused:!1};if(!this.isActive)return void this.onBlur(e);this._clearUserTimer(),this.emit(h.m_,(0,i.T1)({paused:this.paused,ended:this.ended},e))}},{key:"onFocus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoHide:!0,delay:3e3},n=this.innerStates;if(this.isActive=!0,this.removeClass(L),this._clearUserTimer(),void 0!==t.isLock&&(n.isActiveLocked=t.isLock),!1===t.autoHide||!0===t.isLock||n.isActiveLocked)return void this._clearUserTimer();var i=t&&t.delay?t.delay:this.config.inactive;this.userTimer=s.Ay.setTimeout(this,function(){e.userTimer=null,e.blur()},i)}},{key:"onBlur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ignorePaused;if(!this.innerStates.isActiveLocked){var n=this.config.closePauseVideoFocus;this.isActive=!1,(void 0!==t&&t||n||!this.paused&&!this.ended)&&this.addClass(L)}}},{key:"onEmptied",value:function(){this.updateAcc("emptied")}},{key:"onCanplay",value:function(){this.removeClass(w),this.removeClass(P),this.removeClass(x),this.isCanplay=!0,this.waitTimer&&s.Ay.clearTimeout(this,this.waitTimer)}},{key:"onLoadeddata",value:function(){var e=this;this.isError=!1,this.isSeeking=!1,this.__startTime>0&&(this.duration>0?this._seekToStartTime():this.once(h.W5,function(){e._seekToStartTime()}))}},{key:"onLoadstart",value:function(){this.removeClass(P),this.isCanplay=!1}},{key:"onPlay",value:function(){7===this.state&&this.setState(6),this.removeClass(T),this.ended&&this.removeClass(O),this.config.closePlayVideoFocus||this.focus()}},{key:"onPause",value:function(){this.addClass(T),this.updateAcc("pause"),this.config.closePauseVideoFocus||(this._clearUserTimer(),this.focus())}},{key:"onEnded",value:function(){this.updateAcc("ended"),this.addClass(O),this.setState(7)}},{key:"onError",value:function(){this.isError=!0,this.updateAcc("error"),this.removeClass(z),this.removeClass(R),this.removeClass(w),this.removeClass(x),this.addClass(P)}},{key:"onSeeking",value:function(){this.isSeeking||this.updateAcc("seeking"),this.isSeeking=!0,this.addClass(U)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&s.Ay.clearTimeout(this,this.waitTimer),this.removeClass(x),this.removeClass(U)}},{key:"onWaiting",value:function(){var e=this;this.waitTimer&&s.Ay.clearTimeout(this,this.waitTimer),this.updateAcc("waiting"),this.waitTimer=s.Ay.setTimeout(this,function(){e.addClass(x),e.emit(h.F5),s.Ay.clearTimeout(e,e.waitTimer),e.waitTimer=null},this.config.minWaitDelay)}},{key:"onPlaying",value:function(){var e=this;this.isError=!1,[R,T,O,P,I,x].forEach(function(t){e.removeClass(t)}),this._accPlayed.t||this.paused||this.ended||(this._accPlayed.t=new Date().getTime())}},{key:"onTimeupdate",value:function(){!this._videoHeight&&this.media.videoHeight&&this.resize(),(this.waitTimer||this.hasClass(x))&&this.media.readyState>2&&(this.removeClass(x),s.Ay.clearTimeout(this,this.waitTimer),this.waitTimer=null),!this.paused&&5===this.state&&this.duration&&(this.setState(6),this.emit(h.KH)),this._accPlayed.t||this.paused||this.ended||(this._accPlayed.t=new Date().getTime())}},{key:"onVolumechange",value:function(){"Number"===s.Ay.typeOf(this.config.volume)&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"emitUserAction",value:function(e,t,n){if(this.media&&t&&e){var r="String"===s.Ay.typeOf(e)?e:e.type||"";n.props&&"Array"!==s.Ay.typeOf(n.props)&&(n.props=[n.props]),this.emit(h.vB,(0,i.T1)({eventType:r,action:t,currentTime:this.currentTime,duration:this.duration,ended:this.ended,event:e},n))}}},{key:"updateAcc",value:function(e){if(this._accPlayed.t){var t=new Date().getTime()-this._accPlayed.t;this._accPlayed.acc+=t,this._accPlayed.t=0,("ended"===e||this.ended)&&(this._accPlayed.loopAcc=this._accPlayed.acc)}}},{key:"checkBuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{startDiff:0,endDiff:0},n=t||{},i=n.startDiff,r=void 0===i?0:i,o=n.endDiff,s=void 0===o?0:o,a=this.media.buffered;if(!a||0===a.length||!this.duration)return!0;for(var u=e||this.media.currentTime||.2,l=a.length,c=0;c<l;c++)if(a.start(c)+r<=u&&a.end(c)-s>u)return!0;return!1}},{key:"resizePosition",value:function(){var e=this.videoPos,t=e.vy,n=e.vx,i=e.h,r=e.w,o=this.videoPos.rotate;if(!(o<0)||!(i<0)||!(r<0)){var a=this.videoPos._pi;if(!a&&this.media.videoHeight&&(a=this.media.videoWidth/this.media.videoHeight*100),a){this.videoPos.pi=a;var u={rotate:o=o<0?0:o},l=0,c=0,f=1,h=Math.abs(o/90),d=this.root,g=this.innerContainer,p=d.offsetWidth,y=g?g.offsetHeight:d.offsetHeight,v=y,m=p;if(h%2==0)u.scale=f=i>0?100/i:r>0?100/r:1,l=t>0?(100-i)/2-t:0,u.y=2===h?0-l:l,c=n>0?(100-r)/2-n:0,u.x=2===h?0-c:c,this.media.style.width="".concat(m,"px"),this.media.style.height="".concat(v,"px");else if(h%2==1){m=y,v=p;var _=y-p;c=-_/2/m*100,u.x=3===h?c+t/2:c-t/2,l=_/2/v*100,u.y=3===h?l+n/2:l-n/2,u.scale=f,this.media.style.width="".concat(m,"px"),this.media.style.height="".concat(v,"px")}var k=s.Ay.getTransformStyle(u,this.media.style.transform||this.media.style.webkitTransform);this.media.style.transform=k,this.media.style.webkitTransform=k}}}},{key:"position",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{h:0,y:0,x:0,w:0};if(this.media&&e&&e.h){var t=this.videoPos;t.h=100*e.h||0,t.w=100*e.w||0,t.vx=100*e.x||0,t.vy=100*e.y||0,this.resizePosition()}}},{key:"setConfig",value:function(e){var t=this;e&&Object.keys(e).map(function(n){if("plugins"!==n){t.config[n]=e[n];var i=t.plugins[n.toLowerCase()];i&&"Function"===s.Ay.typeOf(i.setConfig)&&i.setConfig(e[n])}})}},{key:"playNext",value:function(e){var t=this;this.resetState(),this.setConfig(e),this._currentTime=0,this._duration=0,(0,K.Eu)(this,"playnext",function(){t.start(),t.emit(h.A2,e)})}},{key:"resize",value:function(){var e=this;if(this.media&&this.root){var t=this.root.getBoundingClientRect();this.sizeInfo.width=t.width,this.sizeInfo.height=t.height,this.sizeInfo.left=t.left,this.sizeInfo.top=t.top;var n=this.media,i=n.videoWidth,r=n.videoHeight,o=this.config,s=o.fitVideoSize,a=o.videoFillMode;if(("fill"===a||"cover"===a||"contain"===a)&&this.setAttribute("data-xgfill",a),r&&i){this._videoHeight=r,this._videoWidth=i;var u=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,l=t.width,c=t.height-u,f=parseInt(i/r*1e3,10),d=parseInt(l/c*1e3,10),g=l,p=c,y={};"auto"===s&&d>f||"fixWidth"===s?(p=l/f*1e3,this.config.fluid?y.paddingTop="".concat(100*p/g,"%"):y.height="".concat(p+u,"px")):("auto"===s&&d<f||"fixHeight"===s)&&(g=f*c/1e3,y.width="".concat(g,"px")),this.fullscreen||this.cssfullscreen||Object.keys(y).forEach(function(t){e.root.style[t]=y[t]}),("fillHeight"===a&&d<f||"fillWidth"===a&&d>f)&&this.setAttribute("data-xgfill","cover");var v={videoScale:f,vWidth:g,vHeight:p,cWidth:g,cHeight:p+u};this.resizePosition(),this.emit(h.F4,v)}}}},{key:"updateObjectPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.media.updateObjectPosition)return void this.media.updateObjectPosition(e,t);this.media.style.objectPosition="".concat(100*e,"% ").concat(100*t,"%")}},{key:"setState",value:function(e){X.A.logInfo("setState","state from:".concat(et[this.state]," to:").concat(et[e])),this._state=e}},{key:"_preProcessUrl",value:function(e,t){var n=this.config,i=n.preProcessUrl,r=Object.assign({},n.preProcessUrlOptions,t);return s.Ay.isBlob(e)||"function"!=typeof i?{url:e}:i(e,r)}},{key:"_seekToStartTime",value:function(){this.__startTime>0&&this.duration>0&&(this.currentTime=this.__startTime>this.duration?this.duration:this.__startTime,this.__startTime=-1)}},{key:"state",get:function(){return this._state}},{key:"isFullscreen",get:function(){return this.fullscreen}},{key:"isCssfullScreen",get:function(){return this.cssfullscreen}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){"boolean"==typeof e&&(this._hasStart=e,!1===e&&this.setState(2),this.emit("hasstart"))}},{key:"isPlaying",get:function(){return 6===this._state||7===this._state},set:function(e){e?this.setState(6):this._state>=6&&this.setState(4)}},{key:"definitionList",get:function(){return this.config&&this.config.definition&&this.config.definition.list||[]},set:function(e){var t=this,n=this.config.definition,i=null,r=null;n.list=e,this.emit("resourceReady",e),e.forEach(function(e){var o;(null==(o=t.curDefinition)?void 0:o.definition)===e.definition&&(i=e),n.defaultDefinition===e.definition&&(r=e)}),!r&&e.length>0&&(r=e[0]),i?this.changeDefinition(i):r&&this.changeDefinition(r)}},{key:"videoFrameInfo",get:function(){var e={total:0,dropped:0,corrupted:0,droppedRate:0,droppedDuration:0};if(!this.media||!this.media.getVideoPlaybackQuality)return e;var t=this.media.getVideoPlaybackQuality();return e.dropped=t.droppedVideoFrames||0,e.total=t.totalVideoFrames||0,e.corrupted=t.corruptedVideoFrames||0,e.total>0&&(e.droppedRate=e.dropped/e.total*100,e.droppedDuration=parseInt(this.cumulateTime/e.total*e.dropped,0)),e}},{key:"lang",get:function(){return this.config.lang},set:function(e){if(0===J.langKeys.filter(function(t){return t===e}).length&&"zh"!==e)return void console.error("Sorry, set lang fail, because the language [".concat(e,"] is not supported now, list of all supported languages is [").concat(J.langKeys.join(),"] "));this.config.lang=e,C.setLang(e,this)}},{key:"i18n",get:function(){var e=this.config.lang;return"zh"===e&&(e="zh-cn"),this.__i18n.lang[e]||this.__i18n.lang.en}},{key:"i18nKeys",get:function(){return this.__i18n.textKeys||{}}},{key:"version",get:function(){return u}},{key:"playerId",get:function(){return this._pluginInfoId}},{key:"url",get:function(){return this.__url||this.config.url},set:function(e){this.__url=e}},{key:"poster",get:function(){return this.plugins.poster?this.plugins.poster.config.poster:this.config.poster},set:function(e){this.plugins.poster&&this.plugins.poster.update(e)}},{key:"readyState",get:function(){return(0,i.hz)(t,"readyState",this,1)}},{key:"error",get:function(){var e=(0,i.hz)(t,"error",this,1);return this.i18n[e]||e}},{key:"networkState",get:function(){return(0,i.hz)(t,"networkState",this,1)}},{key:"fullscreenChanging",get:function(){return null!==this._fullScreenOffset}},{key:"cumulateTime",get:function(){var e=this._accPlayed,t=e.acc,n=e.t;return n?new Date().getTime()-n+t:t}},{key:"zoom",get:function(){return this.config.zoom},set:function(e){this.config.zoom=e}},{key:"videoRotateDeg",get:function(){return this.videoPos.rotate},set:function(e){(e=s.Ay.convertDeg(e))%90==0&&e!==this.videoPos.rotate&&(this.videoPos.rotate=e,this.resizePosition())}},{key:"avgSpeed",get:function(){return ea},set:function(e){ea=e}},{key:"realTimeSpeed",get:function(){return es},set:function(e){es=e}},{key:"offsetCurrentTime",get:function(){return this._offsetInfo.currentTime>-1?this._offsetInfo.currentTime:this.currentTime},set:function(e){this._offsetInfo.currentTime=e}},{key:"offsetDuration",get:function(){return this._offsetInfo.duration>-1?this._offsetInfo.duration:this.duration},set:function(e){this._offsetInfo.duration=e||0}},{key:"hook",value:function(e,t){return K.A_.call.apply(K.A_,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,t){return K.uQ.call.apply(K.uQ,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,t){return K.j.call.apply(K.j,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(e,t,n){for(var i=arguments.length,r=Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];return K.tC.call.apply(K.tC,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removePluginHooks",value:function(e,t,n){for(var i=arguments.length,r=Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];return K.oq.call.apply(K.oq,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setUserActive",value:function(e,t){var n;"boolean"==typeof t&&t!==this.muted&&(this.addInnerOP("volumechange"),s.Ay.typeOf(t)===Boolean&&(this.muted=t)),null==(n=eu)||n.setActive(this.playerId,e)}}],[{key:"version",get:function(){return u}},{key:"debugger",get:function(){return X.A.config.debug},set:function(e){X.A.config.debug=e}},{key:"instManager",get:function(){return eu},set:function(e){eu=e}},{key:"getCurrentUserActivePlayerId",value:function(){var e;return null==(e=eu)?void 0:e.getActiveId()}},{key:"setCurrentUserActive",value:function(e,t){var n;null==(n=eu)||n.setActive(e,t)}},{key:"isHevcSupported",value:function(){return a.A.isHevcSupported()}},{key:"probeConfigSupported",value:function(e){return a.A.probeConfigSupported(e)}},{key:"install",value:function(e,n){t.plugins||(t.plugins={}),t.plugins[e]||(t.plugins[e]=n)}},{key:"use",value:function(e,n){t.plugins||(t.plugins={}),t.plugins[e]=n}}])}(g);(0,i.n8)(el,"defaultPreset",null),(0,i.n8)(el,"XgVideoProxy",null),el.instManager=er.getInstance()},5653:function(e,t,n){"use strict";n.d(t,{A:function(){return u}});var i=n(94686),r=n(37545),o=n(77102),s=n(78206);function a(e,t){o.A.logError("[".concat(e,"] event or callback cant be undefined or null when call ").concat(t))}var u=(0,i.j6)(function e(t){(0,i.xs)(this,e),r.Ay.checkIsFunction(this.beforeCreate)&&this.beforeCreate(t),(0,s.Ay)(this),this.__args=t,this.__events={},this.__onceEvents={},this.config=t.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(t)},[{key:"beforeCreate",value:function(e){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(e){this.player=e.player,this.playerConfig=e.player&&e.player.config,this.pluginName=e.pluginName?e.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=e.player&&e.player.logger}},{key:"updateLang",value:function(e){e||(e=this.lang)}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"domEventType",get:function(){var e=r.Ay.checkTouchSupport()?"touch":"mouse";return this.playerConfig&&("touch"===this.playerConfig.domEventType||"mouse"===this.playerConfig.domEventType)&&(e=this.playerConfig.domEventType),e}},{key:"on",value:function(e,t){var n=this;if(!e||!t||!this.player)return void a(this.pluginName,"plugin.on(event, callback)");"string"==typeof e?(this.__events[e]=t,this.player.on(e,t)):Array.isArray(e)&&e.forEach(function(e){n.__events[e]=t,n.player.on(e,t)})}},{key:"once",value:function(e,t){var n=this;if(!e||!t||!this.player)return void a(this.pluginName,"plugin.once(event, callback)");"string"==typeof e?(this.__onceEvents[e]=t,this.player.once(e,t)):Array.isArray(e)&&e.forEach(function(i){n.__onceEvents[i]=t,n.player.once(e,t)})}},{key:"off",value:function(e,t){var n=this;if(!e||!t||!this.player)return void a(this.pluginName,"plugin.off(event, callback)");"string"==typeof e?(delete this.__events[e],this.player.off(e,t)):Array.isArray(e)&&e.forEach(function(i){delete n.__events[e],n.player.off(i,t)})}},{key:"offAll",value:function(){var e=this;["__events","__onceEvents"].forEach(function(t){Object.keys(e[t]).forEach(function(n){e[t][n]&&e.off(n,e[t][n]),n&&delete e[t][n]})}),this.__events={},this.__onceEvents={}}},{key:"emit",value:function(e){var t;if(this.player){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=this.player).emit.apply(t,[e].concat(i))}}},{key:"emitUserAction",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.player){var r=(0,i.T1)((0,i.T1)({},n),{},{pluginName:this.pluginName});this.player.emitUserAction(e,t,r)}}},{key:"hook",value:function(e,t){return s.A_.call.apply(s.A_,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return s.uQ.call.apply(s.uQ,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return s.j.call.apply(s.j,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(this.player)return n&&(t.pluginName=n),this.player.registerPlugin({plugin:e,options:t})}},{key:"getPlugin",value:function(e){return this.player?this.player.getPlugin(e):null}},{key:"__destroy",value:function(){var e=this,t=this.player,n=this.pluginName;this.offAll(),r.Ay.clearAllTimers(this),r.Ay.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map(function(t){e[t]=null}),t.unRegisterPlugin(n),(0,s.Vj)(this)}}],[{key:"defineGetterOrSetter",value:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&Object.defineProperty(e,n,t[n])}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}])},78206:function(e,t,n){"use strict";n.d(t,{A_:function(){return o},Ay:function(){return c},Eu:function(){return h},Vj:function(){return f},j:function(){return a},oq:function(){return l},tC:function(){return u},uQ:function(){return s}});var i=n(94686);function r(e,t,n){for(var i=arguments.length,r=Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];var s=t.call.apply(t,[e].concat(r));n&&"function"==typeof n&&(s&&s.then?s.then(function(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];n.call.apply(n,[e].concat(i))}):n.call.apply(n,[e].concat(r)))}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),this.__hooks[e]||(this.__hooks[e]=null),(function(){var o=arguments,s=this;if(n.pre)try{(a=n.pre).call.apply(a,[this].concat(Array.prototype.slice.call(arguments)))}catch(t){throw t.message="[pluginName: ".concat(this.pluginName,":").concat(e,":pre error] >> ").concat(t.message),t}if(this.__hooks&&this.__hooks[e])try{var a,u,l=(u=this.__hooks[e]).call.apply(u,[this,this].concat(Array.prototype.slice.call(arguments)));l?l.then?l.then(function(e){!1!==e&&r.apply(void 0,[s,t,n.next].concat((0,i.Og)(o)))}).catch(function(e){throw e}):r.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments))):void 0===l&&r.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments)))}catch(t){throw t.message="[pluginName: ".concat(this.pluginName,":").concat(e,"] >> ").concat(t.message),t}else r.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments)))}).bind(this)}function s(e,t){var n=this.__hooks;if(n)return n.hasOwnProperty(e)?(n&&(n[e]=t),!0):(console.warn("has no supported hook which name [".concat(e,"]")),!1)}function a(e,t){var n=this.__hooks;n&&delete n[e]}function u(e){if(this.plugins&&this.plugins[e.toLowerCase()]){for(var t=this.plugins[e.toLowerCase()],n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t.useHooks&&t.useHooks.apply(t,i)}}function l(e){if(this.plugins&&this.plugins[e.toLowerCase()]){var t=this.plugins[e.toLowerCase()];if(t){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t.removeHooks&&t.removeHooks.apply(t,i)}}}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.__hooks={},t&&t.map(function(t){e.__hooks[t]=null}),Object.defineProperty(e,"hooks",{get:function(){return e.__hooks&&Object.keys(e.__hooks).map(function(t){if(e.__hooks[t])return t})}})}function f(e){e.__hooks=null}function h(e,t,n){for(var i=arguments.length,r=Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];if(!e.__hooks||!e.__hooks[t])return n.call.apply(n,[e,e].concat(r));var s,a=(s=e.__hooks[t]).call.apply(s,[e,e].concat(r));if(a&&a.then)a.then(function(t){return!1===t?null:n.call.apply(n,[e,e].concat(r))}).catch(function(e){console.warn("[runHooks]".concat(t," reject"),e.message)});else if(!1!==a)return n.call.apply(n,[e,e].concat(r))}},51371:function(e,t,n){"use strict";n.d(t,{Ay:function(){return g},lP:function(){return c}});var i=n(94686),r=n(5653),o=n(15630),s=n.n(o),a=n(77102),u=n(37545),l={CONTROLS:"controls",ROOT:"root"},c={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"},f="xg-icon-disable";function h(e){return!!e&&e.indexOf&&/^(?:http|data:|\/)/.test(e)}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=null;if(e instanceof window.Element)return u.Ay.addClass(e,n),Object.keys(i).map(function(t){e.setAttribute(t,i[t])}),e;if(h(e)||h(e.url))return i.src=h(e)?e:e.url||"",o=u.Ay.createDom(e.tag||"img","",i,"xg-img ".concat(n));if("function"==typeof e)try{if((o=e())instanceof window.Element)return u.Ay.addClass(o,n),Object.keys(i).map(function(e){o.setAttribute(e,i[e])}),o;return a.A.logWarn("warn>>icons.".concat(t," in config of plugin named [").concat(r,"] is a function mast return an Element Object")),null}catch(e){return a.A.logError("Plugin named [".concat(r,"]:createIcon"),e),null}return"string"==typeof e?u.Ay.createDomFromHtml(e,i,n):(a.A.logWarn("warn>>icons.".concat(t," in config of plugin named [").concat(r,"] is invalid")),null)}var g=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.xs)(this,t),(e=(0,i.qW)(this,t,[n])).__delegates=[],e}return(0,i.B)(t,e),(0,i.j6)(t,[{key:"__init",value:function(e){(0,i.hz)(t,"__init",this,3)([e]);var n=e.root,r=null;if(this.icons={},this.root=null,this.parent=null,e.root){o=this.registerIcons()||{},s=this,l=s.config.icons||s.playerConfig.icons,Object.keys(o).map(function(e){var t,n,r,a,u=o[e],c=u&&u.class?u.class:"",f=u&&u.attr?u.attr:{},h=null;l&&l[e]&&(t=l[e],n=c,c="object"===(0,i.uk)(t)&&t.class&&"string"==typeof t.class?"".concat(n," ").concat(t.class):n,r=l[e],a=f,"object"===(0,i.uk)(r)&&r.attr&&"object"===(0,i.uk)(r.attr)&&Object.keys(r.attr).map(function(e){a[e]=r.attr[e]}),f=a,h=d(l[e],e,c,f,s.pluginName)),!h&&u&&(h=d(u.icon?u.icon:u,f,c,{},s.pluginName)),s.icons[e]=h}),this.langText={},c=this.registerLanguageTexts()||{},f=this,Object.keys(c).map(function(e){Object.defineProperty(f.langText,e,{get:function(){var t=f.lang,n=f.i18n;return n[e]?n[e]:c[e]&&c[e][t]||""}})});var o,s,l,c,f,h="";try{h=this.render()}catch(e){throw a.A.logError("Plugin:".concat(this.pluginName,":render"),e),Error("Plugin:".concat(this.pluginName,":render:").concat(e.message))}if(h)(r=t.insert(h,n,e.index)).setAttribute("data-index",e.index);else{if(!e.tag)return;(r=u.Ay.createDom(e.tag,"",e.attr,e.name)).setAttribute("data-index",e.index),n.appendChild(r)}this.root=r,this.parent=n;var g=this.config.attr||{},p=this.config.style||{};this.setAttr(g),this.setStyle(p),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var e=this;if(this.root){this._children=[];var t=this.children();t&&"object"===(0,i.uk)(t)&&Object.keys(t).length>0&&Object.keys(t).map(function(n){var r,o,s=t[n],a={root:e.root};"function"==typeof s?(r=e.config[n]||{},o=s):"object"===(0,i.uk)(s)&&"function"==typeof s.plugin&&(r=s.options?u.Ay.deepCopy(e.config[n]||{},s.options):e.config[n]||{},o=s.plugin),a.config=r,void 0!==r.index&&(a.index=r.index),r.root&&(a.root=r.root),e.registerPlugin(o,a,n)})}}},{key:"updateLang",value:function(e){e||(e=this.lang);var t=this.root,n=this.i18n,i=this.langText;t&&function e(t,n){for(var i=0;i<t.children.length;i++)t.children[i].children.length>0?e(t.children[i],n):n(t.children[i])}(t,function(t){var r=t.getAttribute&&t.getAttribute("lang-key");if(r){var o=n[r.toUpperCase()]||i[r];o&&(t.innerHTML="function"==typeof o?o(e):o)}})}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.i18n||{},i=this.langText;e.setAttribute&&e.setAttribute("lang-key",t);var r=n[t]||i[t]||"";r&&(e.innerHTML=r)}},{key:"plugins",value:function(){return this._children}},{key:"disable",value:function(){this.config.disable=!0,u.Ay.addClass(this.find(".xgplayer-icon"),f)}},{key:"enable",value:function(){this.config.disable=!1,u.Ay.removeClass(this.find(".xgplayer-icon"),f)}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";n.root=n.root||this.root;var o=(0,i.hz)(t,"registerPlugin",this,3)([e,n,r]);return this._children.push(o),o}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(e){if(this.root)return this.root.querySelector(e)}},{key:"bind",value:function(e,n,i){var r=this;if(arguments.length<3&&"function"==typeof n)Array.isArray(e)?e.forEach(function(e){r.bindEL(e,n)}):this.bindEL(e,n);else{var o=t.delegate.call(this,this.root,e,n,i);this.__delegates=this.__delegates.concat(o)}}},{key:"unbind",value:function(e,t){var n=this;if(arguments.length<3&&"function"==typeof t)Array.isArray(e)?e.forEach(function(e){n.unbindEL(e,t)}):this.unbindEL(e,t);else for(var i="".concat(e,"_").concat(t),r=0;r<this.__delegates.length;r++)if(this.__delegates[r].key===i){this.__delegates[r].destroy(),this.__delegates.splice(r,1);break}}},{key:"setStyle",value:function(e,t){var n=this;if(this.root)if("String"===u.Ay.typeOf(e))return this.root.style[e]=t;else"Object"===u.Ay.typeOf(e)&&Object.keys(e).map(function(t){n.root.style[t]=e[t]})}},{key:"setAttr",value:function(e,t){var n=this;if(this.root)if("String"===u.Ay.typeOf(e))return this.root.setAttribute(e,t);else"Object"===u.Ay.typeOf(e)&&Object.keys(e).map(function(t){n.root.setAttribute(t,e[t])})}},{key:"setHtml",value:function(e,t){this.root&&(this.root.innerHTML=e,"function"==typeof t&&t())}},{key:"bindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(e)in this.root&&"function"==typeof t&&this.root.addEventListener(e,t,n)}},{key:"unbindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(e)in this.root&&"function"==typeof t&&this.root.removeEventListener(e,t,n)}},{key:"show",value:function(e){if(this.root&&(this.root.style.display=void 0!==e?e:"block","none"===window.getComputedStyle(this.root,null).getPropertyValue("display")))return this.root.style.display="block"}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(e,t){if(!this.root)return null;if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!t||!(t instanceof window.Element))return null;try{if("string"==typeof e)return this.find(e).appendChild(t);return e.appendChild(t)}catch(e){return a.A.logError("Plugin:appendChild",e),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var e=this,n=this.player;this.__delegates.map(function(e){e.destroy()}),this.__delegates=[],this._children instanceof Array&&(this._children.map(function(e){n.unRegisterPlugin(e.pluginName)}),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),(0,i.hz)(t,"__destroy",this,3)([]),this.icons={},["root","parent"].map(function(t){e[t]=null})}}],[{key:"insert",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=t.children.length,r=Number(n),o=e instanceof window.Node;if(!i)return o?t.appendChild(e):t.insertAdjacentHTML("beforeend",e),t.children[t.children.length-1];for(var s=0,a=null,u="";s<i;s++){var l=Number((a=t.children[s]).getAttribute("data-index"));if(l>=r){u="beforebegin";break}l<r&&(u="afterend")}return o?"afterend"===u?t.appendChild(e):t.insertBefore(e,a):a.insertAdjacentHTML(u,e),"afterend"===u?t.children[t.children.length-1]:t.children[s]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=[];if(e instanceof window.Node&&"function"==typeof i)if(Array.isArray(n))n.forEach(function(n){var a=s()(e,t,n,i,r);a.key="".concat(t,"_").concat(n),o.push(a)});else{var a=s()(e,t,n,i,r);a.key="".concat(t,"_").concat(n),o.push(a)}return o}},{key:"ROOT_TYPES",get:function(){return l}},{key:"POSITIONS",get:function(){return c}}])}(r.A)},77102:function(e,t,n){"use strict";n.d(t,{A:function(){return o},P:function(){return s}});var i="undefined"!=typeof window&&window.location&&window.location.href.indexOf("xgplayerdebugger=1")>-1,r="%c[xgplayer]",o={config:{debug:3*!!i},logInfo:function(e){for(var t,n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];this.config.debug>=3&&(t=console).log.apply(t,[r,"color: #525252; background-color: #90ee90;",e].concat(i))},logWarn:function(e){for(var t,n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];this.config.debug>=1&&(t=console).warn.apply(t,[r,"color: #525252; background-color: yellow; ",e].concat(i))},logError:function(e){if(!(this.config.debug<1)){for(var t,n=this.config.debug>=2?"trace":"error",i=arguments.length,o=Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];(t=console)[n].apply(t,[r,"color: #525252; background-color: red;",e].concat(o))}}};function s(e){e.logInfo=o.logInfo.bind(e),e.logWarn=o.logWarn.bind(e),e.logError=o.logError.bind(e)}},90882:function(e,t,n){"use strict";n.d(t,{A:function(){return s}});var i=/(Android)\s([\d.]+)/,r=/(Version)\/([\d.]+)/,o=["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"],s={get device(){return s.os.isPc?"pc":"mobile"},get browser(){if("undefined"==typeof navigator)return"";var a=navigator.userAgent.toLowerCase(),u={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(u).filter(function(e){return u[e].test(a)}))[0]},get os(){if("undefined"==typeof navigator)return{};var l=navigator.userAgent,c=/(?:Windows Phone)/.test(l),f=/(?:SymbianOS)/.test(l)||c,h=/(?:Android)/.test(l),d=/(?:Firefox)/.test(l),g=/(?:iPad|PlayBook)/.test(l)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,p=g||h&&!/(?:Mobile)/.test(l)||d&&/(?:Tablet)/.test(l),y=/(?:iPhone)/.test(l)&&!p;return{isTablet:p,isPhone:y,isIpad:g,isIos:y||g,isAndroid:h,isPc:!y&&!h&&!f&&!p,isSymbian:f,isWindowsPhone:c,isFireFox:d}},get osVersion(){if("undefined"==typeof navigator)return 0;var v=navigator.userAgent,m="",_=(m=/(?:iPhone)|(?:iPad|PlayBook)/.test(v)?r:i)?m.exec(v):[];if(_&&_.length>=3){var k=_[2].split(".");return k.length>0?parseInt(k[0]):0}return 0},get isWeixin(){if("undefined"==typeof navigator)return!1;if(/(micromessenger)\/([\d.]+)/.exec(navigator.userAgent.toLocaleLowerCase()))return!0;return!1},isSupportMP4:function(){var e={isSupport:!1,mime:""};if("undefined"==typeof document)return e;if(this.supportResult)return this.supportResult;var t=document.createElement("video");return"function"==typeof t.canPlayType&&o.map(function(n){"probably"===t.canPlayType('video/mp4; codecs="'.concat(n,'"'))&&(e.isSupport=!0,e.mime+="||".concat(n))}),this.supportResult=e,t=null,e},isMSESupport:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'video/mp4; codecs="avc1.42E01E,mp4a.40.2"';if("undefined"==typeof MediaSource||!MediaSource)return!1;try{return MediaSource.isTypeSupported(e)}catch(t){return this._logger.error(e,t),!1}},isHevcSupported:function(){return"undefined"!=typeof MediaSource&&!!MediaSource.isTypeSupported&&(MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"'))},probeConfigSupported:function(e){var t={supported:!1,smooth:!1,powerEfficient:!1};if(!e||"undefined"==typeof navigator)return Promise.resolve(t);if(navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo)return navigator.mediaCapabilities.decodingInfo(e);var n=e.video||{},i=e.audio||{};try{var r=MediaSource.isTypeSupported(n.contentType),o=MediaSource.isTypeSupported(i.contentType);return Promise.resolve({supported:r&&o,smooth:!1,powerEfficient:!1})}catch(e){return Promise.resolve(t)}}}},37545:function(e,t,n){"use strict";n.d(t,{Dq:function(){return c},Ay:function(){return s},Xo:function(){return l},Zt:function(){return f},nF:function(){return u}});var i=n(94686),r=n(77102),o=(0,i.j6)(function e(t){(0,i.xs)(this,e),this.bufferedList=t},[{key:"start",value:function(e){return this.bufferedList[e].start}},{key:"end",value:function(e){return this.bufferedList[e].end}},{key:"length",get:function(){return this.bufferedList.length}}]),s={};function a(e){var t=(0,i.uk)(e);return null!==e&&("object"===t||"function"===t)}function u(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw TypeError("Expected a function");return a(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),function(e,t,n){var i,r,o,s,u,l,c=0,f=!1,h=!1,d=!0,g=!t&&0!==t&&"function"==typeof window.requestAnimationFrame;if("function"!=typeof e)throw TypeError("Expected a function");function p(t){var n=i,o=r;return i=r=void 0,c=t,s=e.apply(o,n)}function y(e,t){return g?(window.cancelAnimationFrame(u),window.requestAnimationFrame(e)):setTimeout(e,t)}function v(e){var n=e-l,i=e-c;return void 0===l||n>=t||n<0||h&&i>=o}function m(){var e,n,i,r=Date.now();if(v(r))return _(r);u=y(m,(e=r-l,n=r-c,i=t-e,h?Math.min(i,o-n):i))}function _(e){return(u=void 0,d&&i)?p(e):(i=r=void 0,s)}function k(){for(var e,n=Date.now(),o=v(n),a=arguments.length,d=Array(a),g=0;g<a;g++)d[g]=arguments[g];if(i=d,r=this,l=n,o){if(void 0===u)return c=e=l,u=y(m,t),f?p(e):s;if(h)return u=y(m,t),p(l)}return void 0===u&&(u=y(m,t)),s}return t=+t||0,a(n)&&(f=!!n.leading,o=(h="maxWait"in n)?Math.max(+n.maxWait||0,t):o,d="trailing"in n?!!n.trailing:d),k.cancel=function(){void 0!==u&&function(e){if(g)return window.cancelAnimationFrame(e);clearTimeout(e)}(u),c=0,i=l=r=u=void 0},k.flush=function(){return void 0===u?s:_(Date.now())},k.pending=function(){return void 0!==u},k}(e,t,{leading:i,trailing:r,maxWait:t})}function l(){var e=(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase();return"zh-cn"===e&&(e="zh"),e}function c(e,t,n){if(e){var i=e.getAttribute(n);return!!i&&i===t&&("VIDEO"===e.tagName||"AUDIO"===e.tagName)}}function f(e){return!!e&&!!e.shadowRoot}s.createDom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=document.createElement(e);return r.className=i,r.innerHTML=t,Object.keys(n).forEach(function(t){var i=n[t];"video"===e||"audio"===e||"live-video"===e?i&&r.setAttribute(t,i):r.setAttribute(t,i)}),r},s.createDomFromHtml=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{var i=document.createElement("div");i.innerHTML=e;var o=i.children;if(i=null,o.length>0)return o=o[0],n&&s.addClass(o,n),t&&Object.keys(t).forEach(function(e){o.setAttribute(e,t[e])}),o;return null}catch(e){return r.A.logError("util.createDomFromHtml",e),null}},s.hasClass=function(e,t){if(!e||!t)return!1;try{return Array.prototype.some.call(e.classList,function(e){return e===t})}catch(r){var n=e.className&&"object"===(0,i.uk)(e.className)?e.getAttribute("class"):e.className;return n&&!!n.match(RegExp("(\\s|^)"+t+"(\\s|$)"))}},s.addClass=function(e,t){if(e&&t)try{t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(t){t&&e.classList.add(t)})}catch(n){s.hasClass(e,t)||(e.className&&"object"===(0,i.uk)(e.className)?e.setAttribute("class",e.getAttribute("class")+" "+t):e.className+=" "+t)}},s.removeClass=function(e,t){if(e&&t)try{t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(t){t&&e.classList.remove(t)})}catch(n){s.hasClass(e,t)&&t.split(/\s+/g).forEach(function(t){var n=RegExp("(\\s|^)"+t+"(\\s|$)");e.className&&"object"===(0,i.uk)(e.className)?e.setAttribute("class",e.getAttribute("class").replace(n," ")):e.className=e.className.replace(n," ")})}},s.toggleClass=function(e,t){e&&t.split(/\s+/g).forEach(function(t){s.hasClass(e,t)?s.removeClass(e,t):s.addClass(e,t)})},s.classNames=function(){for(var e=arguments,t=[],n=function(n){"String"===s.typeOf(e[n])?t.push(e[n]):"Object"===s.typeOf(e[n])&&Object.keys(e[n]).map(function(i){e[n][i]&&t.push(i)})},i=0;i<arguments.length;i++)n(i);return t.join(" ")},s.findDom=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1?arguments[1]:void 0;try{e=t.querySelector(n)}catch(i){r.A.logError("util.findDom",i),0===n.indexOf("#")&&(e=t.getElementById(n.slice(1)))}return e},s.getCss=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,!1)[t]},s.padStart=function(e,t,n){for(var i=String(n),r=0|t,o=Math.ceil(r/i.length),s=[],a=String(e);o--;)s.push(i);return s.join("").substring(0,r-a.length)+a},s.format=function(e){if(window.isNaN(e))return"";e=Math.round(e);var t=s.padStart(Math.floor(e/3600),2,0),n=s.padStart(Math.floor((e-3600*t)/60),2,0),i=s.padStart(Math.floor(e-3600*t-60*n),2,0);return("00"===t?[n,i]:[t,n,i]).join(":")},s.event=function(e){if(e.touches){var t=e.touches[0]||e.changedTouches[0];e.clientX=t.clientX||0,e.clientY=t.clientY||0,e.offsetX=t.pageX-t.target.offsetLeft,e.offsetY=t.pageY-t.target.offsetTop}e._target=e.target||e.srcElement},s.typeOf=function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]},s.deepCopy=function(e,t){if("Object"===s.typeOf(t)&&"Object"===s.typeOf(e))return Object.keys(t).forEach(function(n){"Object"!==s.typeOf(t[n])||t[n]instanceof Node?"Array"===s.typeOf(t[n])?e[n]="Array"===s.typeOf(e[n])?e[n].concat(t[n]):t[n]:e[n]=t[n]:void 0===e[n]||void 0===e[n]?e[n]=t[n]:s.deepCopy(e[n],t[n])}),e},s.deepMerge=function(e,t){return Object.keys(t).map(function(n){if("Array"===s.typeOf(t[n])&&"Array"===s.typeOf(e[n])){if("Array"===s.typeOf(e[n])){var r;(r=e[n]).push.apply(r,(0,i.Og)(t[n]))}}else s.typeOf(e[n])!==s.typeOf(t[n])||null===e[n]||"Object"!==s.typeOf(e[n])||t[n]instanceof window.Node?null!==t[n]&&(e[n]=t[n]):s.deepMerge(e[n],t[n])}),e},s.getBgImage=function(e){var t=(e.currentStyle||window.getComputedStyle(e,null)).backgroundImage;if(!t||"none"===t)return"";var n=document.createElement("a");return n.href=t.replace(/url\("|"\)/g,""),n.href},s.copyDom=function(e){if(!e||1!==e.nodeType)return"";var t=document.createElement(e.tagName);return Array.prototype.forEach.call(e.attributes,function(e){t.setAttribute(e.name,e.value)}),e.innerHTML&&(t.innerHTML=e.innerHTML),t},s.setInterval=function(e,t,n,i){e._interval[t]||(e._interval[t]=window.setInterval(n.bind(e),i))},s.clearInterval=function(e,t){clearInterval(e._interval[t]),e._interval[t]=null},s.setTimeout=function(e,t,n){e._timers||(e._timers=[]);var i=setTimeout(function(){t(),s.clearTimeout(e,i)},n);return e._timers.push(i),i},s.clearTimeout=function(e,t){var n=e._timers;if("Array"===s.typeOf(n)){for(var i=0;i<n.length;i++)if(n[i]===t){n.splice(i,1),clearTimeout(t);break}}else clearTimeout(t)},s.clearAllTimers=function(e){var t=e._timers;"Array"===s.typeOf(t)&&(t.map(function(e){clearTimeout(e)}),e._timerIds=[])},s.createImgBtn=function(e,t,n,i){var r,o,a,u=s.createDom("xg-".concat(e),"",{},"xgplayer-".concat(e,"-img"));return u.style.backgroundImage='url("'.concat(t,'")'),n&&i&&(["px","rem","em","pt","dp","vw","vh","vm","%"].every(function(e){return!(n.indexOf(e)>-1&&i.indexOf(e)>-1)||(r=parseFloat(n.slice(0,n.indexOf(e)).trim()),o=parseFloat(i.slice(0,i.indexOf(e)).trim()),a=e,!1)}),u.style.width="".concat(r).concat(a),u.style.height="".concat(o).concat(a),u.style.backgroundSize="".concat(r).concat(a," ").concat(o).concat(a),"start"===e?u.style.margin="-".concat(o/2).concat(a," auto auto -").concat(r/2).concat(a):u.style.margin="auto 5px auto 5px"),u},s.Hex2RGBA=function(e,t){var n=[];if(/^\#[0-9A-F]{3}$/i.test(e)){var i="#";e.replace(/[0-9A-F]/ig,function(e){i+=e+e}),e=i}return/^#[0-9A-F]{6}$/i.test(e)?(e.replace(/[0-9A-F]{2}/ig,function(e){n.push(parseInt(e,16))}),"rgba(".concat(n.join(","),", ").concat(t,")")):"rgba(255, 255, 255, 0.1)"},s.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},s.checkIsFunction=function(e){return e&&"function"==typeof e},s.checkIsObject=function(e){return null!==e&&"object"===(0,i.uk)(e)},s.hide=function(e){e.style.display="none"},s.show=function(e,t){e.style.display=t||"block"},s.isUndefined=function(e){if(null==e)return!0},s.isNotNull=function(e){return null!=e},s.setStyleFromCsstext=function(e,t){t&&("String"===s.typeOf(t)?t.replace(/\s+/g,"").split(";").map(function(t){if(t){var n=t.split(":");n.length>1&&(e.style[n[0]]=n[1])}}):Object.keys(t).map(function(n){e.style[n]=t[n]}))},s.filterStyleFromText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],n=e.style.cssText;if(!n)return{};var i=n.replace(/\s+/g,"").split(";"),r={},o={};return i.map(function(e){if(e){var n=e.split(":");n.length>1&&(function(e,t){for(var n=0,i=t.length;n<i;n++)if(e.indexOf(t[n])>-1)return!0;return!1}(n[0],t)?r[n[0]]=n[1]:o[n[0]]=n[1])}}),e.setAttribute("style",""),Object.keys(o).map(function(t){e.style[t]=o[t]}),r},s.getStyleFromCsstext=function(e){var t=e.style.cssText;if(!t)return{};var n=t.replace(/\s+/g,"").split(";"),i={};return n.map(function(e){if(e){var t=e.split(":");t.length>1&&(i[t[0]]=t[1])}}),i},s.preloadImg=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(e){var i=new window.Image;i.onload=function(e){i=null,t&&t(e)},i.onerror=function(e){i=null,n&&n(e)},i.src=e}},s.stopPropagation=function(e){e&&e.stopPropagation()},s.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},s.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0},s.checkTouchSupport=function(){return"ontouchstart"in window},s.getBuffered2=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=[],i=0;i<e.length;i++)n.push({start:.5>e.start(i)?0:e.start(i),end:e.end(i)});n.sort(function(e,t){var n=e.start-t.start;return n||t.end-e.end});var r=[];if(t)for(var s=0;s<n.length;s++){var a=r.length;if(a){var u=r[a-1].end;n[s].start-u<t?n[s].end>u&&(r[a-1].end=n[s].end):r.push(n[s])}else r.push(n[s])}else r=n;return new o(r)},s.getEventPos=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.touches&&e.touches.length>0&&(e=e.touches[0]),{x:e.x/t,y:e.y/t,clientX:e.clientX/t,clientY:e.clientY/t,offsetX:e.offsetX/t,offsetY:e.offsetY/t,pageX:e.pageX/t,pageY:e.pageY/t}},s.requestAnimationFrame=function(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(t)return t(e)},s.getHostFromUrl=function(e){if("String"!==s.typeOf(e))return"";var t=e.split("/"),n="";return t.length>3&&t[2]&&(n=t[2]),n},s.cancelAnimationFrame=function(e){var t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;t&&t(e)},s.isMSE=function(e){return e.media&&(e=e.media),!!e&&e instanceof HTMLMediaElement&&(/^blob/.test(e.currentSrc)||/^blob/.test(e.src))},s.isBlob=function(e){return"string"==typeof e&&/^blob/.test(e)},s.generateSessionId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new Date().getTime();try{e=parseInt(e)}catch(t){e=0}return t+=e,window.performance&&"function"==typeof window.performance.now&&(t+=parseInt(window.performance.now())),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)})},s.createEvent=function(e){var t;return"function"==typeof window.Event?t=new Event(e):(t=document.createEvent("Event")).initEvent(e,!0,!0),t},s.adjustTimeByDuration=function(e,t,n){return t&&e&&(e>t||n&&e<t)?t:e},s.createPositionBar=function(e,t){var n=s.createDom("xg-bar","",{"data-index":-1},e);return t.appendChild(n),n},s.getTransformStyle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0,scale:1,rotate:0},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n={scale:"".concat(e.scale||1),translate:"".concat(e.x||0,"%, ").concat(e.y||0,"%"),rotate:"".concat(e.rotate||0,"deg")};return Object.keys(n).forEach(function(e){var i=RegExp("".concat(e,"\\([^\\(]+\\)"),"g"),r="".concat(e,"(").concat(n[e],")");i.test(t)?(i.lastIndex=-1,t=t.replace(i,r)):t+="".concat(r," ")}),t},s.convertDeg=function(e){return 1>=Math.abs(e)?360*e:e%360},s.getCurrentTimeByOffset=function(e,t){var n=-1;if(!t||t.length<0)return e;for(var i=0;i<t.length;i++)if(e<=t[i].duration){n=i;break}if(-1!==n){var r=t[n].start;return n-1<0?r+e:r+(e-t[n-1].duration)}return e},s.getIndexByTime=function(e,t){var n=t.length,i=-1;if(n<1)return i;if(e<=t[0].end||n<2)i=0;else if(e>t[n-1].end)i=n-1;else for(var r=1;r<n;r++)if(e>t[r-1].end&&e<=t[r].end){i=r;break}return i},s.getOffsetCurrentTime=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i=-1;if((i=n>=0&&n<t.length?n:s.getIndexByTime(e,t))<0)return -1;var r=t.length,o=t[i],a=o.start,u=o.end,l=o.cTime,c=o.offset;return e<a?l:e>=a&&e<=u?e-c:e>u&&i>=r-1?u-c:-1}},67034:function(e){if("undefined"!=typeof Element&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}e.exports=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},15630:function(e,t,n){var i=n(67034);function r(e,t,n,i,r){var s=o.apply(this,arguments);return e.addEventListener(n,s,r),{destroy:function(){e.removeEventListener(n,s,r)}}}function o(e,t,n,r){return function(n){n.delegateTarget=i(n.target,t),n.delegateTarget&&r.call(e,n)}}e.exports=function(e,t,n,i,o){return"function"==typeof e.addEventListener?r.apply(null,arguments):"function"==typeof n?r.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,function(e){return r(e,t,n,i,o)}))}},22626:function(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,i,o,s){if("function"!=typeof i)throw TypeError("The listener must be a function");var a=new r(i,o||e,s),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],a]:e._events[u].push(a):(e._events[u]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1)),a.prototype.eventNames=function(){var e,i,r=[];if(0===this._eventsCount)return r;for(i in e=this._events)t.call(e,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},a.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,o=i.length,s=Array(o);r<o;r++)s[r]=i[r].fn;return s},a.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},a.prototype.emit=function(e,t,i,r,o,s){var a=n?n+e:e;if(!this._events[a])return!1;var u,l,c=this._events[a],f=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,i),!0;case 4:return c.fn.call(c.context,t,i,r),!0;case 5:return c.fn.call(c.context,t,i,r,o),!0;case 6:return c.fn.call(c.context,t,i,r,o,s),!0}for(l=1,u=Array(f-1);l<f;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var h,d=c.length;for(l=0;l<d;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),f){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,i);break;case 4:c[l].fn.call(c[l].context,t,i,r);break;default:if(!u)for(h=1,u=Array(f-1);h<f;h++)u[h-1]=arguments[h];c[l].fn.apply(c[l].context,u)}}return!0},a.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,i,r){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||r&&!a.once||i&&a.context!==i||s(this,o);else{for(var u=0,l=[],c=a.length;u<c;u++)(a[u].fn!==t||r&&!a[u].once||i&&a[u].context!==i)&&l.push(a[u]);l.length?this._events[o]=1===l.length?l[0]:l:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a}}]);