"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["39199"],{25872:function(e,t,n){n.d(t,{PT:function(){return function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(0,u.A)(t,"user","reply_comment");if(i.user=null!=(n=t.user.unique_id)?n:"",!t.reply_comment||r.ignoreReply)return[i];var o=t.reply_comment.reduce(function(t,n){return e(n).forEach(function(e){t.push(e)}),t},[]);return[i].concat((0,s._)(o))}},bg:function(){return p}});var r,i=n(35383),o=n(5377),s=n(54333),u=n(53036),a=n(56680),c=n(50870),d=(r={},(0,i._)(r,a.m33.FollowRelationUnknown,c.yf.UNKNOW),(0,i._)(r,a.m33.NoRelationStatus,c.yf.NONE),(0,i._)(r,a.m33.FollowingStatus,c.yf.FOLLOW),(0,i._)(r,a.m33.FollowEachOtherStatus,c.yf.MUTAL),(0,i._)(r,a.m33.FollowRequestStatus,c.yf.FOLLOWING_REQUEST),r);function l(e){var t,n;return null!=(n=null==e||null==(t=e.url_list)?void 0:t.find(function(e){return!/\.webp/.test(e)}))?n:""}function p(e,t){var n=e.avatar_larger,r=e.avatar_medium,i=e.avatar_thumb,s=e.uid,u=e.short_id,p=e.unique_id,f=e.sec_uid,v=e.room_id,g=e.room_id_str,y=e.nickname,_=e.is_block,m=e.is_blocked,h=e.follow_status,L=e.signature,w=e.show_favorite_list,I=e.custom_verify,b=e.enterprise_verify_reason,S=e.comment_setting,C=e.duet_setting,M=e.is_ad_fake,T=e.is_private_account,k=e.secret,P=e.show_secret_banner,O=e.stitch_setting,x=e.follower_status;return{avatarLarger:l(n),avatarMedium:l(r),avatarThumb:l(i),id:s,shortId:u,uniqueId:null!=p?p:"",secUid:null!=f?f:"",roomId:g||(v?String(v):void 0),nickname:y,relation:function(e){var t=e.is_block,n=e.is_blocked,r=e.follow_status,i=e.follower_status;if(null!=r)return t?c.yf.BLOCK:n?c.yf.BLOCKED:r===a.m33.NoRelationStatus&&i===a.FU4.FollowerFollowStatus?c.yf.FOLLOWER:d[r]}({is_block:_,is_blocked:m,follow_status:h,follower_status:x}),signature:L,openFavorite:w,verified:!!(I||b),commentSetting:S,duetSetting:C,stitchSetting:O,isADVirtual:M,privateAccount:!!T||!!k,secret:!!k,createTime:0,showPrivateBanner:!!P,extraInfo:(0,o._)({followerStatus:x},t)}}},52380:function(e,t,n){n.d(t,{hu:function(){return y},fL:function(){return g},A8:function(){return v},GU:function(){return m},go:function(){return h},TD:function(){return f}});var r=n(79066),i=n(35383),o=n(5377),s=n(45996),u=n(72516),a=n(66905),c=n(10625),d=n(94185),l=n(44957),p=n(54149),f=(0,c.p)("searchGeneralItemListAtom@tiktok/webapp-atoms",d.hA),v=(0,c.p)("searchVideoItemListAtom@tiktok/webapp-atoms",d.hA),g=(0,c.p)("searchPhotoItemListAtom@tiktok/webapp-atoms",d.hA),y=(0,c.p)("searchLiveItemListAtom@tiktok/webapp-atoms",{}),_=(0,a.i)(y,function(e,t){return{checkLIVERelevance:function(e){return(0,r._)(function(){var t,n,i;return(0,u.__generator)(this,function(o){switch(o.label){case 0:var s;return[4,(s={query:e},(0,r._)(function(){return(0,u.__generator)(this,function(e){return[2,l.h.get("/webcast/room/search/",{query:s,baseUrlType:p.Z4.Webcast})]})})())];case 1:if(!(i=void 0===(n=(void 0===(t=o.sent().data)?{}:t).room_list)?[]:n).length)return[2];return this.setItems(i),[2,i.reduce(function(e,t){return"string"==typeof t.id_str?e.concat(t.id_str):e},[])]}})}).call(this)},setItems:function(e){var n=e.reduce(function(e,t){var n;return(0,s._)((0,o._)({},e),(0,i._)({},null!=(n=t.id_str)?n:"",t))},{});t(y,function(e){return(0,o._)({},e,n)})}}}),m=_.useAtomService,h=(_.useServiceState,_.useServiceDispatchers,_.getStaticApi)},63683:function(e,t,n){n.d(t,{Q3:function(){return y},dv:function(){return m},hy:function(){return g},jD:function(){return p},uI:function(){return _}});var r=n(35383),i=n(5377),o=n(16327),s=n(82887),u=n(66905),a=n(89485),c=n(10625),d={contentType:"video",duration:0,videoPercent:0,currentTime:0},l={contentType:"photo",index:-1,length:0},p=(0,s._)((0,c.p)("playProgressAtom@tiktok/webapp-atoms",{}),{rehydrationKey:"webapp.videoControl.playProgress"}),f=(0,u.i)(p,function(e,t){return{setVideoInfo:function(e){var n=e.itemId,s=(0,o._)(e,["itemId"]);t(p,function(e){var t;return(0,r._)({},n,(0,i._)({},d,(null==(t=e[n])?void 0:t.contentType)==="video"&&e[n],s))})},setPhotoInfo:function(e){var n=e.itemId,s=(0,o._)(e,["itemId"]);t(p,function(e){var t;return(0,r._)({},n,(0,i._)({},l,(null==(t=e[n])?void 0:t.contentType)==="photo"&&e[n],s))})},getVideoPlayProgressState:function(t){var n=t.itemId,r=e(p);return n in r&&r[n]&&"video"===r[n].contentType?r[n]:d}}}),v=(f.useAtomService,f.useServiceState),g=f.useServiceDispatchers,y=f.getStaticApi,_=function(e){return v(function(t){return e in t&&t[e]&&"video"===t[e].contentType?t[e]:d},a.bN)},m=function(e){return v(function(t){return e in t&&t[e]&&"photo"===t[e].contentType?t[e]:l},a.bN)}},35255:function(e,t,n){n.d(t,{Jw:function(){return T},QH:function(){return M},T8:function(){return S},u7:function(){return k}});var r=n(79066),i=n(5377),o=n(45996),s=n(6586),u=n(72516),a=n(82887),c=n(66905),d=n(10625),l=n(75127),p=n(88999),f=n(2259),v=n(73721),g=n(44957),y=n(54149),_=n(85443),m=n(26972),h=n(32084),L=n(94185),w=n(48323),I=n(42963),b=(0,v.M)({csr:function(e){return(0,r._)(function(){var t;return(0,u.__generator)(this,function(n){switch(n.label){case 0:return[4,(0,l.e)()];case 1:return t=n.sent(),[2,g.h.get("/api/challenge/item_list/",{query:(0,o._)((0,i._)({},e),{clientABVersions:t.join(",")}),baseUrlType:y.Z4.FixedWww})]}})})()},ssr:function(e){return(0,r._)(function(){var t,n,r,i,o,a,c,d,l,p,v,g,y,_,w,I,b,S,C,M,T,k,P;return(0,u.__generator)(this,function(u){switch(u.label){case 0:return t=(0,f.yK)(),n=e.count,r=e.challengeID,i=e.coverFormat,[4,Promise.all([t.service.location.getUserCountryCode(),t.service.sharedUtil.appId(),t.service.sharedSeo.isGoogleBot(),t.service.sharedSeo.isSearchEngineBot(),t.i18n.getLanguage()])];case 1:return a=(o=s._.apply(void 0,[u.sent(),5]))[0],c=o[1],d=o[2],l=o[3],p=o[4],g=null!=(v=t.headers[L.UA])?v:"",y=d?n:16,_=h.IC.ITEMLIST_CHALLENGE,d?_=h.IC.ITEMLIST_CHALLENGE_BOT_GOOGLE:l&&(_=h.IC.GENERAL_BOT_ITEMLIST_CHALLENGE),T=(M=t.service.webapp.data).getItemList,k={Type:m.SP9.CHALLENGE,Id:r,MaxCursor:"0",MinCursor:"0",Count:y,AppId:c,Region:a,Language:p,CoverFormat:i,Source:_,Extra:{user_agent:g}},P={IsSSRReq:!0,UserAgent:g},[4,t.service.webUser.getWebId()];case 2:return[4,T.apply(M,[(k.CommonParam=(P.WebID=u.sent(),P.LoginUserID=t.service.sessionUser.getUserSession()._spipe_user_id,P.Aid=Number(L.xE),P.EntryPath=t.path,P),k)])];case 3:return I=(w=u.sent()).statusCode,b=w.maxCursor,S=w.hasMore,C=w.items,[2,{statusCode:I,statusMsg:w.statusMsg,hasMore:S,itemList:C,cursor:b}]}})})()}}),S=(0,a._)((0,d.p)("challengeListAtom@tiktok/webapp-atoms",L.hA),{rehydrationKey:"desktop.challengePage.challengeList"}),C=(0,c.i)(S,function(e,t){return{getChallengeList:function(n){return(0,r._)(function(){var r,s,a,c,d,l,f;return(0,u.__generator)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),a=void 0===(s=e(S).cursor)?"0":s,c=n.challengeID,d=(0,p.x)().language,l=e(_.A).bizContext,t(S,function(e){return(0,o._)((0,i._)({},e),{loading:!0})}),[4,b({challengeID:c,language:d,cursor:a,aid:L.xE,count:L.vu,coverFormat:null==l||null==(r=l.videoCoverSettings)?void 0:r.format})];case 1:return f=u.sent(),(0,w.Tj)(e,t,S,I.Lz.Challenge,f),[3,3];case 2:return u.sent(),(0,w.e_)(t,S),[3,3];case 3:return[2]}})})()},resetChallengeList:function(){t(S,L.hA)}}}),M=C.useAtomService,T=C.useServiceDispatchers,k=C.useServiceState},26465:function(e,t,n){n.d(t,{WX:function(){return C},ek:function(){return I},lE:function(){return M},pp:function(){return S}});var r=n(79066),i=n(5377),o=n(45996),s=n(6586),u=n(72516),a=n(82887),c=n(66905),d=n(10625),l=n(50870),p=n(88999),f=n(2259),v=n(73721),g=n(44957),y=n(54149),_=n(26972),m=n(94185),h=n(48323),L=n(42963),w=(0,v.M)({csr:function(e){return(0,r._)(function(){return(0,u.__generator)(this,function(t){return[2,g.h.get("/api/collection/item_list/",{query:e,baseUrlType:y.Z4.FixedWww})]})})()},ssr:function(e){return(0,r._)(function(){var t,n,r,i,o,a,c,d,p,v,g,y,h,L,w,I;return(0,u.__generator)(this,function(u){switch(u.label){case 0:return t=(0,f.yK)(),n=e.collectionId,r=e.language,o=void 0===(i=e.count)?m.vu:i,[4,Promise.all([t.service.location.getUserCountryCode(),t.service.sharedUtil.appId(),t.service.sharedSeo.isGoogleBot(),t.service.commonConfig.getAbTestResultWithDolphin()])];case 1:return c=(a=s._.apply(void 0,[u.sent(),4]))[0],d=a[1],p=a[2],v=a[3],g=p?o:m.vu,[4,t.service.webapp.data.getItemList({Type:_.SP9.COLLECTION,Id:n,MaxCursor:"0",MinCursor:"0",Count:g,AppId:d,Region:c,Language:r,Source:p?l.pf.SEO_ITEMLIST_COLLECTION:l.pf.WEBAPP_ITEMLIST_COLLECTION,ClientABVersions:v.versionName.split(","),Extra:{user_agent:t.headers[m.UA]||""}})];case 2:return h=(y=u.sent()).statusCode,L=y.maxCursor,w=y.hasMore,I=y.items,[2,{statusCode:h,statusMsg:y.statusMsg,hasMore:w,itemList:I,cursor:L}]}})})()}}),I=(0,a._)((0,d.p)("collectionListAtom@tiktok/webapp-atoms",m.hA),{rehydrationKey:"desktop.collectionPage.collectionList"}),b=(0,c.i)(I,function(e,t){return{getCollectionList:function(n){return(0,r._)(function(){var r,s,a,c,d,f,v;return(0,u.__generator)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),r=n.collectionId,a=void 0===(s=e(I).cursor)?"0":s,d=(c=(0,p.x)()).language,f=c.abTestVersion,t(I,function(e){return(0,o._)((0,i._)({},e),{loading:!0})}),[4,w({collectionId:r,language:d,cursor:a,aid:m.xE,count:m.vu,sourceType:l.pf.WEBAPP_ITEMLIST_COLLECTION,clientABVersions:null==f?void 0:f.versionName})];case 1:return v=u.sent(),(0,h.Tj)(e,t,I,L.Lz.Collection,v),[3,3];case 2:return u.sent(),(0,h.e_)(t,I),[3,3];case 3:return[2]}})})()},resetCollectionList:function(){t(I,(0,i._)({},m.hA))},addItems:function(e,n){t(I,function(t){var r=(0,h.kf)(t,e,{itemListKey:L.Lz.Collection,addToHead:n}),s=r.list,u=r.browserList;return(0,o._)((0,i._)({},t),{list:s,browserList:u})})},deleteItems:function(e){(0,h.UJ)(t,I,e)}}}),S=b.useAtomService,C=b.useServiceDispatchers,M=b.useServiceState},82983:function(e,t,n){n.d(t,{BX:function(){return L},DK:function(){return _},ag:function(){return w},sK:function(){return h}});var r=n(79066),i=n(5377),o=n(45996),s=n(72516),u=n(82887),a=n(66905),c=n(10625),d=n(38896),l=n(88999),p=n(44957),f=n(54149),v=n(94185),g=n(48323),y=n(42963),_=(0,u._)((0,c.p)("creatorTabListAtom@tiktok/webapp-atoms",v.hA),{rehydrationKey:"desktop.creatorTabPage.creatorTabList"}),m=(0,a.i)(_,function(e,t){return{getCreatorTabList:function(n){return(0,r._)(function(){var u,a,c,m,h,L,w;return(0,s.__generator)(this,function(I){switch(I.label){case 0:var b;return I.trys.push([0,2,,3]),u=n.secUid,a=n.createTime,c=n.fetchType,m=(0,l.x)().language,t(_,function(e){return(0,o._)((0,i._)({},e),{loading:!0})}),[4,(b={aid:v.xE,count:v.Kq,cursor:String(a),secUid:u,type:c,language:m},(0,r._)(function(){return(0,s.__generator)(this,function(e){return[2,p.h.get("/api/creator/item_list/",{query:b,baseUrlType:f.Z4.FixedWww})]})})())];case 1:return h=I.sent(),L=c===d.N.LoadLatest,w={secUid:u,addToHead:L},(0,g.Tj)(e,t,_,y.Lz.CreatorTab,h,w),t(_,function(e){var t,n;return(0,o._)((0,i._)({},e),{hasMorePrevious:null!=(t=h.hasMorePrevious)&&t,hasMoreLatest:null!=(n=h.hasMoreLatest)&&n})}),[3,3];case 2:return I.sent(),(0,g.e_)(t,_),[3,3];case 3:return[2]}})})()},resetCreatorTabList:function(){t(_,v.hA)}}}),h=m.useAtomService,L=m.useServiceDispatchers,w=m.useServiceState},97922:function(e,t,n){n.d(t,{H:function(){return r}});var r=8},89227:function(e,t,n){n.d(t,{IO:function(){return I},Ql:function(){return S},ZX:function(){return b},dQ:function(){return L}});var r=n(79066),i=n(5377),o=n(45996),s=n(72516),u=n(82887),a=n(66905),c=n(10625),d=n(50870),l=n(36200),p=n(88999),f=n(94185),v=n(48323),g=n(42963),y=n(67495),_=n(97922),m=n(60578),h=n(90329),L=(0,u._)((0,c.p)("exploreListAtom@tiktok/webapp-atoms",f.hA),{rehydrationKey:"desktop.explorePage.exploreList"}),w=(0,a.i)(L,function(e,t){return{getExploreList:function(n){return(0,r._)(function(){var r,u,a,c,w,I,b,S,C,M;return(0,s.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),r=n.categoryType,a=(u=(0,p.x)()).language,c=u.abTestVersion,I=!(null==(w=e(L).list)?void 0:w.length)&&(0,h.mU)(),b=(0,y.z)(),S=0===w.length&&r===d.Yl.ALL?d.su.PULL:d.su.LOADMORE,t(L,function(e){return(0,o._)((0,i._)({},e),{loading:!0})}),[4,(0,m.e)({language:(0,l.uk)(a),aid:f.xE,count:_.H,categoryType:r,clientABVersions:null==c?void 0:c.versionName,isNonPersonalized:(0,h.XN)(),enable_cache:I,video_encoding:b,pullType:S})];case 1:return C=s.sent(),(0,v.Tj)(e,t,L,g.Lz.Explore,C),I&&(0,h.zZ)(null!=(M=C.itemList)?M:[]),[3,3];case 2:return s.sent(),(0,v.e_)(t,L),[3,3];case 3:return[2]}})})()},resetExploreList:function(){t(L,f.hA)}}}),I=w.useAtomService,b=w.useServiceDispatchers,S=w.useServiceState},60578:function(e,t,n){n.d(t,{$:function(){return y},e:function(){return _}});var r=n(79066),i=n(6586),o=n(79262),s=n(72516),u=n(50870),a=n(36200),c=n(2259),d=n(73721),l=n(72665),p=n(44957),f=n(54149),v=n(41015),g=n(94185),y=function(e){return(0,r._)(function(){return(0,s.__generator)(this,function(t){return[2,p.h.get("/api/record/impression/action/",{query:e,baseUrlType:f.Z4.FixedWww})]})})()},_=(0,d.M)({csr:function(e){return(0,r._)(function(){var t;return(0,s.__generator)(this,function(n){return(t=(0,l.DV)("exploreItemList"))?(v.P.emit("consume_prefetch_data",performance.now(),"unknown","exploreItemList"),[2,t.catch(function(){return v.P.emit("consume_prefetch_data",performance.now(),"fail","exploreItemList"),p.h.get("/api/explore/item_list/",{query:e,baseUrlType:f.Z4.FixedWww})})]):[2,p.h.get("/api/explore/item_list/",{query:e,baseUrlType:f.Z4.FixedWww})]})})()},ssr:function(e){return(0,r._)(function(){var t,n,r,d,l,p,f,v,y,_,m,h,L,w,I,b,S,C,M,T,k,P,O,x;return(0,s.__generator)(this,function(s){switch(s.label){case 0:return n=(0,c.yK)(),r=e.categoryType,d=e.count,[4,Promise.all([n.service.location.getUserCountryCode(),n.service.sharedUtil.appId(),n.service.sharedSeo.isGoogleBot(),n.i18n.getLanguage(),n.service.commonConfig.getAbTestResultWithDolphin()])];case 1:return p=(l=i._.apply(void 0,[s.sent(),5]))[0],f=l[1],v=l[2],y=l[3],_=l[4],h=null!=(m=n.headers[g.UA])?m:"",L=(0,a.uk)(y),w=null==_||null==(t=_.parameters.tt_player_dash)?void 0:t.vid,I="","object"==(void 0===w?"undefined":(0,o._)(w))&&"format"in w&&(I=w.format.toLowerCase()),P=(k=n.service.webapp.data).getItemList,O={Id:"",ExploreCategory:r,MaxCursor:"0",MinCursor:"0",Count:d,AppId:f,Region:p,Language:L,Source:v?u.pf.SEO_ITEMLIST_EXPLORE:u.pf.WEBAPP_ITEMLIST_EXPLORE,ClientABVersions:_.versionName.split(","),Extra:{user_agent:h,video_encoding:I}},x={IsSSRReq:!0,UserAgent:h},[4,n.service.webUser.getWebId()];case 2:return[4,P.apply(k,[(O.CommonParam=(x.WebID=s.sent(),x.LoginUserID=n.service.sessionUser.getUserSession()._spipe_user_id,x.Aid=Number(g.xE),x.EntryPath=n.path,x),O)])];case 3:return S=(b=s.sent()).statusCode,C=b.statusMsg,M=b.hasMore,T=b.items,[2,{statusCode:S,statusMsg:C,hasMore:M,cursor:b.maxCursor,itemList:T}]}})})()}})},90329:function(e,t,n){n.d(t,{XN:function(){return p},mU:function(){return g},zZ:function(){return y}});var r=n(36200),i=n(88999),o=n(67500),s=n(89134),u=n(22481),a=n(59070),c=n(94185),d=n(67495),l=n(60578),p=function(){var e,t,n=(0,i.x)().user;switch((0,o.d)("pc_non_personalized_explore")){case"v0":e=!0;break;case"v1":e=(0,a.eI)(null!=(t=null==n?void 0:n.uid)?t:"",!0,(0,s.fU)())}return e},f="ENABLED_EXPLORE_CDN_CACHE_TIME",v=function(){var e=Number((0,u._S)(f,"0"));return Date.now()/1e3-(e||0)>86400&&((0,u.AP)(f,String(Date.now()/1e3||0)),!0)},g=function(){var e="v1"===(0,o.d)("webapp_explore_cache"),t="v1"===(0,o.d)("webapp_disable_explore_cache");return!!(!(0,s.fU)()&&!t&&e&&v())},y=function(e){try{var t=(0,i.x)(),n=t.language,o=t.abTestVersion,s=(0,d.z)();(0,l.$)({aid:c.xE,language:(0,r.uk)(n),itemIds:e.map(function(e){return e.id}).join(","),clientABVersions:null==o?void 0:o.versionName,isNonPersonalized:p(),isForYouFeedImpression:!1,video_encoding:s})}catch(e){console.error("Record Impression Action failed in /api/explore/item_list with CDN Cache",e)}}},10734:function(e,t,n){n.d(t,{Cg:function(){return p},D3:function(){return d}});var r=n(5377),i=n(45996),o=n(82887),s=n(66905),u=n(10625),a=n(71952),c=n(94185),d=(0,o._)((0,u.p)("messageListAtom@tiktok/webapp-atoms",c.hA),{rehydrationKey:"desktop.messagePage.messageList"}),l=(0,s.i)(d,function(e,t){return{setItemListById:function(e){var n=e.list,o=e.statusCode,s=void 0===o?a.s.Ok:o,u=e.hasMore,c=void 0===u||u,l=e.cursor,p=e.level;t(d,function(e){return(0,i._)((0,r._)({},e),{list:n,browserList:n,statusCode:s,hasMore:c,cursor:l,level:p})})},getBrowserList:function(){return e(d).browserList}}}),p=(l.useAtomService,l.useServiceDispatchers,l.useServiceState,l.getStaticApi)},87051:function(e,t,n){n.d(t,{Ag:function(){return M},DC:function(){return T},l6:function(){return S},pT:function(){return k}});var r=n(79066),i=n(5377),o=n(45996),s=n(6586),u=n(72516),a=n(82887),c=n(66905),d=n(10625),l=n(75127),p=n(88999),f=n(2259),v=n(73721),g=n(44957),y=n(54149),_=n(85443),m=n(32084),h=n(26972),L=n(94185),w=n(48323),I=n(42963),b=(0,v.M)({csr:function(e){return(0,r._)(function(){var t;return(0,u.__generator)(this,function(n){switch(n.label){case 0:return[4,(0,l.e)()];case 1:return t=n.sent(),[2,g.h.get("/api/music/item_list/",{query:(0,o._)((0,i._)({},e),{clientABVersions:t.join(",")}),baseUrlType:y.Z4.FixedWww})]}})})()},ssr:function(e){return(0,r._)(function(){var t,n,r,i,o,a,c,d,l,p,v,g,y,_,w,I,b,S,C,M,T,k;return(0,u.__generator)(this,function(u){switch(u.label){case 0:return t=(0,f.yK)(),n=e.musicID,r=e.count,i=e.language,o=e.coverFormat,[4,Promise.all([t.service.location.getUserCountryCode(),t.service.sharedUtil.appId(),t.service.sharedSeo.isGoogleBot(),t.service.sharedSeo.isSearchEngineBot()])];case 1:return c=(a=s._.apply(void 0,[u.sent(),4]))[0],d=a[1],l=a[2],p=a[3],g=null!=(v=t.headers[L.UA])?v:"",y=l?r:16,M=(C=t.service.webapp.data).getItemList,T={Type:h.SP9.MUSIC,Id:n,MaxCursor:"0",MinCursor:"0",Count:y,AppId:d,Region:c,Language:i,PullType:1,CoverFormat:o,Source:l?m.IC.ITEMLIST_MUSIC_BOT_GOOGLE:p?m.IC.GENERAL_BOT_ITEMLIST_MUSIC:m.IC.ITEMLIST_MUSIC,Extra:{user_agent:g}},k={IsSSRReq:!0,UserAgent:g},[4,t.service.webUser.getWebId()];case 2:return[4,M.apply(C,[(T.CommonParam=(k.WebID=u.sent(),k.LoginUserID=t.service.sessionUser.getUserSession()._spipe_user_id,k.Aid=Number(L.xE),k.EntryPath=t.path,k),T)])];case 3:return w=(_=u.sent()).statusCode,I=_.statusMsg,b=_.hasMore,S=_.items,[2,{statusCode:w,statusMsg:I,hasMore:b,cursor:_.maxCursor,itemList:S}]}})})()}}),S=(0,a._)((0,d.p)("musicListAtom@tiktok/webapp-atoms",L.hA),{rehydrationKey:"desktop.musicPage.musicList"}),C=(0,c.i)(S,function(e,t){return{getMusicList:function(n){return(0,r._)(function(){var r,s,a,c,d,l,f,v;return(0,u.__generator)(this,function(u){switch(u.label){case 0:r=e(S),u.label=1;case 1:return u.trys.push([1,3,,4]),a=n.musicID,d=void 0===(c=r.cursor)?"0":c,l=(0,p.x)().language,f=e(_.A).bizContext,t(S,function(e){return(0,o._)((0,i._)({},e),{loading:!0})}),[4,b({musicID:a,language:l,cursor:d,aid:L.xE,count:L.vu,coverFormat:null==f||null==(s=f.videoCoverSettings)?void 0:s.format})];case 2:return v=u.sent(),(0,w.Tj)(e,t,S,I.Lz.Music,v),[3,4];case 3:return u.sent(),(0,w.e_)(t,S),[3,4];case 4:return[2]}})})()},resetMusicList:function(){t(S,L.hA)}}}),M=C.useAtomService,T=C.useServiceDispatchers,k=C.useServiceState},96976:function(e,t,n){n.d(t,{Ag:function(){return b},Ds:function(){return C},jf:function(){return S}});var r,i=n(79066),o=n(35383),s=n(5377),u=n(45996),a=n(6586),c=n(72516),d=n(66905),l=n(10625),p=n(94185),f=n(48323),v=n(42963),g=n(19749),y=n(9381),_=n(88746),m=n(93151),h=n(42182),L=(0,l.p)("atomsMapForItemListKey@tiktok/webapp-atoms",(r={},(0,o._)(r,v.Lz.UserPost,_.HP),(0,o._)(r,v.Lz.UserRepost,m.O0),(0,o._)(r,v.Lz.UserLiked,y.MQ),(0,o._)(r,v.Lz.Favorites,g.h9),r)),w=(0,l.p)("userItemListAtom@tiktok/webapp-atoms",function(e){var t;return t={},(0,o._)(t,v.Lz.UserPost,e(_.HP)),(0,o._)(t,v.Lz.UserRepost,e(m.O0)),(0,o._)(t,v.Lz.UserLiked,e(y.MQ)),(0,o._)(t,v.Lz.Favorites,e(g.h9)),t},function(){}),I=(0,d.i)(w,function(e,t){return{setLoading:function(n,r){(0,h.yI)(n)&&t(e(L)[n],function(e){return(0,u._)((0,s._)({},e),{loading:r})})},getItemList:function(e,t){return(0,i._)(function(){return(0,c.__generator)(this,function(n){switch(e){case v.Lz.UserPost:return[2,(0,_.s5)().getItemList(t)];case v.Lz.UserRepost:return[2,(0,m.rg)().getItemList(t)];case v.Lz.UserLiked:return[2,(0,y.vz)().getItemList(t)];case v.Lz.Favorites:return[2,(0,g.k6)().getItemList(t)];default:return[2,(0,_.s5)().getItemList(t)]}})})()},setDeleteVideo:function(n){var r=!0,i=!1,o=void 0;try{for(var s,u=Object.entries(e(L))[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var c=(0,a._)(s.value,2),d=c[0],l=c[1];d===v.Lz.UserPost?(0,_.s5)().setDeleteVideoForUserPostAtom(n):(0,f.Fx)(t,l,n)}}catch(e){i=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}},resetItemList:function(n){(0,h.yI)(n)&&t(e(L)[n],p.hA)},resetAllLists:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,_.s5)().resetAllLists(e),(0,m.rg)().resetItemList(e),t(y.MQ,p.hA),t(g.h9,p.hA)}}}),b=(I.useAtomService,I.useServiceDispatchers),S=I.useServiceState,C=I.getStaticApi},19749:function(e,t,n){n.d(t,{h9:function(){return _},iK:function(){return h},k6:function(){return L}});var r=n(79066),i=n(5377),o=n(45996),s=n(72516),u=n(82887),a=n(66905),c=n(10625),d=n(75127),l=n(44957),p=n(54149),f=n(94185),v=n(48323),g=n(42963),y=n(42182),_=(0,u._)((0,c.p)("userFavoriteListAtom@tiktok/webapp-atoms",f.hA),{rehydrationKey:"desktop.userPage.userFavoriteList"}),m=(0,a.i)(_,function(e,t){return{setLoading:function(e){t(_,function(t){return(0,o._)((0,i._)({},t),{loading:e})})},getItemList:function(n){return(0,r._)(function(){var u;return(0,s.__generator)(this,function(a){switch(a.label){case 0:var c;return a.trys.push([0,2,,3]),t(_,function(e){return(0,o._)((0,i._)({},e),{loading:!0})}),[4,(c=(0,y.bv)(e,_,n),(0,r._)(function(){var e;return(0,s.__generator)(this,function(t){switch(t.label){case 0:return[4,(0,d.e)()];case 1:return e=t.sent(),[2,l.h.get("/api/user/collect/item_list/",{query:(0,o._)((0,i._)({},c),{clientABVersions:e.join(",")}),baseUrlType:p.Z4.FixedWww})]}})})())];case 1:return u=a.sent(),(0,v.Tj)(e,t,_,g.Lz.Favorites,u,{secUid:n.secUid}),t(_,function(e){var t;return(0,o._)((0,i._)({},e),{total:String(null!=(t=u.total)?t:0)})}),[3,3];case 2:return a.sent(),(0,v.e_)(t,_),[3,3];case 3:return[2]}})})()},resetItemList:function(){t(_,f.hA)}}}),h=(m.useAtomService,m.useServiceDispatchers,m.useServiceState),L=m.getStaticApi},9381:function(e,t,n){n.d(t,{MQ:function(){return _},cI:function(){return h},vz:function(){return L}});var r=n(79066),i=n(5377),o=n(45996),s=n(72516),u=n(82887),a=n(66905),c=n(10625),d=n(75127),l=n(44957),p=n(54149),f=n(94185),v=n(48323),g=n(42963),y=n(42182),_=(0,u._)((0,c.p)("userLikedListAtom@tiktok/webapp-atoms",f.hA),{rehydrationKey:"desktop.userPage.userLikedList"}),m=(0,a.i)(_,function(e,t){return{setLoading:function(e){t(_,function(t){return(0,o._)((0,i._)({},t),{loading:e})})},getItemList:function(n){return(0,r._)(function(){var u;return(0,s.__generator)(this,function(a){switch(a.label){case 0:var c;return a.trys.push([0,2,,3]),t(_,function(e){return(0,o._)((0,i._)({},e),{loading:!0})}),[4,(c=(0,y.bv)(e,_,n),(0,r._)(function(){var e;return(0,s.__generator)(this,function(t){switch(t.label){case 0:return[4,(0,d.e)()];case 1:return e=t.sent(),[2,l.h.get("/api/favorite/item_list/",{query:(0,o._)((0,i._)({},c),{clientABVersions:e.join(",")}),baseUrlType:p.Z4.FixedWww})]}})})())];case 1:return u=a.sent(),(0,v.Tj)(e,t,_,g.Lz.UserLiked,u,{secUid:n.secUid}),[3,3];case 2:return a.sent(),(0,v.e_)(t,_),[3,3];case 3:return[2]}})})()},resetItemList:function(){t(_,f.hA)}}}),h=(m.useAtomService,m.useServiceDispatchers),L=(m.useServiceState,m.getStaticApi)},88746:function(e,t,n){n.d(t,{BS:function(){return O},ch:function(){return P},eW:function(){return C},HP:function(){return T},s5:function(){return A},I4:function(){return x},yR:function(){return M}});var r,i=n(79066),o=n(35383),s=n(5377),u=n(45996),a=n(72516),c=n(66905),d=n(10625),l=n(50870),p=n(94185),f=n(48323),v=n(5268),g=(0,d.p)("userPostListOldestAtom@tiktok/webapp-atoms",p.hA),y=(0,v.Ku)(g),_=(y.useAtomService,y.useServiceDispatchers,y.useServiceState,y.getStaticApi),m=(0,d.p)("userPostListPopularAtom@tiktok/webapp-atoms",p.hA),h=(0,v.Ku)(m),L=(h.useAtomService,h.useServiceDispatchers,h.useServiceState,h.getStaticApi),w=n(42182),I=(0,d.p)("atomsMapForPostItemListRequestType@tiktok/webapp-atoms",(r={},(0,o._)(r,l.Fo.LATEST,v.Ym),(0,o._)(r,l.Fo.POPULAR,m),(0,o._)(r,l.Fo.OLDEST,g),r)),b=(0,d.p)("sortTypeAtom@tiktok/webapp-atoms",l.Fo.LATEST),S=(0,c.i)(b,function(e,t){return{setUserPostSortType:function(e){t(b,e)}}}),C=S.useAtomService,M=S.useServiceState,T=(0,d.p)("userPostListAtom@tiktok/webapp-atoms",function(e){var t=e(b),n=e(I)[t];return e(n)},function(){}),k=(0,c.i)(T,function(e,t){return{setLoading:function(n){(0,w.K8)(e(b))&&t(e(I)[e(b)],function(e){return(0,u._)((0,s._)({},e),{loading:n})})},getItemList:function(t){return(0,i._)(function(){return(0,a.__generator)(this,function(n){switch(e(b)){case l.Fo.LATEST:return t.postItemListRequestType=l.Fo.LATEST,[2,(0,v.Tx)().getItemList(t)];case l.Fo.POPULAR:return t.postItemListRequestType=l.Fo.POPULAR,[2,L().getItemList(t)];case l.Fo.OLDEST:return t.postItemListRequestType=l.Fo.OLDEST,[2,_().getItemList(t)];default:return t.postItemListRequestType=l.Fo.LATEST,[2,(0,v.Tx)().getItemList(t)]}})})()},resetItemList:function(){(0,w.K8)(e(b))&&t(e(I)[e(b)],p.hA)},resetAllLists:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t(b,l.Fo.LATEST),t(v.Ym,e?function(e){return(0,s._)({prevPromise:e.prevPromise},p.hA)}:p.hA),t(m,e?function(e){return(0,s._)({prevPromise:e.prevPromise},p.hA)}:p.hA),t(g,e?function(e){return(0,s._)({prevPromise:e.prevPromise},p.hA)}:p.hA)},setDeleteVideoForUserPostAtom:function(n){var r=!0,i=!1,o=void 0;try{for(var s,u=Object.values(e(I))[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var a=s.value;(0,f.Fx)(t,a,n)}}catch(e){i=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}}}}),P=k.useAtomService,O=k.useServiceDispatchers,x=k.useServiceState,A=k.getStaticApi},93151:function(e,t,n){n.d(t,{O0:function(){return b},rg:function(){return T},to:function(){return M},zu:function(){return C}});var r=n(79066),i=n(5377),o=n(45996),s=n(6586),u=n(79262),a=n(72516),c=n(82887),d=n(66905),l=n(10625),p=n(75127),f=n(2259),v=n(73721),g=n(44957),y=n(54149),_=n(32084),m=n(94185),h=n(48323),L=n(42963),w=n(42182),I=(0,v.M)({csr:function(e){return(0,r._)(function(){var t;return(0,a.__generator)(this,function(n){switch(n.label){case 0:return[4,(0,p.e)()];case 1:return t=n.sent(),[2,g.h.get("/api/repost/item_list/",{query:(0,o._)((0,i._)({},e),{clientABVersions:t.join(",")}),baseUrlType:y.Z4.FixedWww})]}})})()},ssr:function(e){return(0,r._)(function(){var t,n,r,i,o,c,d,l,p,v,g,y,h,L,w,I,b,S,C,M,T;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return n=(0,f.yK)(),i=void 0===(r=e.count)?15:r,o=e.secUid,c=e.userId,[4,Promise.all([n.service.location.getUserCountryCode(),n.service.sharedUtil.appId(),n.i18n.getLanguage(),n.service.commonConfig.getAbTestResultWithDolphin(),n.service.sharedSeo.isGoogleBot(),n.service.sharedSeo.isSearchEngineBot()])];case 1:return l=(d=s._.apply(void 0,[a.sent(),6]))[0],p=d[1],v=d[2],g=d[3],y=d[4],h=d[5],L=y?159:h?160:_.IC.WEBAPP_ITEMLIST_REPOST,w=null==g||null==(t=g.parameters.tt_player_dash)?void 0:t.vid,I="","object"==(void 0===w?"undefined":(0,u._)(w))&&"format"in w&&(I=w.format.toLowerCase()),[4,n.service.webapp.data.getItemList({SecUid:o,Id:c,MaxCursor:"0",MinCursor:"0",Count:i,AppId:p,Region:l,Language:v,Source:L,Extra:{user_agent:n.headers[m.UA]||"",video_encoding:I},CoverFormat:e.coverFormat})];case 2:return S=(b=a.sent()).statusCode,C=b.hasMore,M=b.maxCursor,T=b.statusMsg,[2,{statusCode:S,hasMore:C,cursor:M,itemList:b.items,statusMsg:T}]}})})()}}),b=(0,c._)((0,l.p)("userRepostListAtom@tiktok/webapp-atoms",m.hA),{rehydrationKey:"userPage.userRepostList"}),S=(0,d.i)(b,function(e,t){return{setLoading:function(e){t(b,function(t){return(0,o._)((0,i._)({},t),{loading:e})})},getItemList:function(n){return(0,r._)(function(){var r,s,u;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),t(b,function(e){return(0,o._)((0,i._)({},e),{loading:!0})}),r=I((0,w.bv)(e,b,n)),t(b,function(e){return(0,o._)((0,i._)({},e),{prevPromise:r})}),[4,r];case 1:if(s=a.sent(),(u=e(b).prevPromise)&&u!==r)return[2];return(0,h.Tj)(e,t,b,L.Lz.UserRepost,s,{secUid:n.secUid}),[3,3];case 2:return a.sent(),(0,h.e_)(t,b),[3,3];case 3:return[2]}})})()},resetItemList:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t(b,e?function(e){return(0,i._)({prevPromise:e.prevPromise},m.hA)}:m.hA)}}}),C=S.useAtomService,M=(S.useServiceDispatchers,S.useServiceState),T=S.getStaticApi},45893:function(e,t,n){n.d(t,{D:function(){return h}});var r=n(67500),i=n(52380),o=n(35255),s=n(26465),u=n(82983),a=n(42963),c=n(89227),d=n(10734),l=n(87051),p=n(11031),f=n(5891),v=n(88746),g=n(93151),y=n(9381),_=n(19749),m=new Map([[a.Lz.ForYou,p.e4],[a.Lz.Music,l.l6],[a.Lz.Explore,c.dQ],[a.Lz.Challenge,o.T8],[a.Lz.CreatorTab,u.DK],[a.Lz.UserPost,v.HP],[a.Lz.UserRepost,g.O0],[a.Lz.UserLiked,y.MQ],[a.Lz.Favorites,_.h9],[a.Lz.Messages,d.D3],[a.Lz.Video,f.Hx]]),h=function(e){if(e){var t,n,o=(null!=(t=(0,r.d)("webapp_collection_profile"))?t:"v0")!=="v0";if(e===a.Lz.Collection&&o)return s.ek;if((null!=(n=(0,r.d)("search_page_jotai"))?n:"v0")!=="v0"){if(e===a.Lz.SearchTop)return i.TD;if(e===a.Lz.SearchVideo)return i.A8;if(e===a.Lz.SearchPhoto)return i.fL}return m.get(e)}}},95952:function(e,t,n){n.d(t,{i:function(){return i}});var r=n(81284);function i(e,t){return(0,r.Y)(e,function(e){return e.request.path})(t)}},97546:function(e,t,n){n.d(t,{n:function(){return s}});var r=n(46657),i=n(2668),o=n(20259),s=function(e){var t=e.msg,n=e.shouldShowMsg,s=void 0!==n&&n,u=e.prevent,a=void 0===u||u,c=e.callback;return function(e){return e.pipe((0,o.W)(function(e){return(s&&console.error("Effect error: ",null!=t?t:e),null==c||c(),a)?r.w:(0,i.$)(function(){return e})}))}}},62869:function(e,t,n){n.d(t,{o:function(){return a},D:function(){return u}});var r,i,o=((r={}).Comedy="comedy",r.Gaming="gaming",r.Food="food",r.Dance="dance",r.Beauty="beauty",r.Animals="animals",r.Sports="sports",r),s=((i={})[i.COMEDY=0]="COMEDY",i[i.GAMING=1]="GAMING",i[i.FOOD=2]="FOOD",i[i.DANCE=3]="DANCE",i[i.BEAUTY=4]="BEAUTY",i[i.ANIMALS=5]="ANIMALS",i[i.SPORTS=6]="SPORTS",i),u=function(e){return[o.Animals,o.Beauty,o.Comedy,o.Dance,o.Food,o.Gaming,o.Sports].includes(e)},a=function(e){switch(e){case o.Animals:return s.ANIMALS;case o.Beauty:return s.BEAUTY;case o.Comedy:return s.COMEDY;case o.Dance:return s.DANCE;case o.Food:return s.FOOD;case o.Gaming:return s.GAMING;case o.Sports:return s.SPORTS}}},86712:function(e,t,n){n.d(t,{Eq:function(){return C},JV:function(){return h},LV:function(){return S},OB:function(){return m},Sb:function(){return b},Zl:function(){return w},d8:function(){return I},o1:function(){return _}});var r=n(35383),i=n(5377),o=n(45996),s=n(54333),u=n(53036),a=n(23112),c=n(71111),d=n(66905),l=n(42963),p=n(56708),f=(0,c.atom)({}),v=(0,c.atom)(null,function(e,t,n,s){if(s){var a=e(f)[n];a?t(a,s):t(f,function(e){return(0,o._)((0,i._)({},e),(0,r._)({},n,(0,c.atom)(s)))})}else t(f,function(e){return(0,u.A)(e,n)})}),g=(0,c.atom)(null),y=(0,c.atom)([]),_=(0,c.atom)(function(e){var t=(0,p.N)(e,l.Lz.CreatorTab).browserList;return void 0===t?[]:t}),m=(0,c.atom)(function(e){var t=[],n=e(y),r=!0,i=!1,o=void 0;try{for(var u,a=n[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var c=u.value,d=(0,p.N)(e,c.itemListKey).browserList,l=void 0===d?[]:d;if(c.skip>=l.length)break;var f=Math.min(c.skip+c.limit,l.length);if(t.push.apply(t,(0,s._)(l.slice(c.skip,f))),c.limit===1/0)break}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return t}),h=(0,c.atom)(function(e){var t=e(y),n=e(m),r=null,i=0,o=!0,s=!1,u=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var d=a.value,l=(0,p.N)(e,d.itemListKey),f=l.browserList,v=void 0===f?[]:f,h=l.hasMore,L=void 0===h||h,w=L?d.limit:v.length-d.skip;if(i+=w,n.length<i&&L){r=d.itemListKey;break}}}catch(e){s=!0,u=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw u}}return{activeItemListKey:e(g),browserListSources:t,keyToLoadMore:r,browserList:n,creatorBrowserList:e(_)}},function(e,t,n){n.activeItemListKey&&t(g,n.activeItemListKey),n.browserListSources&&t(y,n.browserListSources)}),L=(0,d.i)(h,function(e,t){return{registerBrowserListConfig:function(e){var n=e.itemListKey;t(v,null!=n?n:"",e.config)},setupBrowserList:function(n){var r=n.itemListKey,i=n.enterIndex,o=e(f)[null!=r?r:""],u=o?e(o):null,c=[];if(r!==l.Lz.Explore||(0,a.A)(u))c.push({itemListKey:r,skip:0,limit:1/0});else{var d,p,v,_,m,h=null!=(m=null==u?void 0:u.sources)?m:[];c.push.apply(c,(0,s._)((d=r,p=i,v={},_=[],h.forEach(function(e,t){var n=e.itemListKey,r=e.limit;if(n){var i,o=null!=(i=v[n])?i:0,s=0===t&&n===d?p+r:r;_.push({itemListKey:n,skip:o,limit:s}),v[n]=o+s}}),_)))}t(g,r),t(y,c)},clearBrowserList:function(){t(g,null),t(y,[])},freezeSourceWithKey:function(n){var r=e(y),i=[],o=!0,s=!1,u=void 0;try{for(var a,c=r[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var d=a.value;if(d.itemListKey!==n)i.push(d);else{var l=(0,p.N)(e,d.itemListKey).browserList,f=void 0===l?[]:l;d.skip<f.length&&(d.limit=Math.min(f.length-d.skip,d.limit),i.push(d))}}}catch(e){s=!0,u=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw u}}t(y,i)},getSourceIndex:function(t){var n,r=e(m),i=e(y),o=0,s=!0,u=!1,a=void 0;try{for(var c,d,l=i[Symbol.iterator]();!(s=(d=l.next()).done);s=!0){var f=d.value,v=(0,p.N)(e,f.itemListKey),g=v.browserList,_=void 0===g?[]:g,h=v.hasMore,L=void 0===h||h?f.limit:_.length-f.skip;if(t<o+L||r.length<o+L)return{itemListKey:f.itemListKey,index:f.skip+(Math.min(t,r.length)-o)};o+=L}}catch(e){u=!0,a=e}finally{try{s||null==l.return||l.return()}finally{if(u)throw a}}var w=null!=(n=null==(c=i[i.length-1])?void 0:c.itemListKey)?n:null,I=(0,p.N)(e,w).browserList;return{itemListKey:w,index:Math.max((void 0===I?[]:I).length-1,0)}}}}),w=L.useAtomService,I=L.useServiceState,b=L.useServiceDispatchers,S=L.getStaticApi,C=(0,c.atom)(null)},25435:function(e,t,n){n.d(t,{bc:function(){return G},BI:function(){return Z},YZ:function(){return W},$T:function(){return B},JD:function(){return q}});var r,i,o=n(79066),s=n(35383),u=n(5377),a=n(45996),c=n(16327),d=n(72516),l=n(71111),p=n(66905),f=n(73515),v=n(77355),g=n(6785),y=n(58034),_=n(38456),m=n(42087),h=n(53069),L=n(42963),w=n(68145),I=n(96976),b=n(11031),S=n(63683),C=n(71952),M=n(80728),T=n(81329),k=n(70143),P=n(61874),O=n(44957),x=n(54149),A=n(86712),U=n(21987),E=new WeakMap,F=function(e){if("undefined"==typeof window)return void console.warn("[Warning]: Unexpctedly get injectable instance in SSR runtime, will return null instead.");if(!E.has(e)){var t=U.l.getInstance(e);if(!t)return void console.error("Instance has not mounted for Class: ".concat(e.constructor.name));E.set(e,t)}return E.get(e)},D=function(e){var t=F(_.AU);null==t||t.reportVideoInteractStart({startTime:Date.now(),situation:e})},V=n(15035),j=n(56708),z=(r={},(0,s._)(r,L.Lz.ForYou,y.ey.OneColumn),(0,s._)(r,L.Lz.Topic,y.ey.OneColumn),(0,s._)(r,L.Lz.Following,y.ey.OneColumn),(0,s._)(r,L.Lz.Video,y.ey.OneColumn),(0,s._)(r,L.Lz.Find,y.ey.ThreeColumn),(0,s._)(r,L.Lz.Music,y.ey.ThreeColumn),(0,s._)(r,L.Lz.MusicNew,y.ey.ThreeColumn),(0,s._)(r,L.Lz.Challenge,y.ey.ThreeColumn),(0,s._)(r,L.Lz.ChallengeNew,y.ey.ThreeColumn),(0,s._)(r,L.Lz.Sticker,y.ey.ThreeColumn),(0,s._)(r,L.Lz.Effect,y.ey.ThreeColumn),(0,s._)(r,L.Lz.User,y.ey.ThreeColumn),(0,s._)(r,L.Lz.UserPost,y.ey.ThreeColumn),(0,s._)(r,L.Lz.UserRepost,y.ey.ThreeColumn),(0,s._)(r,L.Lz.UserLiked,y.ey.ThreeColumn),(0,s._)(r,L.Lz.SearchTop,y.ey.ThreeColumn),(0,s._)(r,L.Lz.SearchVideo,y.ey.ThreeColumn),(0,s._)(r,L.Lz.SearchPhoto,y.ey.ThreeColumn),(0,s._)(r,L.Lz.Question,y.ey.ThreeColumn),(0,s._)(r,L.Lz.Playlist,y.ey.ThreeColumn),(0,s._)(r,L.Lz.LiveEvent,y.ey.ThreeColumn),(0,s._)(r,L.Lz.VideoPlaylist,y.ey.OneColumn),(0,s._)(r,L.Lz.CreateVideoPlaylist,y.ey.OneColumn),(0,s._)(r,L.Lz.Messages,y.ey.OneColumn),(0,s._)(r,L.Lz.Discover,y.ey.ThreeColumn),(0,s._)(r,L.Lz.Poi,y.ey.ThreeColumn),(0,s._)(r,L.Lz.Collection,y.ey.ThreeColumn),(0,s._)(r,L.Lz.UserPostPublic,y.ey.OneColumn),(0,s._)(r,L.Lz.Explore,y.ey.OneColumn),(0,s._)(r,L.Lz.Channel,y.ey.ThreeColumn),(0,s._)(r,L.Lz.PoiCategory,y.ey.ThreeColumn),(0,s._)(r,L.Lz.SearchLive,y.ey.ThreeColumn),(0,s._)(r,L.Lz.Favorites,y.ey.ThreeColumn),(0,s._)(r,L.Lz.KeywordExpansion,y.ey.ThreeColumn),(0,s._)(r,L.Lz.CreatorTab,y.ey.BrowserMode),(0,s._)(r,L.Lz.Friends,y.ey.OneColumn),(0,s._)(r,L.Lz.TrendingTopics,y.ey.ThreeColumn),r),R=(i={},(0,s._)(i,w.xy.Friends,"friends"),(0,s._)(i,w.xy.Private,"private"),(0,s._)(i,w.xy.Public,"public"),i),B=(0,l.atom)({currentIndex:0,enterIndex:0,prevFeedItemIndex:null,itemListKey:null,prevFeedItemListKey:null,jumpSamePageTime:0,belowPlayMode:y.ey.OneColumn,enterWindowTimeSec:Number(new Date),showingBrowserMode:!1,isCreatorBrowserMode:!1});B.debugLabel="browserModeAtom";var N=(0,l.atom)(function(e){var t=e(B).itemListKey;return(0,j.N)(e,t)}),K=(0,p.i)(B,function(e,t){return{setItemListKey:function(e){t(B,function(t){return(0,a._)((0,u._)({},t),{itemListKey:e})})},setCurrentIndex:function(e){t(B,function(t){return(0,a._)((0,u._)({},t),{currentIndex:e})})},setClickSamePage:function(){t(B,function(e){return(0,a._)((0,u._)({},e),{jumpSamePageTime:Date.now()})})},setShowingBrowserMode:function(e){t(B,function(t){return(0,a._)((0,u._)({},t),{showingBrowserMode:e})})},updateVideoIndexAndSavePrev:function(n){var r=n.newFeedIndex,i=n.isIndexInvalid,o=n.newId,s=n.playProgress,c=n.itemListKey,d=n.currentIndex,l=n.newItemListKey,p=n.playMode;if(!i){var f=e(T.az).isMiniPlayerShowing;if(t(B,function(e){return(0,a._)((0,u._)({},e),{itemListKey:l,currentIndex:r,prevFeedItemIndex:d,prevFeedItemListKey:c})}),f){(0,T.uZ)().setItemListKey(L.Lz.CreatorTab),(0,T.uZ)().updateVideoIndex({newIndex:r,newId:o});return}(0,h.LM)().updateVideo({currentVideo:{index:r,id:o,mode:p},playProgress:null!=s?s:0})}},handleEnterCreatorMode:function(n){try{D(_.uT.EnterCreatorMode);var r,i=n.creatorFeedIndex,o=e(B),s=o.itemListKey,c=o.currentIndex,d=e(A.o1),l=!d.length,p=null!=(r=d[i])?r:"";this.updateVideoIndexAndSavePrev({newFeedIndex:i,isIndexInvalid:l,newId:p,itemListKey:s,currentIndex:c,newItemListKey:L.Lz.CreatorTab,playMode:y.ey.BrowserMode}),t(B,function(e){return(0,a._)((0,u._)({},e),{isCreatorBrowserMode:!0})})}catch(e){}},handleExitCreatorMode:function(){try{D(_.uT.ExitCreatorMode);var n,r=e(B),i=r.prevFeedItemIndex,o=r.prevFeedItemListKey,s=e(A.OB),c=null!=i?i:0,d=!s.length,l=null!=(n=s[c])?n:"";this.handleClearCreatorModeData({newIndex:c,isIndexInvalid:d,prevFeedItemListKey:o});var p={currentVideo:{index:c,id:l,mode:y.ey.BrowserMode},playProgress:0};(0,h.LM)().updateVideo(p),t(B,function(e){return(0,a._)((0,u._)({},e),{isCreatorBrowserMode:!1})})}catch(e){}},handleCreatorModeVideoClick:function(t){try{D(_.uT.ClickCreatorTabVideo);var n,r=t.creatorFeedIndex,i=e(T.az).isMiniPlayerShowing,o=e(A.o1),s=!o.length,u=null!=(n=o[r])?n:"";i?(0,T.uZ)().updateVideoIndex({newIndex:r,newId:u}):this.updateVideoIndex({newIndex:r,newId:u,isIndexInvalid:s})}catch(e){}},updateVideoIndex:function(n){var r=n.newIndex,i=n.isIndexInvalid,o=n.newId,s=n.playProgress,c=e(T.az).isMiniPlayerShowing,d=e(B).itemListKey;if(!i&&(t(B,function(e){return(0,a._)((0,u._)({},e),{currentIndex:r})}),!c)){var l={currentVideo:{index:r,id:o,mode:y.ey.BrowserMode},playProgress:null!=s?s:0,pageType:d?L.FB[d]:f.g.Unknown};(0,h.LM)().updateVideo(l)}},updateDeleteVideo:function(n){var r=e(B).currentIndex,i=e(A.OB),o=i.length,s=o-1<=0,u=o-1===r,a=s?"":i[u?r-1:r+1];if(n){this.updateVideoIndex({newIndex:u?r-1:r,newId:a,isIndexInvalid:s});var c=(0,I.Ds)(),d=(0,b.HG)();c.setDeleteVideo(n),d.setDeleteVideo(n),t(k.D,"setDeleteVideo",n),t(P.t,"setDeleteVideo",n)}},handleClearCreatorModeData:function(e){var n=e.prevFeedItemListKey,r=e.newIndex;e.isIndexInvalid||t(B,function(e){return(0,a._)((0,u._)({},e),{currentIndex:r,itemListKey:n,prevFeedItemIndex:null,prevFeedItemListKey:null})})},postVideoDelete:function(e){return(0,o._)(function(){var t,n,r,i;return(0,d.__generator)(this,function(c){switch(c.label){case 0:t=(0,V.o)(),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,(0,o._)(function(){return(0,d.__generator)(this,function(t){return[2,O.h.post("/api/aweme/delete/",{query:(0,a._)((0,u._)({},e),{tt_csrf_token:O.h.csrfToken}),headers:(0,s._)({},x.nk,O.h.csrfToken),baseUrlType:x.Z4.FixedWww})]})})()];case 2:return r=(n=c.sent()).status_code,i=n.status_msg,t.setBrowserModeStatus({statusCode:r,statusMessage:i,action:"delete"}),r===C.s.Ok&&(m.y.handleVideoDelete("delete"),this.updateDeleteVideo(e.aweme_id)),[3,4];case 3:return c.sent(),t.setBrowserModeStatus({statusCode:C.s.UnknownError,statusMessage:""}),[3,4];case 4:return[2]}})}).call(this)},postScheduleDelete:function(e){return(0,o._)(function(){var t;return(0,d.__generator)(this,function(n){switch(n.label){case 0:t=(0,V.o)(),n.label=1;case 1:var r;return n.trys.push([1,3,,4]),[4,(r={aweme_id:e},(0,o._)(function(){return(0,d.__generator)(this,function(e){return[2,O.h.post("/api/schedule/aweme/delete/",{query:r,headers:(0,s._)({},x.nk,O.h.csrfToken),baseUrlType:x.Z4.FixedWww})]})})())];case 2:return n.sent(),t.setBrowserModeStatus({statusCode:C.s.Ok,statusMessage:"",action:"delete"}),this.updateDeleteVideo(e),m.y.handleScheduleDelete("delete"),[3,4];case 3:return n.sent(),t.setBrowserModeStatus({statusCode:C.s.UnknownError,statusMessage:""}),[3,4];case 4:return[2]}})}).call(this)},postDuetOrStitchChange:function(e){return(0,o._)(function(e){var n,r,i,c,l,p;return(0,d.__generator)(this,function(f){switch(f.label){case 0:n=e.type,r=e.enable,i=e.aweme_id,c=(0,V.o)(),f.label=1;case 1:var g;return f.trys.push([1,3,,4]),[4,(g=(0,s._)({aweme_id:i},n,r),(0,o._)(function(){return(0,d.__generator)(this,function(e){return[2,O.h.post("/api/aweme/set/react_duet_stitch/",{query:(0,a._)((0,u._)({},g),{tt_csrf_token:O.h.csrfToken}),headers:(0,s._)({},x.nk,O.h.csrfToken),baseUrlType:x.Z4.FixedWww})]})})())];case 2:return(l=f.sent().status_code)!==C.s.Ok?(c.setBrowserModeStatus({statusCode:l,statusMessage:""}),l===C.s.VideoUnavailableDeleted&&this.updateDeleteVideo(i)):(m.y.handlePrivateSetting({target:n,to_status:r?"on":"off"}),p="item_duet"===n?"duetEnabled":"stitchEnabled",t(P.t,"updateItem",(0,s._)({id:i},p,r===v.V.ENABLE))),[3,4];case 3:return f.sent(),c.setBrowserModeStatus({statusCode:C.s.UnknownError,statusMessage:""}),[3,4];case 4:return[2]}})}).apply(this,arguments)},postModifyVisibility:function(e){return(0,o._)(function(){var n,r,i,c;return(0,d.__generator)(this,function(l){switch(l.label){case 0:n=(0,V.o)(),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,(0,o._)(function(){return(0,d.__generator)(this,function(t){return[2,O.h.post("/api/aweme/modify/visibility/",{query:(0,a._)((0,u._)({},e),{tt_csrf_token:O.h.csrfToken}),headers:(0,s._)({},x.nk,O.h.csrfToken),baseUrlType:x.Z4.FixedWww})]})})()];case 2:return i=(r=l.sent()).status_code,c=r.status_msg,i!==C.s.Ok?(n.setBrowserModeStatus({statusCode:i,statusMessage:c}),i===C.s.VideoUnavailableDeleted&&this.updateDeleteVideo(e.aweme_id)):(m.y.handleSelectPrivacySettingVideo({to_status:R[e.type]}),(0,M.G)(i,[C.s.Ok]),t(P.t,"setItemPrivateState",{id:e.aweme_id,visibility:e.type})),[2,{statusCode:i}];case 3:return l.sent(),n.setBrowserModeStatus({statusCode:C.s.UnknownError,statusMessage:""}),[2,{statusCode:C.s.UnknownError}];case 4:return[2]}})}).call(this)},postUserSetting:function(e){return(0,o._)(function(){var n,r,i,c;return(0,d.__generator)(this,function(l){switch(l.label){case 0:n=(0,V.o)(),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,(0,o._)(function(){return(0,d.__generator)(this,function(t){return[2,O.h.post("/api/user/set/settings/",{baseUrlType:x.Z4.FixedWww,query:(0,a._)((0,u._)({},e),{tt_csrf_token:O.h.csrfToken}),headers:(0,s._)({},x.nk,O.h.csrfToken)})]})})()];case 2:return(r=l.sent().status_code)!==C.s.Ok?(n.setBrowserModeStatus({statusCode:r,statusMessage:""}),r===C.s.VideoUnavailableDeleted&&this.updateDeleteVideo(null!=(i=e.aweme_id)?i:"")):(m.y.handlePrivateSetting({target:"comment",to_status:e.private_setting===g.v.PUBLIC?"on":"off"}),t(P.t,"updateItem",{id:null!=(c=e.aweme_id)?c:"",itemCommentStatus:e.private_setting})),[3,4];case 3:return l.sent(),n.setBrowserModeStatus({statusCode:C.s.UnknownError,statusMessage:""}),[3,4];case 4:return[2]}})}).call(this)},postUserSettingsUpdate:function(e){return(0,o._)(function(){var t,n;return(0,d.__generator)(this,function(r){switch(r.label){case 0:t=(0,V.o)(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(0,o._)(function(){return(0,d.__generator)(this,function(t){return[2,O.h.post("/api/privacy/item/settings/update/v1",{query:e,headers:(0,s._)({},x.nk,O.h.csrfToken),baseUrlType:x.Z4.FixedWww})]})})()];case 2:return(n=r.sent().status_code)!==C.s.Ok&&t.setBrowserModeStatus({statusCode:n,statusMessage:""}),[3,4];case 3:return r.sent(),t.setBrowserModeStatus({statusCode:C.s.UnknownError,statusMessage:""}),[3,4];case 4:return[2]}})})()},getItemRestriction:function(e){return(0,o._)(function(){var t,n,r,i;return(0,d.__generator)(this,function(u){switch(u.label){case 0:t=(0,V.o)(),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,(0,o._)(function(){return(0,d.__generator)(this,function(t){return[2,O.h.get("/api/privacy/item/restriction/v1",{query:e,headers:(0,s._)({},x.nk,O.h.csrfToken),baseUrlType:x.Z4.FixedWww})]})})()];case 2:if(r=(n=u.sent()).status_code,i=(0,c._)(n,["status_code"]),r!==C.s.Ok)return t.setBrowserModeStatus({statusCode:r,statusMessage:""}),[2];return[2,i];case 3:return u.sent(),t.setBrowserModeStatus({statusCode:C.s.UnknownError,statusMessage:""}),[3,4];case 4:return[2]}})})()},closeBrowserMode:function(n){var r,i=null!=n?n:{},o=i.playProgress,s=i.shouldPause,c=void 0!==s&&s,d=e(B),l=d.itemListKey,p=d.currentIndex,v=d.belowPlayMode,g=d.isCreatorBrowserMode,y=d.prevFeedItemIndex,_=d.prevFeedItemListKey,m=d.afterCloseBrowserMode,w=g?null!=_?_:"":null!=l?l:"",I=g?null!=y?y:0:p,b=e(A.OB),S=e(N).list,C=!b.length,M=null!=(r=b[I])?r:"",T=S.findIndex(function(e){return M===e});g&&(t(B,function(e){return(0,a._)((0,u._)({},e),{isCreatorBrowserMode:!1})}),this.handleClearCreatorModeData({prevFeedItemListKey:w,newIndex:I,isIndexInvalid:C}));var k={currentVideo:{index:c?-1:T,id:c?"":M,mode:null!=v?v:z[w],pageType:w?L.FB[w]:f.g.Unknown},playProgress:void 0===o?0:o};(0,h.LM)().updateVideo(k),null==m||m(),t(B,function(e){return(0,a._)((0,u._)({},e),{showingBrowserMode:!1,belowPlayMode:null,afterCloseBrowserMode:void 0})}),(0,A.LV)().clearBrowserList()},showBrowserMode:function(n){var r=n.index,i=void 0===r?0:r,o=n.playProgress,s=n.belowPlayMode,c=n.forceUseIndexLocation,d=n.shouldUsePreviousProgress,l=n.afterCloseBrowserMode,p=e(N),f=p.browserList,v=p.list[i],g=e(S.jD)[v],_=((null==g?void 0:g.contentType)==="video"?g:{currentTime:0}).currentTime,m=c?i:Math.max(0,Math.min(f.length-1,f.findIndex(function(e){return v===e}))),h=e(B).itemListKey,L=e(T.az).isMiniPlayerShowing;(0,A.LV)().setupBrowserList({itemListKey:h,enterIndex:m}),L&&(0,T.uZ)().setPrevPlayMode(y.ey.BrowserMode),this.updateVideoIndex({newIndex:m,newId:v,isIndexInvalid:!1,playProgress:void 0!==d&&d?_:void 0===o?0:o}),t(B,function(e){return(0,a._)((0,u._)({},e,s?{belowPlayMode:s}:{}),{afterCloseBrowserMode:l,showingBrowserMode:!0,enterIndex:m})})},handleNextVideo:function(){try{D(_.uT.BrowserModeNext);var t,n=e(B),r=n.currentIndex,i=n.isCreatorBrowserMode,o=e(i?A.o1:A.OB),s=e(N).liveCardDisplay,u=e(P.t),a=e(T.az).isMiniPlayerShowing,c=(0,j.A)(r,o,u,s,"next"),d=!o.length||c<0,l=null!=(t=o[c])?t:"";if(d)return void console.warn("cannot switch to next video for some reasons");a?(0,T.uZ)().handleNextVideo():this.updateVideoIndex({newIndex:c,newId:l,isIndexInvalid:!1})}catch(e){}},handlePrevVideo:function(){try{D(_.uT.BrowserModePrev);var t,n=e(B),r=n.currentIndex,i=n.isCreatorBrowserMode,o=e(N),s=e(i?A.o1:A.OB),u=o.liveCardDisplay,a=e(P.t),c=e(T.az).isMiniPlayerShowing,d=(0,j.A)(r,s,a,u,"prev"),l=!s.length||d>s.length-1,p=null!=(t=s[d])?t:"";if(l)return void console.warn("cannot switch to prev video for some reasons");c?(0,T.uZ)().handlePrevVideo():this.updateVideoIndex({newIndex:d,newId:p,isIndexInvalid:!1})}catch(e){}},getAdjacentVideoInfo:function(){var t=e(B),n=t.currentIndex,r=e(t.isCreatorBrowserMode?A.o1:A.OB);return[r[n-1],r[n+1]].map(function(e){return null!=e?e:0})}}}),q=K.useServiceState,W=K.useServiceDispatchers,Z=K.useAtomService,G=K.getStaticApi},15035:function(e,t,n){n.d(t,{W:function(){return l},o:function(){return d}});var r=n(5377),i=n(45996),o=n(71111),s=n(66905),u={statusCode:n(71952).s.Ok,statusMessage:"",toastNotShown:!1},a=(0,o.atom)((0,r._)({},u)),c=(0,s.i)(a,function(e,t){return{setBrowserModeStatus:function(e){t(a,(0,i._)((0,r._)({},e),{toastNotShown:!0}))},clearBrowserModeStatus:function(){t(a,(0,r._)({},u))}}}),d=c.getStaticApi,l=c.useAtomService},56708:function(e,t,n){n.d(t,{A:function(){return u},N:function(){return a}});var r=n(50870),i=n(48323),o=n(45893),s=n(70143),u=function(e,t,n,o,s){var u=o===r.po.DISPLAY_SINGLE_COLUMN,a="next"===s?e+1:e-1;if(u)for(var c=null!=(l=t[a])?l:"",d=(0,i.Jl)(n[c]);d;){var l,p,f=null!=(p=t[a="next"===s?a+1:a-1])?p:"";if(d=(0,i.Jl)(n[f]),a>t.length-1||a<0||""===f)return e}return Math.max(Math.min(a,t.length-1),0)},a=function(e,t){var n,r=(0,o.D)(t);return r?e(r):null!=(n=e(s.D)[null!=t?t:""])?n:{}}},81329:function(e,t,n){n.d(t,{Dy:function(){return S},Sp:function(){return C},az:function(){return L},mE:function(){return b},uZ:function(){return M}});var r,i,o=n(79066),s=n(5377),u=n(45996),a=n(54333),c=n(72516),d=n(71111),l=n(66905),p=n(90432),f=n(58034),v=n(53069),g=n(63683),y=n(56708),_=n(86712),m=n(25435),h={isDocumentPipSupporting:"undefined"!=typeof window&&"documentPictureInPicture"in window&&(i=(r=navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)\./))?Number(r[1]):-1)>=126&&133!==i,pipWindow:null,isMiniPlayerShowing:!1,itemListKey:null,currentIndex:0,prevPlayMode:null,miniPlayerRef:null,svgChangeObserver:null,enterTimestamp:0,windowHeight:598,windowWidth:306},L=(0,d.atom)(h);L.debugLabel="miniPlayerAtom";var w=(0,d.atom)(function(e){var t=e(L).itemListKey;return(0,y.N)(e,t)}),I=(0,l.i)(L,function(e,t){return{setItemListKey:function(e){t(L,function(t){return(0,u._)((0,s._)({},t),{itemListKey:e})})},setCurrentIndex:function(e){t(L,function(t){return(0,u._)((0,s._)({},t),{currentIndex:e})})},setPrevPlayMode:function(e){t(L,function(t){return(0,u._)((0,s._)({},t),{prevPlayMode:e})})},setIsMiniPlayerShowing:function(e){t(L,function(t){return(0,u._)((0,s._)({},t),{isMiniPlayerShowing:e})})},setMiniPlayerRef:function(e){t(L,function(t){return(0,u._)((0,s._)({},t),{miniPlayerRef:e})})},setIsLandingIndicatorDismissed:function(e){t(L,function(t){return(0,u._)((0,s._)({},t),{isLandingIndicatorDismissed:e})})},initEnableNewLocalStorageKey:function(){t(L,function(e){return(0,u._)((0,s._)({},e),{enableNewLocalStorageKey:!1})})},setIsAfterSwitchTabOrWindowSizeChange:function(e){t(L,function(t){return(0,u._)((0,s._)({},t),{isAfterSwitchTabOrWindowSizeChange:e})})},setIsAfterSwitchTabOrWindowSizeChangeIndicatorDismissed:function(e){t(L,function(t){return(0,u._)((0,s._)({},t),{isAfterSwitchTabOrWindowSizeChangeIndicatorDismissed:e})})},updateMiniPlayerSize:function(){var n=e(L).pipWindow;if(n){var r=n.innerHeight,i=n.innerWidth;t(L,function(e){return(0,u._)((0,s._)({},e),{windowHeight:r,windowWidth:i})})}},updateVideoIndex:function(n){var r=n.newIndex,i=n.newId,o=n.playProgress,a=n.isMiniPlayerNotSupported,c=e(L).prevPlayMode;t(L,function(e){return(0,u._)((0,s._)({},e),{currentIndex:r})});var d={currentVideo:{index:r,id:i,mode:a?c:f.ey.MiniPlayer},playProgress:null!=o?o:0};(0,v.LM)().updateVideo(d),e(m.$T).showingBrowserMode&&(0,m.bc)().updateVideoIndex({newId:i,newIndex:r,isIndexInvalid:!1})},closeMiniPlayer:function(n){var r,i,o,a=n.playMode,c=n.enter_method,d=e(L),l=d.currentIndex,g=d.prevPlayMode,y=d.pipWindow,_=d.miniPlayerRef,m=d.svgChangeObserver,h=d.enterTimestamp,I=e(w).list,b=void 0===I?[]:I,S=null!=(i=b[l])?i:"",C=b.findIndex(function(e){return S===e}),M=null!=(o=null==_||null==(r=_.current)?void 0:r.currentTime)?o:0;y&&(null==y||y.close(),p.f.sendEvent("turn_off_mini_player",{play_mode:f.Jr[null!=g?g:"-1"],group_id:S,enter_method:c,stay_duration:(Date.now()-h)/1e3,has_more:l<b.length-1}),(0,v.LM)().updateVideo({currentVideo:{index:C,id:S,mode:null!=a?a:g},playProgress:M}),null==m||m.disconnect(),t(L,function(e){return(0,u._)((0,s._)({},e),{pipWindow:null,isMiniPlayerShowing:!1,itemListKey:null,currentIndex:0,prevPlayMode:null,miniPlayerRef:null,svgChangeObserver:null,enterTimestamp:0})}))},openMiniPlayer:function(n){return(0,o._)(function(){var r,i,o,d,l,h,w,I,b,S,C,M,T,k,P,O,x,A,U,E,F,D,V;return(0,c.__generator)(this,function(c){switch(c.label){case 0:if(r=this,o=void 0===(i=n.index)?0:i,d=n.playMode,l=n.itemListKey,h=n.itemId,w=(0,g.Q3)().getVideoPlayProgressState({itemId:h}).currentTime,b=(I=e(L)).pipWindow,S=I.isDocumentPipSupporting,C=I.windowHeight,M=I.windowWidth,!S||"undefined"==typeof window||null!==b)return[2];T=(0,y.N)(e,l).list,P=(k=e(m.$T)).showingBrowserMode,O=k.isCreatorBrowserMode,x=e(_.JV).browserList,A=P&&!O?x[o]:T[o],c.label=1;case 1:return c.trys.push([1,3,,4]),U=Date.now(),documentPictureInPicture.addEventListener("enter",function(){p.f.sendEvent("enter_mini_player",{latency:Date.now()-U,play_mode:f.Jr[d],group_id:A})},{once:!0}),[4,window.documentPictureInPicture.requestWindow({width:M,height:C})];case 2:return(E=c.sent()).addEventListener("pagehide",function(){r.closeMiniPlayer({playMode:d})},{once:!0}),(0,a._)(document.styleSheets).forEach(function(e){try{var t=(0,a._)(e.cssRules).map(function(e){return e.cssText}).join(""),n=document.createElement("style");n.textContent=t,E.document.head.appendChild(n)}catch(t){var r=document.createElement("link");if(null===e.href)return;r.rel="stylesheet",r.type=e.type,r.media=e.media.toString(),r.href=e.href,E.document.head.appendChild(r)}}),this.createOrUpdateSVGSprite(E),F=document.querySelector("#svg-sprite-container"),D=new MutationObserver(function(){return r.createOrUpdateSVGSprite(E)}),F&&D.observe(F,{subtree:!0,childList:!0}),V={currentVideo:{index:o,id:A,mode:f.ey.MiniPlayer},playProgress:w},(0,v.LM)().updateVideo(V),t(L,function(e){return(0,u._)((0,s._)({},e),{enterTimestamp:Date.now(),itemListKey:l,prevPlayMode:d,isMiniPlayerShowing:!0,currentIndex:o,pipWindow:E,svgChangeObserver:D})}),[3,4];case 3:return console.error("DocumentPIP error",c.sent()),[3,4];case 4:return[2]}})}).call(this)},createOrUpdateSVGSprite:function(e){var t=document.querySelector("#svg-sprite-container");try{var n=e.document.body.querySelector("svg");n||(n=document.createElement("svg"),e.document.body.appendChild(n)),n.innerHTML=(null==t?void 0:t.outerHTML)||""}catch(e){console.log("error to copy svg sprite",e)}},handleNextVideo:function(){try{var t,n=e(L).currentIndex,r=e(w).list,i=n+1,o=null!=(t=r[i])?t:"";if(!r.length||i<0||i>=r.length)return void console.warn("cannot switch to next video for some reasons");this.updateVideoIndex({newIndex:i,newId:o})}catch(e){}},handlePrevVideo:function(){try{var t,n=e(L).currentIndex,r=e(w).list,i=n-1,o=!r.length||i<0||i>=r.length,s=null!=(t=r[i])?t:"";if(o)return void console.warn("cannot switch to prev video for some reasons");this.updateVideoIndex({newIndex:i,newId:s})}catch(e){}}}}),b=I.useServiceState,S=I.useServiceDispatchers,C=I.useAtomService,M=I.getStaticApi},58394:function(e,t,n){n.d(t,{U:function(){return $}});var r,i=n(48748),o=n(95170),s=n(7120),u=n(5377),a=n(45996),c=n(16327),d=n(6586),l=n(54333),p=n(79262),f=n(23999),v=n(46657),g=n(25572),y=n(9543),_=n(19293),m=n(72916),h=n(95719),L=n(68710),w=n(64468),I=n(24451),b=n(62564),S=n(20259),C=n(74690),M=n(35572),T=n(39304),k=n(82379),P=n(95092),O=n(2999),x=n(50870),A=n(56680),U=n(4076),E=n(20746),F=n(70301),D=n(45017),V=n(66868),j=n(12293),z=n(92739),R=n(71952),B=n(80728),N=n(16020),K=n(97546),q=n(53535),W=n(92327);function Z(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if(("undefined"==typeof Reflect?"undefined":(0,p._)(Reflect))==="object"&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function G(e,t){if(("undefined"==typeof Reflect?"undefined":(0,p._)(Reflect))==="object"&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}var $=function(e){function t(e,n){var r;return(0,o._)(this,t),(r=(0,i._)(this,t)).service=e,r.t=n,r.defaultState={users:{},stats:{}},r}(0,s._)(t,e);var n=t.prototype;return n.multiSetUser=function(e,t){(0,j.Gp)().multiSetUser(t)},n.setUser=function(e,t){(0,j.Gp)().setUser(t)},n.setUserRelation=function(e,t){(0,j.Gp)().setUserRelation(t)},n.setUserStats=function(e,t){(0,j.Gp)().setUserStats(t)},n.multiSetUserStats=function(e,t){(0,j.Gp)().multiSetUserStats(t)},n.getUserDetail=function(e){var t=this;return e.pipe((0,m.n)(function(e){return t.service.getUserDetail(e).pipe((0,h.M)(function(e){(e.statusCode===R.s.Ok||e.statusCode===R.s.UserPrivate)&&e.userInfo||console.warn("Get user detail failed for getting wrong response")}),(0,L.Z)(function(e){return(e.statusCode===R.s.Ok||e.statusCode===R.s.UserPrivate)&&e.userInfo?(0,f.of)(t.getActions().setUser((0,a._)((0,u._)({},e.userInfo.user),{extraInfo:{statusCode:e.statusCode}})),t.getActions().setUserStats({stats:(0,a._)((0,u._)({},e.userInfo.stats),{needFix:!1}),uniqueId:e.userInfo.user.uniqueId})):v.w}),(0,K.n)({}))}))},n.postCommitFollowUser=function(e){var t=this;return e.pipe((0,w.$)(function(e){return e.uniqueId}),(0,L.Z)(function(e){return e.pipe((0,I.E)(t.state$),(0,b.T)(function(e){var t=(0,d._)(e,2),n=t[0],r=t[1].users[n.uniqueId],i=r.id,o=r.secUid,s=r.relation,u=void 0===s?x.yf.UNKNOW:s,a=(0,z.gN)(u),l={type:+(a===A.G1Q.Follow),action_type:+(a===A.G1Q.Follow),user_id:i,sec_user_id:void 0===o?"":o,from:18,channel_id:R.F.Hot,from_pre:0},p=n.uniqueId,f=n.useFollowV2,v=n.group_id,g=n.enter_method;return{query:l,type:a,group_id:v,enter_method:void 0===g?E.c.ClickNormalFollow:g,action_position:n.action_position,restReportParams:(0,c._)(n,["uniqueId","useFollowV2","group_id","enter_method","action_position"]),id:i,uniqueId:p,useFollowV2:f,relation:u,targetUser:r}}),(0,m.n)(function(e){var n=e.query,r=e.group_id,i=e.enter_method,o=e.action_position,s=e.restReportParams,c=e.id,d=e.uniqueId,l=e.useFollowV2,p=e.relation,f=e.targetUser;return(l?t.service.postCommitFollowUserV2(n):t.service.postCommitFollowUser(n)).pipe((0,S.W)(function(e){return(0,g.H)(e.json())}),(0,b.T)(function(e){return(0,u._)({status_code:null==e?void 0:e.status_code,follow_status:null==e?void 0:e.follow_status},e)}),(0,h.M)(function(e){var d=e.status_code,l=e.follow_status;if(d===R.s.UserInboxFollowBan?V.F.open({content:t.t("inbox_follow_failed_banned"),duration:3,widthType:"half"}):d===R.s.UnknownError?V.F.open({content:t.t("inbox_follow_failed_noconnection"),duration:3,widthType:"half"}):d!==R.s.Ok?V.F.open({content:t.t("inbox_follow_failed_other"),duration:3,widthType:"half"}):(0,B.G)(d,[R.s.UserInboxFollowBan,R.s.UnknownError,R.s.Ok]),F.ti.handleFollowUser((0,a._)((0,u._)({},s),{status_code:d,follow_status:l,group_id:r,enter_method:i,action_position:o,to_user_id:c,author_id:c,follow_type:l===A.m33.FollowEachOtherStatus?"mutual":"single",is_private:+(l===A.m33.FollowRequestStatus)}),n.type),s.is_ad_event&&s.tag&&s.value&&s.log_extra&&n.type===A.G1Q.Unfollow){var p=s.tag,f=s.value,v=s.log_extra;D.pg.handleFollowCancel({log_extra:v,tag:p,value:f,is_ad_event:"1"})}}),(0,b.T)(function(e){var n=e.follow_status;return e.status_code===R.s.Ok?t.getActions().setUserRelation({uniqueId:d,relation:q.i0[n],shouldUpdateFollowed:!0}):t.getActions().setUserRelation({uniqueId:d,relation:p})}),(0,C.Z)(t.getActions().setUserRelation({uniqueId:d,relation:(0,z.A7)({current:p,targetUser:f})})),(0,K.n)({}))}))}))},n.blockOrUnblockUser=function(e){var t=this;return e.pipe((0,M.p)(function(e){var n=e.secUid,r=e.isBlock,i=e.uniqueId;return t.service.blockUser({sec_user_id:null!=n?n:"",block_type:+!r}).pipe((0,h.M)(function(e){e.status_code===R.s.Ok&&V.F.open({content:t.t(r?"webapp_mig_unblocked":"webapp_mig_blocked"),duration:3,e2eTag:"block-toast"})}),(0,b.T)(function(e){return e.status_code===R.s.Ok?t.getActions().setUserRelation({uniqueId:i,relation:r?x.yf.NONE:x.yf.BLOCK}):t.noop()}),(0,K.n)({}))}))},n.getLiveStatus=function(e){var t=this;return e.pipe((0,m.n)(function(){return(0,y.Y)(6e5).pipe((0,I.E)(t.state$),(0,b.T)(function(e){var t=(0,d._)(e,2);return Object.values((t[0],t[1].users)).filter(function(e){return!!(null==e?void 0:e.roomId)})}),(0,L.Z)(function(e){return f.of.apply(void 0,(0,l._)(e.map(function(e){return t.getActions().getUserDetail({secUid:null==e?void 0:e.secUid})})))}))}))},t}(U.E);$.jotaiAtom=j.p9,Z([(0,k.h5)(),G("design:type",Function),G("design:paramtypes",["undefined"==typeof UserModuleState?Object:UserModuleState,Array]),G("design:returntype",void 0)],$.prototype,"multiSetUser",null),Z([(0,k.h5)(),G("design:type",Function),G("design:paramtypes",["undefined"==typeof UserModuleState?Object:UserModuleState,"undefined"==typeof ExtendedUserStruct?Object:ExtendedUserStruct]),G("design:returntype",void 0)],$.prototype,"setUser",null),Z([(0,k.h5)(),G("design:type",Function),G("design:paramtypes",["undefined"==typeof Draft?Object:Draft,Object]),G("design:returntype",void 0)],$.prototype,"setUserRelation",null),Z([(0,k.h5)(),G("design:type",Function),G("design:paramtypes",["undefined"==typeof UserModuleState?Object:UserModuleState,"undefined"==typeof StatsPayload?Object:StatsPayload]),G("design:returntype",void 0)],$.prototype,"setUserStats",null),Z([(0,k.h5)(),G("design:type",Function),G("design:paramtypes",["undefined"==typeof UserModuleState?Object:UserModuleState,Array]),G("design:returntype",void 0)],$.prototype,"multiSetUserStats",null),Z([(0,k.Mj)(),G("design:type",Function),G("design:paramtypes",[void 0===_.c?Object:_.c]),G("design:returntype",void 0)],$.prototype,"getUserDetail",null),Z([(0,k.Mj)(),G("design:type",Function),G("design:paramtypes",[void 0===_.c?Object:_.c]),G("design:returntype",void 0)],$.prototype,"postCommitFollowUser",null),Z([(0,k.Mj)(),G("design:type",Function),G("design:paramtypes",[void 0===_.c?Object:_.c]),G("design:returntype",void 0)],$.prototype,"blockOrUnblockUser",null),Z([(0,k.Mj)(),G("design:type",Function),G("design:paramtypes",[void 0===_.c?Object:_.c]),G("design:returntype",void 0)],$.prototype,"getLiveStatus",null),$=Z([(0,P.nV)("UserModule"),(r=(0,O.y)(N.hp),function(e,t){r(e,t,1)}),G("design:type",Function),G("design:paramtypes",[void 0===W.D?Object:W.D,"undefined"==typeof I18NTranslate?Object:I18NTranslate])],$),j.p9.__SIGI_MODULE__=$,(0,T.y)($)},92327:function(e,t,n){n.d(t,{D:function(){return v}});var r=n(95170),i=n(35383),o=n(5377),s=n(45996),u=n(79262),a=n(23999),c=n(97623),d=n(9087),l=n(54149),p=n(10987);function f(e,t){if(("undefined"==typeof Reflect?"undefined":(0,u._)(Reflect))==="object"&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}var v=function(){function e(t){(0,r._)(this,e),this.fetch=t}var t=e.prototype;return t.getUserDetail=function(e){var t=(0,d.Ni)("userDetail");return t?(0,a.of)(t):this.fetch.get("/api/user/detail/",{query:e,baseUrlType:l.Z4.FixedWww})},t.postCommitFollowUser=function(e){return this.fetch.post("/api/commit/follow/user/",{query:(0,s._)((0,o._)({},e),{fromWeb:1}),baseUrlType:l.Z4.FixedWww,headers:(0,i._)({},l.nk,this.fetch.csrfToken)})},t.postCommitFollowUserV2=function(e){return this.fetch.post("/api/follow/",{signal:new AbortController().signal,query:(0,s._)((0,o._)({},e),{fromWeb:1}),baseUrlType:l.Z4.FixedWww,headers:(0,i._)({},l.nk,this.fetch.csrfToken)})},t.blockUser=function(e){return this.fetch.post("/api/user/block/",{query:(0,s._)((0,o._)({},e),{source:3}),baseUrlType:l.Z4.FixedWww,headers:(0,i._)({},l.nk,this.fetch.csrfToken)})},e}();v=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if(("undefined"==typeof Reflect?"undefined":(0,u._)(Reflect))==="object"&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([(0,c._q)(),f("design:type",Function),f("design:paramtypes",[void 0===p.p?Object:p.p])],v)},70143:function(e,t,n){n.d(t,{D:function(){return eo},O:function(){return ei}});var r=n(79066),i=n(48748),o=n(95170),s=n(7120),u=n(5377),a=n(45996),c=n(6586),d=n(54333),l=n(79262),p=n(72516),f=n(61945),v=n(76186),g=n(23999),y=n(63700),_=n(19293),m=n(20259),h=n(72916),L=n(62564),w=n(80339),I=n(24451),b=n(35572),S=n(68710),C=n(95719),M=n(45525),T=n(74690),k=n(76435),P=n(39304),O=n(11483),x=n(82379),A=n(95092),U=n(2999),E=n(50870),F=n(2475),D=n(3595),V=n(4076),j=n(49861),z=n(66868),R=n(42963),B=n(48323),N=n(37240),K=n(77417),q=n(71952),W=n(89134),Z=n(16020),G=n(49065),$=n(85443),H=n(95952),Q=n(62869),J=n(70721),Y=n(61874),X=n(98402),ee=n(73120);function et(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if(("undefined"==typeof Reflect?"undefined":(0,l._)(Reflect))==="object"&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function en(e,t){if(("undefined"==typeof Reflect?"undefined":(0,l._)(Reflect))==="object"&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function er(e,t){return function(n,r){t(n,r,e)}}var ei=function(e){function t(e,n,r,s,u,a,c){var d;return(0,o._)(this,t),(d=(0,i._)(this,t)).service=e,d.item=n,d.videoMask=r,d.bizContext=s,d.jotaiStore=u,d.t=a,d.getFirstVideoCover=c,d.defaultState={},d.createItemListErrorCatcher=function(e){return function(t){return t.pipe((0,m.W)(function(t){return z.F.destroy(),z.F.open({content:d.t("server_error_title"),duration:3,widthType:"padding"}),null==e||e(t),(0,g.of)({statusCode:q.s.UnknownError})}))}},d}(0,s._)(t,e);var n=t.prototype;return n.resetItemList=function(e,t){var n=t.key,r=t.hasMore,i=t.loading,o=t.cursor;e[n]={list:[],browserList:[],loading:void 0===i||i,statusCode:q.s.Ok,hasMore:void 0===r||r,cursor:void 0===o?"0":o,preloadList:[]}},n.addItemList=function(e,t){var n,r,i=t.key,o=t.list,s=t.statusCode,u=void 0===s?q.s.Ok:s,a=t.hasMore,c=t.hasMorePrevious,l=t.hasMoreLatest,p=t.cursor,g=t.level,y=t.preloadList,_=t.addToHead,m=t.liveCardDisplay,h=t.unviewedCursor,L=t.viewedCursor,w=t.unique,I=void 0===w||w,b=i===R.Lz.Topic||i===R.Lz.Messages;e[i]||(e[i]={list:[],browserList:[],loading:!1,statusCode:u,hasMore:!!a,cursor:p,preloadList:[]});var S=e[i].list,C=I?(0,f.A)(o,"id").filter(function(e){return!S.includes(e.id)}):o;if(_)(n=e[i].list).unshift.apply(n,(0,d._)(C.map(function(e){return e.id}))),e[i].browserList=(0,d._)((0,B.bp)({list:C})).concat((0,d._)(e[i].browserList));else{var M=(0,v.A)(e[i].list,C.map(function(e){return e.id}));I?(e[i].list=b?S.concat(o.map(function(e){return e.id})):M,e[i].browserList=b?e[i].browserList.concat((0,B.bp)({list:o})):(0,v.A)(e[i].browserList,(0,B.bp)({list:C}))):(e[i].list=o.map(function(e){return e.id}),e[i].browserList=(0,B.bp)({list:C}))}e[i].statusCode=u,e[i].hasMore=a,e[i].cursor=p,e[i].level=g,e[i].liveCardDisplay=m,e[i].preloadList=(null!=(r=e[i].preloadList)?r:[]).concat(null!=y?y:[]),i===R.Lz.CreatorTab&&(e[i].hasMorePrevious=null!=c?c:e[i].hasMorePrevious,e[i].hasMoreLatest=null!=l?l:e[i].hasMoreLatest),i===R.Lz.Friends&&(e[i].unviewedCursor=null!=h?h:e[i].unviewedCursor,e[i].viewedCursor=null!=L?L:e[i].viewedCursor)},n.setItemListById=function(e,t){var n=t.key,r=t.list,i=t.statusCode,o=void 0===i?q.s.Ok:i,s=t.hasMore,u=void 0===s||s,a=t.cursor,c=t.level;e[n]||(e[n]={list:[],browserList:[],loading:!1,statusCode:o,hasMore:!!u,cursor:a,preloadList:[]}),e[n].list=r,e[n].browserList=r,e[n].statusCode=o,e[n].hasMore=u,e[n].cursor=a,e[n].level=c},n.removeItemListById=function(e,t){var n,r=t.key,i=t.groupId;(null==(n=e[r])?void 0:n.list)&&(e[r].list=e[r].list.filter(function(e){return e!==i}))},n.setLoading=function(e,t){var n=t.loading,r=t.key;e[r]||(e[r]={list:[],browserList:[],loading:n,statusCode:q.s.Ok,hasMore:!0,cursor:"0"}),e[r].loading=n},n.setListKeyword=function(e,t){var n=t.keyword,r=t.key;e[r]||(e[r]={keyword:n,list:[],browserList:[],loading:!1,statusCode:q.s.Ok,hasMore:!0,cursor:"0"}),e[r].keyword=n},n.getTopicList=function(e){var t=this;return e.pipe((0,h.n)(function(e){var n=e.topic,r=e.abTestVersion,i=e.user,o=e.language;return t.service.getTopicList({topic:n,language:o,count:J.Uw,aid:J.xE}).pipe((0,L.T)(function(e){return(0,a._)((0,u._)({},e),{hasMore:!0})}),t.createItemListErrorCatcher(),t.handleListData({key:R.Lz.Topic,abTestVersion:r,user:i,language:o}),(0,w.q)(t.terminate()))}))},n.getFollowingList=function(e){var t=this;return e.pipe((0,I.E)(this.state$,this.bizContext.state$),(0,b.p)(function(e){var n,r,i,o=(0,c._)(e,3),s=o[0],u=s.pullType,a=s.abTestVersion,d=s.user,l=s.language,p=o[1],f=o[2],v=null!=(i=p[R.Lz.Following])?i:{},g=v.cursor,y=v.level;return t.service.getFollowingList({aid:J.xE,count:J.rd,language:l,cursor:void 0===g?"":g,pullType:void 0===u?1:u,level:void 0===y?1:y,isResetCounterUsed:!0,isNonPersonalized:!(0,W.fU)()&&(0,N.PJ)(t.jotaiStore.get(N.WH)),coverFormat:null==(r=f.bizContext)||null==(n=r.videoCoverSettings)?void 0:n.format,clientABVersions:null==a?void 0:a.versionName}).pipe(t.createItemListErrorCatcher(),t.handleListData({key:R.Lz.Following,language:l,user:d,abTestVersion:a}))}))},n.getFriendsList=function(e){var t=this;return e.pipe((0,I.E)(this.state$,this.bizContext.state$),(0,b.p)(function(e){var n,r,i,o=(0,c._)(e,3),s=o[0],u=s.pullType,a=s.abTestVersion,d=s.user,l=s.language,p=o[1],f=o[2],v=null!=(i=p[R.Lz.Friends])?i:{},g=v.unviewedCursor,y=v.viewedCursor,_=v.level;return t.service.getFriendsList({aid:J.xE,count:J.Ly,language:l,unviewedCursor:void 0===g?"0":g,viewedCursor:void 0===y?"0":y,pullType:void 0===u?1:u,level:void 0===_?1:_,isResetCounterUsed:!0,isNonPersonalized:!(0,W.fU)()&&(0,N.PJ)(t.jotaiStore.get(N.WH)),coverFormat:null==(r=f.bizContext)||null==(n=r.videoCoverSettings)?void 0:n.format,clientABVersions:null==a?void 0:a.versionName}).pipe(t.createItemListErrorCatcher(),t.handleListData({key:R.Lz.Friends,language:l,user:d,abTestVersion:a}))}))},n.getQuestionList=function(e){var t=this;return e.pipe((0,S.Z)(function(e){return t.getQuestionList$(e)}))},n.getQuestionList$=function(e){var t=this;return(0,g.of)(e).pipe((0,I.E)(this.state$),(0,b.p)(function(e){var n,r,i=(0,c._)(e,2),o=i[0],s=o.questionID,u=o.abTestVersion,a=o.language,d=o.user,l=i[1];return t.service.getQuestionList({questionID:s,language:a,cursor:null!=(r=null==(n=l[R.Lz.Question])?void 0:n.cursor)?r:"0",aid:J.xE,count:J.vu}).pipe(t.createItemListErrorCatcher(),t.handleListData({key:R.Lz.Question,abTestVersion:u,language:a,user:d}))}))},n.getPlaylistVideoList=function(e){var t=this;return e.pipe((0,S.Z)(function(e){return t.getPlaylistVideoList$(e)}))},n.getPlaylistVideoList$=function(e,t){var n=this;return(0,g.of)(e).pipe((0,I.E)(this.state$),(0,b.p)(function(e){var r,i,o=(0,c._)(e,2),s=o[0],u=s.mixId,a=s.key,d=s.abTestVersion,l=s.language,p=s.user,f=s.isPlayList,v=o[1];return n.service.getPlaylistVideoList({mixId:u,language:l,cursor:null!=(i=null==(r=v[null!=a?a:u])?void 0:r.cursor)?i:"0",aid:J.xE,count:J.vu}).pipe(n.createItemListErrorCatcher(),(0,C.M)(function(e){var n;return null==t||null==(n=t.onVideoList)?void 0:n.call(t,e.itemList)}),n.handleListData({key:null!=a?a:u,abTestVersion:d,language:l,user:p,isPlayList:f}))}))},n.getCollectionList=function(e){var t=this;return e.pipe((0,S.Z)(function(e){return t.getCollectionList$(e)}))},n.getCollectionList$=function(e){var t=this;return(0,g.of)(e).pipe((0,I.E)(this.state$),(0,b.p)(function(e){var n,r,i=(0,c._)(e,2),o=i[0],s=o.collectionId,u=o.abTestVersion,a=o.language,d=o.user,l=i[1];return t.service.getCollectionList({collectionId:s,language:a,cursor:null!=(r=null==(n=l[R.Lz.Collection])?void 0:n.cursor)?r:"0",aid:J.xE,count:J.vu,sourceType:113}).pipe(t.createItemListErrorCatcher(),t.handleListData({key:R.Lz.Collection,abTestVersion:u,language:a,user:d}))}))},n.getUserVideoListByType=function(e){var t=this;return e.pipe((0,S.Z)(function(e){return t.getUserVideoListByType$(e)}))},n.getUserVideoListByType$=function(e){var t=this;return(0,g.of)(e).pipe((0,I.E)(this.state$),(0,h.n)(function(e){var n,r,i=(0,c._)(e,2),o=i[0],s=o.count,u=void 0===s?J.VD:s,a=o.postItemType,d=void 0===a?E.Ij.PUBLIC:a,l=o.key,p=o.abTestVersion,f=o.language,v=o.user,g=i[1],y={appId:J.xE,count:u,cursor:null!=(r=null==(n=g[l])?void 0:n.cursor)?r:"0",language:f,postItemType:d};return t.service.getUserPostListByType(y).pipe(t.createItemListErrorCatcher(),t.handleListData({key:l,abTestVersion:p,language:f,user:v,otherInfo:{secUid:null==v?void 0:v.secUid}}))}))},n.getPoiList=function(e){var t=this;return e.pipe((0,S.Z)(function(e){return t.getPoiList$(e)}))},n.getPoiList$=function(e){var t=this;return(0,g.of)(e).pipe((0,I.E)(this.state$),(0,b.p)(function(e){var n,r,i=(0,c._)(e,2),o=i[0],s=o.poiId,u=o.abTestVersion,a=o.language,d=o.user,l=i[1];return t.service.getPoiList({poiId:s,language:a,cursor:null!=(r=null==(n=l[R.Lz.Poi])?void 0:n.cursor)?r:"0",aid:J.xE,count:J.vu}).pipe(t.createItemListErrorCatcher(),t.handleListData({key:R.Lz.Poi,abTestVersion:u,user:d,language:a}))}))},n.setDeleteVideo=function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,s=Object.keys(e)[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value,a=e[u];if(a){var c=a.list.filter(function(e){return e!==t});e[u].list=c,e[u].browserList=a.browserList.filter(function(e){return e!==t})}}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}},n.deleteLiveItem=function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,s=Object.keys(e)[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value,a=e[u];if(a){var c=a.list.filter(function(e){return e!==t});a.list=c,a.browserList=a.browserList.filter(function(e){return e!==t})}e[u]=a}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}},n.setList=function(e){var t=this;return e.pipe((0,I.E)(this.state$,this.videoMask.state$),(0,C.M)(function(e){var t,n,r,i=(0,c._)(e,2),o=i[0],s=o.key,u=o.response,a=o.disableReportMore,d=o.isPlayList;(null!=(n=null==(t=i[1][s])?void 0:t.list)?n:[]).length&&!(void 0!==a&&a)&&j.L.handleListMore({is_success:+(null!=(r=u.itemList)&&!!r.length),error_code:u.statusCode,popup_type:void 0!==d&&d?"playlist":void 0})}),(0,L.T)(function(e){var t,n,r=(0,c._)(e,3),i=r[0],o=i.key,s=i.response,u=i.otherInfo,a=i.user,d=(r[1],r[2]),l=null!=(n=null!=(t=s.itemList)?t:s.items)?n:[];return s.itemList||(s.itemList=l),((null==a?void 0:a.photoSensitiveVideosSetting)===F.ll.CLOSE||!a&&d.photoSensitiveVideosSetting===F.ll.CLOSE)&&(o!==R.Lz.UserPost||(null==a?void 0:a.secUid)!==(null==u?void 0:u.secUid))&&(o!==R.Lz.Video||l.length>1)&&(s.itemList=l.filter(function(e){return e.containerType===E.Kk.CONTAINERTYPE_LIVE||(null==e?void 0:e.maskType)!==K.D.Photosensitive})),s.itemList=s.itemList.map(function(e){if((0,B.Jl)(e)){var t;e.id=(0,B.Qw)(null==(t=e.liveRoomInfo)?void 0:t.roomID)}return e}),{key:o,response:s,otherInfo:u}}),(0,C.M)(function(e){e.key,e.response}),(0,S.Z)(function(e){var n=e.key,r=e.response,i=e.otherInfo,o=r.log_pb,s=r.itemList,u=void 0===s?[]:s,a=r.statusCode,c=void 0===a?q.s.Ok:a,l=r.hasMore,p=void 0!==l&&l,f=r.hasMorePrevious,v=r.liveCardDisplay,y=r.hasMoreLatest,_=r.cursor,m=r.level,h=r.viewedCursor,L=r.unviewedCursor,w=u.filter(function(e){return e.containerType!==E.Kk.CONTAINERTYPE_LIVE}).map(function(e){var t,n,r,i;return{url:null!=(r=null==(t=e.video)?void 0:t.playAddr)?r:"",id:null!=(i=null==(n=e.video)?void 0:n.id)?i:""}});return c===q.s.Ok&&n===R.Lz.CreatorTab?g.of.apply(void 0,(0,d._)(t.item.addItems(u,null==o?void 0:o.impr_id)).concat([t.getActions().addItemList({key:n,list:u,statusCode:c,hasMore:p,hasMorePrevious:f,hasMoreLatest:y,preloadList:w,addToHead:null==i?void 0:i.addToHead})])):(c===q.s.Ok||c===q.s.FypVideoListLimit)&&n===R.Lz.Friends?g.of.apply(void 0,(0,d._)(t.item.addItems(u,null==o?void 0:o.impr_id)).concat([t.getActions().addItemList({key:n,list:u,statusCode:c,hasMore:p,level:m,preloadList:w,addToHead:null==i?void 0:i.addToHead,viewedCursor:void 0===h?"0":h,unviewedCursor:void 0===L?"0":L})])):c===q.s.Ok||c===q.s.FypVideoListLimit?g.of.apply(void 0,(0,d._)(t.item.addItems(u,null==o?void 0:o.impr_id)).concat([t.getActions().addItemList({key:n,list:u,statusCode:c,hasMore:p,cursor:void 0===_?"0":_,level:m,preloadList:w,liveCardDisplay:v})])):(0,g.of)(t.getActions().addItemList({key:n,list:[],statusCode:c,hasMore:!0,preloadList:w}))}))},n.handleListData=function(e){var t=this,n=e.key,r=e.language,i=e.user,o=e.otherInfo,s=e.onResponse,u=e.isPlayList;return function(e){return e.pipe((0,M.w)(J.LA),(0,S.Z)(function(e){var a;return(0,y.h)((0,g.of)(t.getActions().setList({key:n,response:e,otherInfo:o,language:r,user:i,isPlayList:u})),null!=(a=null==s?void 0:s(e))?a:(0,g.of)(t.noop()))}),(0,T.Z)(t.getActions().setLoading({key:n,loading:!0})),(0,w.q)(t.getActions().setLoading({key:n,loading:!1})),(0,k.Q)(t.dispose$))}},t}(V.E);et([(0,x.uk)(),en("design:type",void 0===_.c?Object:_.c)],ei.prototype,"dispose$",void 0),et([(0,x.h5)(),en("design:type",Function),en("design:paramtypes",["undefined"==typeof ItemListModuleState?Object:ItemListModuleState,Object]),en("design:returntype",void 0)],ei.prototype,"resetItemList",null),et([(0,x.h5)(),en("design:type",Function),en("design:paramtypes",["undefined"==typeof ItemListModuleState?Object:ItemListModuleState,Object]),en("design:returntype",void 0)],ei.prototype,"addItemList",null),et([(0,x.h5)(),en("design:type",Function),en("design:paramtypes",["undefined"==typeof ItemListModuleState?Object:ItemListModuleState,Object]),en("design:returntype",void 0)],ei.prototype,"setItemListById",null),et([(0,x.h5)(),en("design:type",Function),en("design:paramtypes",["undefined"==typeof ItemListModuleState?Object:ItemListModuleState,Object]),en("design:returntype",void 0)],ei.prototype,"removeItemListById",null),et([(0,x.h5)(),en("design:type",Function),en("design:paramtypes",["undefined"==typeof ItemListModuleState?Object:ItemListModuleState,Object]),en("design:returntype",void 0)],ei.prototype,"setLoading",null),et([(0,x.h5)(),en("design:type",Function),en("design:paramtypes",["undefined"==typeof ItemListModuleState?Object:ItemListModuleState,Object]),en("design:returntype",void 0)],ei.prototype,"setListKeyword",null),et([(0,x.Mj)({payloadGetter:(0,H.i)([D.OZ.topics],function(e){return(0,r._)(function(){var t,n,r,i,o;return(0,p.__generator)(this,function(s){switch(s.label){case 0:return t=e.params.name,[4,e.service.baseContext.getBaseContext()];case 1:return r=(n=s.sent()).abTestVersion,i=n.user,o=n.language,[2,{topic:(0,Q.o)(t),abTestVersion:r,language:o,user:i}]}})})()}),skipFirstClientDispatch:!1}),en("design:type",Function),en("design:paramtypes",[void 0===_.c?Object:_.c]),en("design:returntype",void 0)],ei.prototype,"getTopicList",null),et([(0,x.Mj)(),en("design:type",Function),en("design:paramtypes",[void 0===_.c?Object:_.c]),en("design:returntype",void 0)],ei.prototype,"getFollowingList",null),et([(0,x.Mj)(),en("design:type",Function),en("design:paramtypes",[void 0===_.c?Object:_.c]),en("design:returntype",void 0)],ei.prototype,"getFriendsList",null),et([(0,x.Mj)(),en("design:type",Function),en("design:paramtypes",[void 0===_.c?Object:_.c]),en("design:returntype",void 0)],ei.prototype,"getQuestionList",null),et([(0,x.Mj)(),en("design:type",Function),en("design:paramtypes",[void 0===_.c?Object:_.c]),en("design:returntype",void 0)],ei.prototype,"getPlaylistVideoList",null),et([(0,x.Mj)(),en("design:type",Function),en("design:paramtypes",[void 0===_.c?Object:_.c]),en("design:returntype",void 0===_.c?Object:_.c)],ei.prototype,"getCollectionList",null),et([(0,x.Mj)(),en("design:type",Function),en("design:paramtypes",[void 0===_.c?Object:_.c]),en("design:returntype",void 0)],ei.prototype,"getUserVideoListByType",null),et([(0,x.Mj)(),en("design:type",Function),en("design:paramtypes",[void 0===_.c?Object:_.c]),en("design:returntype",void 0)],ei.prototype,"getPoiList",null),et([(0,x.h5)(),en("design:type",Function),en("design:paramtypes",["undefined"==typeof ItemListModuleState?Object:ItemListModuleState,String]),en("design:returntype",void 0)],ei.prototype,"setDeleteVideo",null),et([(0,x.h5)(),en("design:type",Function),en("design:paramtypes",["undefined"==typeof ItemListModuleState?Object:ItemListModuleState,String]),en("design:returntype",void 0)],ei.prototype,"deleteLiveItem",null),et([(0,x.Mj)(),en("design:type",Function),en("design:paramtypes",[void 0===_.c?Object:_.c]),en("design:returntype",void 0)],ei.prototype,"setList",null),ei=et([(0,A.nV)("ItemList"),er(4,(0,U.y)(O.J7)),er(5,(0,U.y)(Z.hp)),er(6,(0,U.y)(X.t.provide)),en("design:type",Function),en("design:paramtypes",[void 0===ee.j?Object:ee.j,void 0===Y.k?Object:Y.k,void 0===G.w?Object:G.w,void 0===$.$?Object:$.$,"undefined"==typeof JotaiStoreType?Object:JotaiStoreType,"undefined"==typeof I18NTranslate?Object:I18NTranslate,"undefined"==typeof GetCoverCallback?Object:GetCoverCallback])],ei);var eo=(0,P.y)(ei)},61874:function(e,t,n){n.d(t,{t:function(){return eu},k:function(){return es}});var r=n(48748),i=n(95170),o=n(7120),s=n(5377),u=n(45996),a=n(16327),c=n(6586),d=n(79262),l=n(87933),p=n(23999),f=n(87662),v=n(46657),g=n(19293),y=n(72916),_=n(24451),m=n(62564),h=n(68710),L=n(95719),w=n(74690),I=n(64468),b=n(76773),S=n(36166),C=n(20259),M=n(39304),T=n(11483),k=n(82379),P=n(95092),O=n(2999),x=n(50870),A=n(56680),U=n(88999),E=n(4076),F=n(9215),D=n(20746),V=n(3878),j=n(58034),z=n(7509),R=n(54435),B=n(78639),N=n(66868),K=n(34826),q=n(48323),W=n(71952),Z=n(41076),G=n(16020),$=n(97546),H=n(70721),Q=n(58394),J=n(35383),Y=n(97623),X=n(54149),ee=n(10987);function et(e,t){if(("undefined"==typeof Reflect?"undefined":(0,d._)(Reflect))==="object"&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}var en=function(){function e(t){(0,i._)(this,e),this.fetch=t}var t=e.prototype;return t.postLikeVideo=function(e){return this.fetch.post("/api/commit/item/digg/",{query:e,baseUrlType:X.Z4.FixedWww,headers:(0,J._)({},X.nk,this.fetch.csrfToken)})},t.postDislikeVideo=function(e){return this.fetch.post("/api/dislike/item/",{query:e,baseUrlType:X.Z4.FixedWww,headers:(0,J._)({},X.nk,this.fetch.csrfToken)})},t.collectVideo=function(e){return this.fetch.post("/api/item/collect/",{query:e,baseUrlType:X.Z4.FixedWww,headers:(0,J._)({},X.nk,this.fetch.csrfToken)})},e}();function er(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if(("undefined"==typeof Reflect?"undefined":(0,d._)(Reflect))==="object"&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function ei(e,t){if(("undefined"==typeof Reflect?"undefined":(0,d._)(Reflect))==="object"&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function eo(e,t){return function(n,r){t(n,r,e)}}en=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if(("undefined"==typeof Reflect?"undefined":(0,d._)(Reflect))==="object"&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([(0,Y._q)(),et("design:type",Function),et("design:paramtypes",[void 0===ee.p?Object:ee.p])],en);var es=function(e){function t(e,n,o,s){var u;return(0,i._)(this,t),(u=(0,r._)(this,t)).service=e,u.userModule=n,u.jotaiStore=o,u.t=s,u.defaultState={},u}(0,o._)(t,e);var n=t.prototype;return n.setItem=function(e,t){(0,K.ud)().setItem(t)},n.updateItem=function(e,t){(0,K.ud)().updateItem(t)},n.multiSetItem=function(e,t){(0,K.ud)().multiSetItem(t)},n.setLike=function(e,t){(0,K.ud)().setLike(t)},n.setCollect=function(e,t){(0,K.ud)().setCollect(t)},n.setCommentCount=function(e,t){(0,K.ud)().setCommentCount(t)},n.setResolutionList=function(e,t){(0,K.ud)().setResolutionList(t)},n.reduceOrIncreaseCommentCount=function(e,t){(0,K.ud)().reduceOrIncreaseCommentCount(t)},n.addItems=function(e,t){var n=e.filter(function(e){return!!e.author}).map(function(e){return e.author}),r=e.filter(function(e){var t;return!!((null==e||null==(t=e.liveRoomInfo)?void 0:t.ownerInfo)&&(0,q.Jl)(e))}).map(function(e){return(0,u._)((0,s._)({},e.liveRoomInfo.ownerInfo),{roomId:e.liveRoomInfo.roomID})}),i=e.map(function(e){return(0,u._)((0,s._)({},e),{logId:t})});return[this.userModule.getActions().multiSetUser(n.concat(r)),this.getActions().multiSetItem(i)]},n.addItems$=function(e){var t=this;return e.pipe((0,y.n)(function(e){return t.addItems(e)}))},n.postCollectVideo=function(e){var t=this;return e.pipe((0,_.E)(this.state$,this.userModule.state$),(0,m.T)(function(e){var t,n,r,i,o=(0,c._)(e,3),s=o[0],u=o[1],a=o[2],d=s.itemId,l=s.request_id,p=u[d],f=a.users[null!=(t=null==p?void 0:p.author)?t:""],v=p.collected,g=void 0!==v&&v,y=p.stats,_=Number(null!=(n=null==y?void 0:y.collectCount)?n:0),m=g?x.Pm.ITEM_CANCEL_COLLECT:x.Pm.ITEM_COLLECT,h={aid:H.xE,itemId:d,action:m,secUid:null!=(r=null==f?void 0:f.secUid)?r:""};return{collectCount:_,collected:g,action:m,query:h,group_id:d,author_id:null!=(i=null==f?void 0:f.id)?i:"",request_id:l}}),(0,h.Z)(function(e){var n=e.collectCount,r=e.collected,i=e.query,o=e.group_id,s=e.author_id,u=e.request_id,a=e.action;return t.service.collectVideo(i).pipe((0,L.M)(function(){F.W.handleFavoriteResult({group_id:o,author_id:s,request_id:u},a)}),(0,h.Z)(function(e){return e.statusCode!==W.s.Ok?(0,l.O)(3e3).pipe((0,m.T)(function(){return t.getActions().setCollect({id:o,collected:r,count:n})})):(0,p.of)(t.noop())}),(0,w.Z)(t.getActions().setCollect({id:o,collected:!r,count:r?Math.max(0,n-1):n+1})),(0,$.n)({}))}))},n.postLikeVideo=function(e){var t=this;return e.pipe((0,I.$)(function(e){return e.id}),(0,h.Z)(function(e){var n=new f.t(0);return e.pipe((0,_.E)(t.state$,t.userModule.state$,n),(0,h.Z)(function(e){var t,n,r,i=(0,c._)(e,4),o=i[0],s=i[1],u=i[2],d=i[3],l=o.language,f=o.play_mode,g=s[o.id],y=u.users[null!=(t=null==g?void 0:g.author)?t:""],_=(0,U.x)().user,m=g.digged,h=g.stats,L=g.poi,w=g.imagePost,I=g.subVideoMeta,b=g.ad_info,S=g.repostList,C=o.id,M=o.forceLike,T=o.enter_method,k=void 0===T?D.c.Click:T,P=o.channel_id,O=(0,a._)(o,["id","forceLike","enter_method","channel_id"]),x=null!=(n=null==h?void 0:h.diggCount)?n:0,E={aweme_id:C,channel_id:P,friends_upvote:null==S?void 0:S.some(function(e){return e.secUid!==(null==_?void 0:_.secUid)}),type:M?A.u9F.Digg:m?A.u9F.Undigg:A.u9F.Digg};return M&&m?v.w:(0,p.of)({query:E,enter_method:k,diggCount:x,digged:m,author_id:null!=(r=null==y?void 0:y.id)?r:"",group_id:g.id,poi_id:null==L?void 0:L.id,restReportParams:O,changeKey:"".concat(E.type,"_").concat(d),language:l,imagePost:w,play_mode:f,is_sub_only_video:+!!I,ad_info:b})}),(0,b.w)("changeKey"),(0,y.n)(function(e){var r=e.query,i=e.enter_method,o=e.diggCount,a=e.author_id,c=e.group_id,d=e.digged,f=e.poi_id,v=e.imagePost,g=e.is_sub_only_video,y=e.restReportParams,_=e.ad_info,I=!1,b=(0,l.O)(3e3).pipe((0,m.T)(function(){return t.getActions().setLike({id:c,liked:d,count:o})}),(0,S.j)(function(){var e=n.getValue();n.next(e+1)})),M=t.getActions().setLike({id:c,liked:!d,count:d?Math.max(0,o-1):o+1});return t.service.postLikeVideo(r).pipe((0,C.W)(function(){return(0,p.of)({status_code:-1})}),(0,L.M)(function(e){var n,o,d=e.status_code,l=e.status_msg,p=e.log_pb;(d===W.s.VideoLikeFreq||d===W.s.VideoLikeFreq2)&&l&&N.F.open({content:t.t(l),duration:3,widthType:"half"}),I=!0;var m={};_&&(m=(0,V.n5)({ad_info:_,play_mode:null!=(o=y.play_mode)?o:j.Tk.OneColumn})),z.z.handleLikeVideoResult((0,u._)((0,s._)({},y,m),{group_id:c,author_id:a,log_pb:void 0===p?{}:p,enter_method:i,poi_id:f,aweme_type:150*!!v,pic_cnt:null==v||null==(n=v.images)?void 0:n.length,is_sub_only_video:g}),r.type)}),(0,S.j)(function(){var e,t,n={};_&&(n=(0,V.n5)({ad_info:_,play_mode:null!=(e=y.play_mode)?e:j.Tk.OneColumn})),I||z.z.handleLikeVideoResult((0,u._)((0,s._)({},y,n),{group_id:c,author_id:a,log_pb:{},enter_method:i,poi_id:f,aweme_type:150*!!v,pic_cnt:null==v||null==(t=v.images)?void 0:t.length,is_sub_only_video:g}),r.type)}),(0,h.Z)(function(e){var n=e.status_code,i=e.is_digg;return n!==W.s.Ok||i===r.type?b:(0,p.of)(t.noop())}),(0,w.Z)(M),(0,$.n)({}))}))}))},n.postDislikeVideo=function(e){var t=this;return e.pipe((0,_.E)(this.state$),(0,L.M)(function(e){var n=(0,c._)(e,2),r=n[0],i=n[1],o=r.id,u=r.author_id,a=r.play_mode,d=i[o],l=null==d?void 0:d.ad_info,p={};l&&((p=(0,V.n5)({ad_info:l,play_mode:a})).refer=R.Hq.Button),B.V.handleClickDislike((0,s._)({group_id:o,author_id:u,play_mode:a},p)),N.F.open({content:t.t("webapp_forYoufeed_videoRemoved_toast"),duration:3,widthType:"half",getContainer:Z.M,getContainerPosition:"fixed"})}),(0,h.Z)(function(e){var n=(0,c._)(e,1)[0],r=n.id,i=n.author_id;return t.service.postDislikeVideo({item_id:r,item_author_id:i}).pipe((0,C.W)(function(){return(0,p.of)({status_code:-1})}),(0,m.T)(function(){return t.noop()}),(0,$.n)({}))}))},n.setItemPrivateState=function(e,t){(0,K.ud)().setItemPrivateState(t)},n.setDeleteVideo=function(e,t){(0,K.ud)().setDeleteVideo(t)},t}(E.E);es.jotaiAtom=K.Pu,er([(0,k.h5)(),ei("design:type",Function),ei("design:paramtypes",["undefined"==typeof ItemModuleState?Object:ItemModuleState,Object]),ei("design:returntype",void 0)],es.prototype,"setItem",null),er([(0,k.h5)(),ei("design:type",Function),ei("design:paramtypes",["undefined"==typeof Draft?Object:Draft,Object]),ei("design:returntype",void 0)],es.prototype,"updateItem",null),er([(0,k.h5)(),ei("design:type",Function),ei("design:paramtypes",["undefined"==typeof ItemModuleState?Object:ItemModuleState,"undefined"==typeof Array?Object:Array]),ei("design:returntype",void 0)],es.prototype,"multiSetItem",null),er([(0,k.h5)(),ei("design:type",Function),ei("design:paramtypes",["undefined"==typeof ItemModuleState?Object:ItemModuleState,Object]),ei("design:returntype",void 0)],es.prototype,"setLike",null),er([(0,k.h5)(),ei("design:type",Function),ei("design:paramtypes",["undefined"==typeof ItemModuleState?Object:ItemModuleState,Object]),ei("design:returntype",void 0)],es.prototype,"setCollect",null),er([(0,k.h5)(),ei("design:type",Function),ei("design:paramtypes",["undefined"==typeof ItemModuleState?Object:ItemModuleState,Object]),ei("design:returntype",void 0)],es.prototype,"setCommentCount",null),er([(0,k.h5)(),ei("design:type",Function),ei("design:paramtypes",["undefined"==typeof ItemModuleState?Object:ItemModuleState,Object]),ei("design:returntype",void 0)],es.prototype,"setResolutionList",null),er([(0,k.h5)(),ei("design:type",Function),ei("design:paramtypes",["undefined"==typeof ItemModuleState?Object:ItemModuleState,Object]),ei("design:returntype",void 0)],es.prototype,"reduceOrIncreaseCommentCount",null),er([(0,k.Mj)(),ei("design:type",Function),ei("design:paramtypes",[void 0===g.c?Object:g.c]),ei("design:returntype",void 0)],es.prototype,"addItems$",null),er([(0,k.Mj)(),ei("design:type",Function),ei("design:paramtypes",[void 0===g.c?Object:g.c]),ei("design:returntype",void 0===g.c?Object:g.c)],es.prototype,"postCollectVideo",null),er([(0,k.Mj)(),ei("design:type",Function),ei("design:paramtypes",[void 0===g.c?Object:g.c]),ei("design:returntype",void 0)],es.prototype,"postLikeVideo",null),er([(0,k.Mj)(),ei("design:type",Function),ei("design:paramtypes",[void 0===g.c?Object:g.c]),ei("design:returntype",void 0)],es.prototype,"postDislikeVideo",null),er([(0,k.h5)(),ei("design:type",Function),ei("design:paramtypes",["undefined"==typeof ItemModuleState?Object:ItemModuleState,Object]),ei("design:returntype",void 0)],es.prototype,"setItemPrivateState",null),er([(0,k.h5)(),ei("design:type",Function),ei("design:paramtypes",["undefined"==typeof ItemModuleState?Object:ItemModuleState,String]),ei("design:returntype",void 0)],es.prototype,"setDeleteVideo",null),es=er([(0,P.nV)("ItemModule"),eo(2,(0,O.y)(T.J7)),eo(3,(0,O.y)(G.hp)),ei("design:type",Function),ei("design:paramtypes",[void 0===en?Object:en,void 0===Q.U?Object:Q.U,"undefined"==typeof JotaiStoreType?Object:JotaiStoreType,"undefined"==typeof I18NTranslate?Object:I18NTranslate])],es);var eu=(0,M.y)(es)},38896:function(e,t,n){n.d(t,{N:function(){return i}});var r,i=((r={})[r.Initial=0]="Initial",r[r.LoadPrevious=1]="LoadPrevious",r[r.LoadLatest=2]="LoadLatest",r)},42087:function(e,t,n){n.d(t,{y:function(){return i}});var r=n(90432),i={handleClickPrivacySettingVideo:function(e){r.f.sendEvent("click_privacy_setting_video",e)},handleSelectPrivacySettingVideo:function(e){r.f.sendEvent("select_privacy_setting_video",e)},handlePrivateSetting:function(e){r.f.sendEvent("privacy_setting_allow_interaction",e)},handleClickDeleteVideo:function(e){r.f.sendEvent("click_delete_video",e)},handleVideoDelete:function(e){r.f.sendEvent("action_on_delete_video",{action:e})},handleScheduleConfirm:function(e){r.f.sendEvent("click_delete_scheduled_video",{group_id:e})},handleScheduleDelete:function(e){r.f.sendEvent("action_on_delete_scheduled_video",{action:e})}}}}]);