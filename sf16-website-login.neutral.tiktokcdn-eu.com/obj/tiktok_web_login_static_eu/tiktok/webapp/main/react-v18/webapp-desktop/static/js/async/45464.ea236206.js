"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["45464"],{69073:function(e,n,t){t.d(n,{PO:function(){return u},nj:function(){return i},wt:function(){return o}});var r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",u=62,i=function(e,n){if(10===n||![2,8,16,62].includes(n))return e;for(var t,u,i,o,a,c=[];e.length>0;){for(u=0,i="",t=0;u<e.length;u++)("0"!==(a=parseInt(((o=10*t+(o=Number(e[u])))/n).toString(),10).toString())||""!==i)&&(i+=a),t=o%n;e=i,c.push(t)}return c.reverse().map(function(e){return r[e]}).join("")},o=function(e,n){for(var t,u,i,o,a,c=[];e.length>0;){for(u=0,i="",t=0;u<e.length;u++)o=t*n+(o=r.indexOf(e[u])),("0"!==(a=r[parseInt((o/10).toString(),10)])||""!==i)&&(i+=a),t=o%10;e=i,c.push(t)}return c.reverse().join("")}},47524:function(e,n,t){t.d(n,{E:function(){return d},y:function(){return v}});var r=t(79066),u=t(72516),i=t(73628),o=t(96073),a=t(42351),c=null,l=!1,f=!1,s=function(){f&&l&&!c&&(0,r._)(function(){var e;return(0,u.__generator)(this,function(n){switch(n.label){case 0:return(e=document.createElement("meta")).setAttribute("http-equiv","origin-trial"),e.setAttribute("content","A7kLbZZF0sNV1Ncyw+UODqZel/HZ7YnQCMCa2Zz4XvT8uKV2Hp5maAbj5zsGZwUDmwt401QEhO8LNkGmAEh0hV4AAABoeyJvcmlnaW4iOiJodHRwczovL3Rpa3Rvay5jb206NDQzIiwiZmVhdHVyZSI6Im1zQWNxdWlzaXRpb25JbmZvIiwiZXhwaXJ5IjoxNzMzNTAzNjc5LCJpc1N1YmRvbWFpbiI6dHJ1ZX0="),document.head.appendChild(e),[4,t.e("58672").then(t.bind(t,54771))];case 1:return c=new(n.sent()).default({ti:"187137935"}),[2]}})})()},d=function(){(0,i.useEffect)(function(){(0,o.o7)()===a.N.MSFT&&(f=!0),s()},[])},v=function(){return(0,i.useCallback)(function(e){l=e,s()},[])}},31531:function(e,n,t){t.d(n,{xw:function(){return U}});var r=t(79066),u=t(35383),i=t(6586),o=t(72516),a=t(73628),c=t(47935),l=t(80660),f=t(10449),s=t(67500),d=t(77288),v=t(81329),m=t(83368),_=t(9602),p=t(238),h=t(89134),b=t(51629),g=t(7622),E=t(71542),C=t(29899),w=t(99454),y=t(84918),P=t(49339),L=t(44404),S=t.n(L),I=t(75814),V=t(86574),A=t(90432),O=t(69073),N=t(15377),T=t(41939),D=t(20746),F=t(5169),W=t(19742),M=t(95086),k=t(47524),B=t(2916),j=t(99659);function H(){return(0,r._)(function(){var e;return(0,o.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,S().app.getWid()];case 1:return e=n.sent().data,[2,(0,O.wt)(e,O.PO)];case 2:return n.sent(),[2,void 0];case 3:return[2]}})})()}function U(e,n,t,L,S,O,U){var z=(0,P.pJf)().isRefactorGroup;!function(e,n,t,l,s,E,w){if(e){var P,L=(0,c.useLocation)().pathname,S=(null!=(P=(0,f.W)(function(){return["abTestVersion"]},[]))?P:{}).abTestVersion,I=(0,p.wW)();(0,d.tF)(function(){var e,t,r,i;return i={page_name:n,enter_from:n,ui_type:s,vidab:null!=(t=null==S?void 0:S.versionName)?t:"",seo_vidab:(null!=(r=null==I?void 0:I.vidList)?r:[]).join(",")},(0,u._)(i,F.ET,(0,h.fU)()||null==(e=(0,W.YI)(F.FR))?void 0:e[F.ET]),(0,u._)(i,"page_category",E),i},[n,t,L,E]);var V=(0,d.ct)({eParams:l});(0,a.useEffect)(function(){(null==l?void 0:l.notReady)||V()},[V,t]),(0,d.LT)();var O=(0,i._)((0,v.Sp)(),2),N=O[0].isMiniPlayerShowing,T=O[1];(0,a.useEffect)(function(){N&&T.closeMiniPlayer({playMode:null,enter_method:D.c.ClickNavigation})},[L,t]);var M=(0,m.u4)();(0,a.useEffect)(function(){M.initPortraitHub()},[M]);var U=(0,_.B)().isElectronApp;(0,a.useEffect)(function(){U&&(0,r._)(function(){var e;return(0,o.__generator)(this,function(n){switch(n.label){case 0:if(!U)return[3,2];return[4,H()];case 1:e=n.sent(),A.f.config({commonHeaderConfig:{"header.custom":{webapp_wid:e}}}),n.label=2;case 2:return[2]}})})()},[]),(0,g.M$)(),(0,k.E)(),(0,C.Ee)(n),(0,b.DQ)(n),(0,y.K)(n),(0,d.ym)(w,!0),(0,B.Uf)(n),(0,a.useEffect)(function(){j.A.reportPageInitialized()},[])}}(z,e,n,t,S,U,O),function(e,n,t,P,L,S,O,U){if(!e){var z,R,Z,$,x,Y,J,K,Q=(0,c.useLocation)().pathname;(0,d.LT)(),z=(0,N.Nj)(T.$F),Z=(R=(0,l.L$)((0,f.W)(function(){return["user","wid","abTestVersion","webIdCreatedTime"]},[]))).wid,$=R.abTestVersion,x=R.webIdCreatedTime,Y=(0,s.qt)($,"webapp_login_causal_inference"),J=(0,M.m)(x),(0,a.useEffect)(function(){if("v1"===Y){var e=(0,I.ZC)(Z||"",3,V.gb).toString();z.setEnterMethod("simulated"),z.setCloseable(!1),z.setPredictionPayload(e),z.loginNotify()}},[J,Y,z,Z]);var q=(0,i._)((0,v.Sp)(),2),G=q[0].isMiniPlayerShowing,X=q[1],ee=(0,m.u4)(),en=(0,_.B)().isElectronApp;(0,a.useEffect)(function(){G&&X.closeMiniPlayer({playMode:null,enter_method:D.c.ClickNavigation})},[Q,t]),(0,a.useEffect)(function(){ee.initPortraitHub()},[ee]),(0,a.useEffect)(function(){(0,r._)(function(){var e;return(0,o.__generator)(this,function(n){switch(n.label){case 0:if(!en)return[3,2];return[4,H()];case 1:e=n.sent(),A.f.config({commonHeaderConfig:{"header.custom":{webapp_wid:e}}}),n.label=2;case 2:return[2]}})})()},[]);var et=(null!=(K=(0,f.W)(function(){return["abTestVersion"]},[]))?K:{}).abTestVersion,er=(0,p.wW)();(0,d.tF)(function(){var e,t,r,i;return i={page_name:n,enter_from:n,ui_type:S,vidab:null!=(t=null==et?void 0:et.versionName)?t:"",seo_vidab:(null!=(r=null==er?void 0:er.vidList)?r:[]).join(",")},(0,u._)(i,F.ET,(0,h.fU)()||null==(e=(0,W.YI)(F.FR))?void 0:e[F.ET]),(0,u._)(i,"page_category",U),i},[n,t,Q,U]),(0,d.ym)(O),(0,b.DQ)(n);var eu=(0,d.ct)({eParams:P});(0,a.useEffect)(function(){(null==P?void 0:P.notReady)||eu()},[eu,t]),(0,g.M$)(),(0,E.rF)({pid:null!=L?L:n}),(0,k.E)(),(0,C.Ee)(n),(0,w._U)(n),(0,y.K)(n),(0,B.Uf)(n),(0,a.useEffect)(function(){j.A.reportPageInitialized()},[])}}(z,e,n,t,L,S,O,U)}},29899:function(e,n,t){t.d(n,{ip:function(){return P},_k:function(){return L},Ob:function(){return w},aL:function(){return E},Ee:function(){return C},g1:function(){return y}});var r=t(73628),u=t(40832),i=t(22481),o=t(49339),a=t(5377),c=t(45996),l=t(71111),f=t(66905),s={pageName:null,itemID:"",sentBatchCount:0},d=(0,l.atom)(s);d.debugLabel="fypFeederAtom";var v=(0,f.i)(d,function(e,n){return{setCache:function(t){e(d).itemID||n(d,function(e){return(0,a._)({},e,t)})},clearCache:function(){"ALWAYS_ALLOWED"!==e(d).pageName&&n(d,function(e){return(0,c._)((0,a._)({},s),{sentBatchCount:e.sentBatchCount})})},incrementSentBatchCount:function(){n(d,function(e){return(0,c._)((0,a._)({},e),{sentBatchCount:e.sentBatchCount+1})})}}}),m=(v.useAtomService,v.useServiceDispatchers),_=v.useServiceState;v.getStaticApi;var p="webapp_fyp_feeder_landing",h=!0,b=function(){(0,i.Hd)(p)&&(h=!1),(0,i.J2)(p,"1")},g=function(e){return(0,o.FTg)().isFYP&&(e===u.L.Video||e===u.L.PhotoVideo)&&h},E=function(){return h},C=function(e){var n=m(),t=g(e);(0,r.useEffect)(function(){return function(){t||n.clearCache()}},[n,t]),(0,r.useEffect)(function(){b()},[e])},w=function(e,n){var t=m(),u=g(e);(0,r.useEffect)(function(){n&&u&&t.setCache({pageName:e,itemID:n})},[n,e,u,t])},y=function(){var e=m();return(0,r.useCallback)(function(n){e.setCache({pageName:"ALWAYS_ALLOWED",itemID:n,sentBatchCount:0})},[e])},P=function(){var e=(0,o.FTg)().isFYP,n=_(),t=n.itemID,r=n.pageName,i=n.sentBatchCount,a=e&&(r===u.L.Video||r===u.L.PhotoVideo||"ALWAYS_ALLOWED"===r),c=0;a&&(c=1);var l=t&&i<c?t:"";return{fypFeederItemId:l,setFirstItemId:a?l:""}},L=function(e){var n=m();(0,r.useEffect)(function(){e&&e>0&&n.incrementSentBatchCount()},[e,n])}},7622:function(e,n,t){t.d(n,{K1:function(){return A},M$:function(){return F},Oz:function(){return D},Zr:function(){return N},bE:function(){return W},mV:function(){return O},oS:function(){return T}});var r,u,i=t(79066),o=t(5377),a=t(45996),c=t(6586),l=t(72516),f=t(73628),s=t(89485),d=t(57327),v=t(36646),m=t(90432),_=t(31935),p=t(26705),h=t(53069),b=t(44904),g=t(34826),E=t(9602),C=t(80660),w=t(10449),y=t(67500),P=t(85443),L=t(44957),S=t(54149),I=t(49339),V={};V.m={},V.F={},V.E=function(e){Object.keys(V.F).map(function(n){V.F[n](e)})},V.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r=[],V.O=function(e,n,t,u){if(n){u=u||0;for(var i=r.length;i>0&&r[i-1][2]>u;i--)r[i]=r[i-1];r[i]=[n,t,u];return}for(var o=1/0,i=0;i<r.length;i++){for(var a=(0,c._)(r[i],3),n=a[0],t=a[1],u=a[2],l=!0,f=0;f<n.length;f++)(!1&u||o>=u)&&Object.keys(V.O).every(function(e){return V.O[e](n[f])})?n.splice(f--,1):(l=!1,u<o&&(o=u));if(l){r.splice(i--,1);var s=t();void 0!==s&&(e=s)}}return e},u={7645:0},V.F.j=function(e){if("undefined"!=typeof document&&(!V.o(u,e)||void 0===u[e])){u[e]=null;var n=document.createElement("link");n.charset="utf-8",V.nc&&n.setAttribute("nonce",V.nc),n.rel="prefetch",n.as="script",n.href=V.p+V.u(e),document.head.appendChild(n)}},V.O.j=function(e){return 0===u[e]},V.O(0,["7645"],function(){},5);var A=function(){var e,n=(0,E.B)().isElectronApp,t=(0,C.L$)((0,w.W)(function(){return["abTestVersion"]},[])).abTestVersion,r=null!=(e=(0,y.qt)(t,"comments_predict_model_opt"))?e:"v0",u=!n&&"undefined"!=typeof WebAssembly;return{enableOnDeviceML:"v0"!==r&&!n,isMLWithModel:"v1"===r||"v2"===r&&u,isMLWithStrategy:"v3"===r,isMLWithWebRuntimeModel:"v1"===r}},O=function(){var e,n=(0,I.tcM)(),r=n.enablePlayerPreloadDowngradePredict,u=n.disablePreloadPredict,o=n.playerPreloadPredictStrategy,a=(0,h.nr)(),c=(0,v.P)(P.$,{selector:function(e){var n,t,r,u;return{playerPreloadStrategy:null==(u=e.bizContext)||null==(r=u.config)||null==(t=r.onDeviceMLConfig)||null==(n=t.playerPreload)?void 0:n.playerPreloadStrategy}},dependencies:[]}).playerPreloadStrategy,f=(0,C.L$)((0,w.W)(function(){return["abTestVersion"]},[])).abTestVersion,s=null!=(e=(0,y.qt)(f,"tt_player_preload"))?e:{maxQueueCount:3,preloadTime:10},d=function(e){if(0===e)return void a.updatePredictedPreloadConfig({maxQueueCount:null==s?void 0:s.maxQueueCount,preloadTime:null==s?void 0:s.preloadTime});var n,t,r,u=2===e?"gt_12s":"lt_12s",i=null==o||null==(t=o.label_index_mapping)||null==(n=t.findIndex)?void 0:n.call(t,function(e){return e===u}),c=null==o||null==(r=o.plans)?void 0:r[i];console.debug("[Video Preload] Predict preload config: ",c),a.updatePredictedPreloadConfig(c)};return function(e){return(0,i._)(function(){var n,o,a,f,s,v,m,p;return(0,l.__generator)(this,function(h){switch(h.label){case 0:if(u||!c)return[2];return[4,Promise.all([t.e("35111"),t.e("44582")]).then(t.bind(t,21672))];case 1:if(o=(n=h.sent()).Sibyl,a=n.EScene,f=n.EBiz,s=c,v=a.VIDEO_PRELOAD,!(p=(m=new o({biz:f.TIKTOK_WEB_FYP})).createStrategyEngine({abConfig:s,scene:v})))return[2];return p.setThresholdCallback(function(){return(0,i._)(function(){var n,t,u,i,o,c,f,h,b,g,E,C,w;return(0,l.__generator)(this,function(l){switch(l.label){case 0:if(r)return n=m.strategyInference({abConfig:s,scene:v}),_.F.handleModelPredict({hit:Number(2===n),scene:a.VIDEO_PRELOAD,predict_value:-1,group_id:e,threshold:-1}),[2,d(n)];l.label=1;case 1:return l.trys.push([1,3,,4]),o=void 0===(i=(u=null!=(t=null==s?void 0:s.preload_ml)?t:{}).package)?"":i,f=void 0===(c=u.engine_config)?{inputs:[],outputs:[]}:c,[4,m.createEngine({scene:a.VIDEO_PRELOAD,modelUrl:o,inputs:null!=(h=null==f?void 0:f.inputs)?h:[],outputs:null!=(b=null==f?void 0:f.outputs)?b:[]})];case 2:return g=l.sent().inference({features:{}}),E=p.hitThresholdValue(g),C=p.getInferenceStrategy().thresholdValue,console.debug("[Video Preload] Inference result: ",g,"hit: ",E),d(E?2:1),_.F.handleModelPredict({hit:Number(E),scene:a.VIDEO_PRELOAD,predict_value:g,group_id:e,model_url:o,threshold:C}),[3,4];case 3:throw w=l.sent(),d(0),w;case 4:return[2]}})})()}),p.reportInferenceResult(),[2]}})})()}},N=new Map,T=new Map,D=function(e,n){var t=(0,c._)((0,b.kH)(function(n){var t,r;return null!=(r=null==(t=n[e])?void 0:t.comments)?r:[]},s.bN),2),r=t[0],u=t[1];return{comments:r,preloadCommentList:function(e,t){return(0,i._)(function(){var r,i,c,f,s;return(0,l.__generator)(this,function(l){switch(l.label){case 0:if(T.get(null==e?void 0:e.aweme_id))return[2];l.label=1;case 1:return l.trys.push([1,3,4,5]),u.setCommentItem({item:{awemeId:null==e?void 0:e.aweme_id,loading:!0},itemId:null==e?void 0:e.aweme_id}),[4,L.h.get("/api/comment/list/",{query:(0,a._)((0,o._)({},e),{count:20,aid:1988,app_language:"ja-JP",device_platform:"web_pc",current_region:"JP",fromWeb:1,enter_from:"tiktok_web"}),baseUrlType:S.Z4.FixedWww})];case 2:return i=(r=l.sent()).comments,c=r.cursor,f=r.has_more,s=r.total,T.set(e.aweme_id,{aweme_id:e.aweme_id,comments:null!=i?i:[],cursor:Number(c),has_more:!!f,total:Number(s),fetch_type:"preload_by_ml"}),p.ao.handleCommentPreload({play_mode:n,group_id:e.aweme_id,preload_type:t}),[3,5];case 3:return l.sent(),[3,5];case 4:return u.setCommentItem({item:{awemeId:null==e?void 0:e.aweme_id,loading:!1},itemId:null==e?void 0:e.aweme_id}),[7];case 5:return[2]}})})()}}},F=function(){var e=(0,h.nr)(),n=null;(0,f.useEffect)(function(){return(0,i._)(function(){var e,r,u,i,o,a;return(0,l.__generator)(this,function(c){switch(c.label){case 0:if(!m.f.dataCollectionEnabled)return[2];return[4,t.e("35111").then(t.bind(t,7386))];case 1:return r=(e=c.sent()).Observer,u=e.EBiz,i=(0,d.V)(),(n=new r({biz:u.TIKTOK_WEB_FYP,teaConfig:{teaInstance:m.f.getInstance(),channel_domain:null==i?void 0:i.tea,channel_type:null!=(o=null==i?void 0:i.teaChannelType)?o:"tcpy",channel:null!=(a=null==i?void 0:i.teaChannel)?a:"va"}})).observe(),[2]}})})(),function(){null==n||n.destroy(),e.updatePredictedPreloadConfig({})}},[])},W=function(e,n){var t,r;return n<0||n>=(null==e?void 0:e.length)?[]:(null!=(r=null==e||null==(t=e.slice)?void 0:t.call(e,n+1,n+5))?r:[]).map(function(e){return(0,g.ud)().getStaticItem(e)}).map(function(e){var n,t=(0,C.L$)(e),r=t.video,u=t.statsV2,i=t.id,o=(0,C.L$)(u),a=o.diggCount,c=o.commentCount,l=o.shareCount,f=o.playCount,s=o.collectCount;return{group_id:i,duration:null!=(n=null==r?void 0:r.duration)?n:0,like_cnt:Number(null!=a?a:0),comment_cnt:Number(null!=c?c:0),share_cnt:Number(null!=l?l:0),play_cnt:Number(null!=f?f:0),collect_cnt:Number(null!=s?s:0)}})};V.O({})},71542:function(e,n,t){t.d(n,{ZP:function(){return l},rF:function(){return c},yf:function(){return a}});var r=t(73628),u=t(15377),i=t(86634),o=t(72701);function a(){var e=(0,r.useContext)(i.u),n=e.enable,t=void 0===n||n,u=e.enableHeadComponent,o=e.enableInlineScript,a=e.enableUseSlardarPageViewHook,c=e.enableUseSlardarActualFmp;return{enable:t,enableHeadComponent:null!=u?u:t,enableInlineScript:null!=o?o:t,enableUseSlardarPageViewHook:null!=a?a:t,enableUseSlardarActualFmp:void 0===c||c}}function c(e){var n=e.pid,t=(0,u.Nj)(o.V$),i=a().enableUseSlardarPageViewHook;(0,r.useEffect)(function(){i&&(t.config({pid:n}),t.start(n))},[n,t,i])}function l(){return(0,u.Nj)(o.V$)}},99454:function(e,n,t){t.d(n,{Eo:function(){return a},TU:function(){return c},V7:function(){return l},_U:function(){return f}});var r=t(6586),u=t(73628),i=t(22481),o=t(51127),a=function(){(0,i.AP)("video-countdown-show","1")},c=function(){var e=(0,r._)((0,u.useState)(!document.hidden),2),n=e[0],t=e[1],i=function(){t(!document.hidden)};return(0,u.useEffect)(function(){return document.addEventListener("visibilitychange",i),function(){document.removeEventListener("visibilitychange",i)}},[]),n},l=function(e){var n=e.currentIndex,t=(0,o.GE)(function(e){return e}).showEndCard,r=(0,o.$c)();(0,u.useEffect)(function(){r.increaseVVCount()},[n,r]),(0,u.useEffect)(function(){return function(){t&&r.disableEndCard()}},[r,t]);var i=(0,u.useRef)(-1);return(0,u.useEffect)(function(){i.current!==n&&(t&&r.disableEndCard(),i.current=n)},[n,r,t]),{showEndCard:t}},f=function(e){var n=(0,o.$c)();(0,u.useEffect)(function(){n.resetVVCount()},[n,e])}},51127:function(e,n,t){t.d(n,{$c:function(){return l},GE:function(){return f}});var r=t(5377),u=t(45996),i=t(71111),o=t(66905),a=(0,i.atom)({vvCount:0,showEndCard:!1,disableEndCard:!1}),c=(0,o.i)(a,function(e,n){return{increaseVVCount:function(){n(a,function(n){return(0,u._)((0,r._)({},n),{vvCount:e(a).vvCount+1})})},resetVVCount:function(){n(a,function(e){return(0,u._)((0,r._)({},e),{vvCount:0})})},setShowEndCard:function(){n(a,function(e){return(0,u._)((0,r._)({},e),{showEndCard:!0})})},disableEndCard:function(){n(a,function(e){return(0,u._)((0,r._)({},e),{showEndCard:!1,disableEndCard:!0})})}}}),l=(c.useAtomService,c.useServiceDispatchers),f=c.useServiceState;c.getStaticApi},31935:function(e,n,t){t.d(n,{F:function(){return u}});var r=t(90432),u={handleModelPredict:function(e){r.f.sendEvent("on_device_ml_predict",e)}}}}]);