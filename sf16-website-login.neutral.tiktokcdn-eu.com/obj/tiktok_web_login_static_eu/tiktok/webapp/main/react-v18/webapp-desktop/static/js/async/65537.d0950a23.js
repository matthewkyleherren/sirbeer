"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["65537"],{38424:function(e,t,n){n.d(t,{$4:function(){return A},M_:function(){return k},R0:function(){return O},dF:function(){return b},zW:function(){return U}});var r,i=n(79066),o=n(5377),u=n(45996),s=n(72516),l=n(94456),c=n(71952),a=n(80660),d=n(89134),f=n(88999),_=n(42963),v=n(96976),p=n(9580),g=n(82003),h=n(1321),m=n(12293),y=n(88746),I=n(6983),L=n(10625),S=n(82887),w=n(66905),C=n(61724),U=((r={}).Initial="initial",r.CreatePlaylist="create_playlist",r.CreatePlaylistReady="create_playlist_ready",r),E=(0,S._)((0,L.p)("userPageAtom@tiktok/webapp-desktop",{uniqueId:void 0,statusCode:void 0,secUid:void 0,profileState:"initial",selectedTab:_.Lz.UserPost}),{rehydrationKey:"webapp.userPage"});E.debugLabel="userPageAtom";var P=(0,w.i)(E,function(e,t){return{setUniqueId:function(e){t(E,function(t){return(0,u._)((0,o._)({},t),{uniqueId:e})})},setSecUid:function(e){t(E,function(t){return(0,u._)((0,o._)({},t),{secUid:e})})},setProfileState:function(e){t(E,function(t){return(0,u._)((0,o._)({},t),{profileState:e})})},resetUserPage:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,l.unstable_batchedUpdates)(function(){t(E,function(e){return(0,u._)((0,o._)({},e),{uniqueId:void 0,secUid:void 0,statusCode:c.s.Ok,profileState:"initial"})}),(0,v.Ds)().resetAllLists(e),(0,p.UO)().setUniqueId(void 0),(0,g.cF)().resetUserFollowInfo(),(0,h.MA)().resetData(),(0,I.rS)().resetCollectionInfoList()})},getUserInfo:function(n){return(0,i._)(function(){var r,i,_,v,g,I,L,S,w,U,P,b,k,O,A,F,D,M,q,x,R,T,N,W,B;return(0,s.__generator)(this,function(s){switch(s.label){case 0:r=(0,p.UO)(),i=(0,m.Gp)(),_=n.uniqueId,v=n.locateItemID,g=(0,f.x)().user,L=(I=(0,a.L$)(g)).uniqueId,S=I.secUid,w=e(m.p9).users[null!=_?_:""],U=e(m.p9).stats[null!=_?_:""],P=(0,C.xW)().isInWebappPerfPageSwitchExperiment,s.label=1;case 1:if(s.trys.push([1,5,,6]),!("number"!=typeof(null==w||null==(b=w.extraInfo)?void 0:b.statusCode)||P&&(!U||U.needFix||(null==w?void 0:w.uniqueIdModifyTime)===void 0)))return[3,3];return[4,i.getUserDetail(n)];case 2:F=s.sent(),w=e(m.p9).users[null!=(D=null==(A=F.userInfo)||null==(O=A.user)?void 0:O.uniqueId)?D:""],k=F.statusCode,s.label=3;case 3:return(0,l.unstable_batchedUpdates)(function(){t(E,function(e){return(0,u._)((0,o._)({},e),{statusCode:null!=k?k:e.statusCode,uniqueId:null==w?void 0:w.uniqueId,secUid:null==w?void 0:w.secUid})}),r.setUniqueId(null==w?void 0:w.uniqueId)}),M=[],(null==w?void 0:w.id)&&(k===c.s.Ok||k===c.s.UserPrivate)&&(0,d.fU)()&&M.push((0,y.s5)().getItemList((0,o._)({secUid:null!=(q=w.secUid)?q:"",userId:w.id},v&&{locateItemID:v}))),x=!!g&&(!!(L&&L===(null==w?void 0:w.uniqueId))||!!(S&&S===(null==w?void 0:w.secUid))),N=void 0===(T=(R=(0,a.L$)(w)).id)?"":T,B=void 0===(W=R.secUid)?"":W,!x&&(null==w?void 0:w.privateAccount)||M.push((0,h.MA)().getVideoPlaylistData({uid:N,secUid:B,isReset:!0})),[4,Promise.allSettled(M)];case 4:return s.sent(),[3,6];case 5:return console.error(s.sent()),t(E,function(e){return(0,u._)((0,o._)({},e),{statusCode:c.s.UnknownError})}),[3,6];case 6:return[2]}})})()},setSelectedTab:function(e){t(E,function(t){return(0,u._)((0,o._)({},t),{selectedTab:e})})}}}),b=P.useAtomService,k=P.useServiceDispatchers,O=P.useServiceState,A=P.getStaticApi},74765:function(e,t,n){n.d(t,{p:function(){return i}});var r,i=((r={}).Recommend="suggest",r.Following="following",r.Follower="follower",r.Friend="friend",r.OthersFollowing="others_following",r.OthersFollower="others_follower",r.SuggestedFollow="suggested_follow",r)},82003:function(e,t,n){n.d(t,{_0:function(){return N},cF:function(){return B},Gd:function(){return T},Nl:function(){return W}});var r,i=n(79066),o=n(35383),u=n(5377),s=n(45996),l=n(72516),c=n(94456),a=n(66905),d=n(10625),f=n(50870),_=n(12293),v={list:[],hasMore:!0,loading:!0,maxCursor:0,minCursor:0,total:0,statusCode:0,shouldShowSuggestedAccounts:!1},p=n(74765),g=n(2259),h=n(73721),m=n(21708),y=n(44957),I=n(54149),L=(0,h.M)({csr:function(e,t){return(0,i._)(function(){var n,r;return(0,l.__generator)(this,function(i){switch(i.label){case 0:return n=28,r=f.pf.WEBSCENE_RECOMMEND_USER_TRENDING,(0,m.gq)(e)?n=50:(0,m.cj)(e)?(n=30,r=f.pf.WEBSCENE_RECOMMEND_USER_PROFILE):n=30,[4,y.h.get("/node/share/discover",{query:{noUser:"0",count:n,scene:r,pageId:t,userId:t}})];case 1:return[2,i.sent().body[0].exploreList]}})})()},ssr:function(e,t){return(0,i._)(function(){var n,r;return(0,l.__generator)(this,function(i){switch(i.label){case 0:return n=(0,g.yK)(),r=(0,m.cj)(e)?f.pf.WEBSCENE_RECOMMEND_USER_PROFILE:f.pf.WEBSCENE_RECOMMEND_USER_TRENDING,[4,n.service.webapp.data.getUserExploreData({count:"30",offset:"0",keyword:"",needItemList:!1,targetUserId:t,scene:String(r)})];case 1:return[2,i.sent()]}})})()}}),S=n(80888),w=n(82887),C=n(88999);function U(e,t,n,r){var i=n.list,o=n.maxCursor,l=n.minCursor,c=n.total,a=n.statusCode,d=n.hasMore,f=n.isTruncated,_=n.recommendList;e(t,function(e){var t;return t=r?_||[]:_&&e.recommendList?(0,S.A)(e.recommendList.concat(_)):_||e.recommendList||[],(0,s._)((0,u._)({},e),{list:(0,S.A)(e.list.concat(i)),minCursor:l,total:null!=c?c:e.total,statusCode:null!=a?a:e.statusCode,hasMore:null!=d?d:-1!==o,loading:!1,isTruncated:f,recommendList:t})})}function E(e,t,n,r,o){return(0,i._)(function(){var c,a,d,f,v,p,g,h,m,L,S,w,E,P,b;return(0,l.__generator)(this,function(k){var O,A,F,D,M,q,x,R,T,N,W,B,V,K,G,z,j,Z,H,$;switch(k.label){case 0:return k.trys.push([0,2,,3]),c=r.count,a=r.scene,d=r.isNonPersonalized,f=r.secUid,v=r.targetUid,g=(p=e(n)).list,m=void 0===(h=p.maxCursor)?0:h,S=void 0===(L=p.minCursor)?0:L,w=p.currentTargetUid,E=(0,C.x)().abTestVersion,P=!!v&&v!==w,t(n,function(e){return(0,s._)((0,u._)({},e),{loading:!0,currentTargetUid:null!=v?v:w})}),[4,(O={scene:a,maxCursor:m,minCursor:S,count:c,isNonPersonalized:d,secUid:f,targetUserId:v,clientABVersions:null==E?void 0:E.versionName},(0,i._)(function(){return(0,l.__generator)(this,function(e){return[2,y.h.get("/api/user/list/",{query:O,baseUrlType:I.Z4.FixedWww})]})})())];case 1:return F=(A={set:t,atom:n,response:k.sent(),idList:g,useSorting:null!=(b=null==o?void 0:o.useSorting)&&b,shouldUseNewList:P}).set,D=A.atom,M=A.response,q=A.idList,R=void 0!==(x=A.useSorting)&&x,T=A.shouldUseNewList,N=M.maxCursor,W=M.minCursor,V=void 0===(B=M.userList)?[]:B,K=M.total,G=M.statusCode,z=M.hasMore,j=M.isTruncated,(Z=(0,_.Gp)()).multiSetUser(V.map(function(e){return e.user})),Z.multiSetUserStats(V.map(function(e){var t=e.user,n=e.stats,r=e.statsV2;return{uniqueId:t.uniqueId,stats:n,statsV2:r}})),H=R?V.sort(function(e,t){var n,r,i,o;return(null!=(i=null==(n=t.user.roomId)?void 0:n.length)?i:0)-(null!=(o=null==(r=e.user.roomId)?void 0:r.length)?o:0)}).map(function(e){return e.user.uniqueId}):V.map(function(e){return e.user.uniqueId}),$=R?V.sort(function(e,t){var n,r,i,o;return(null!=(i=null==(n=t.user.roomId)?void 0:n.length)?i:0)-(null!=(o=null==(r=e.user.roomId)?void 0:r.length)?o:0)}).map(function(e){return{uniqueId:e.user.uniqueId,userRecommendInfo:e.userRecommendInfo,stats:e.statsV2}}):V.map(function(e){return{uniqueId:e.user.uniqueId,userRecommendInfo:e.userRecommendInfo,stats:e.statsV2}}),T||(H=H.filter(function(e){return 0>q.indexOf(e)}),$=$.filter(function(e){return 0>q.indexOf(e.uniqueId)})),U(F,D,{list:H,maxCursor:N,minCursor:W,total:K,statusCode:G,hasMore:z,isTruncated:j,recommendList:$},T),[3,3];case 2:return k.sent(),[3,3];case 3:return[2]}})})()}function P(e){var t=e.toLowerCase().replace(/([-_][a-z])/g,function(e){return e.toUpperCase().replace("-","").replace("_","")});return(0,w._)((0,d.p)("accountListAtom_".concat(t,"@tiktok/webapp-atoms"),v),{rehydrationKey:"webapp.accountList.".concat(t)})}var b=P(p.p.Following),k=P(p.p.Follower),O=P(p.p.Recommend),A=P(p.p.Friend),F=P(p.p.OthersFollowing),D=P(p.p.OthersFollower),M=P(p.p.SuggestedFollow),q=(0,d.p)("accountListAtomMapAtom@tiktok/webapp-atoms",(r={},(0,o._)(r,p.p.Following,b),(0,o._)(r,p.p.Follower,k),(0,o._)(r,p.p.Recommend,O),(0,o._)(r,p.p.Friend,A),(0,o._)(r,p.p.OthersFollowing,F),(0,o._)(r,p.p.OthersFollower,D),(0,o._)(r,p.p.SuggestedFollow,M),r)),x=(0,d.p)("accountListAtom@tiktok/webapp-atoms",function(e){var t;return t={},(0,o._)(t,p.p.Following,e(b)),(0,o._)(t,p.p.Follower,e(k)),(0,o._)(t,p.p.Recommend,e(O)),(0,o._)(t,p.p.Friend,e(A)),(0,o._)(t,p.p.OthersFollowing,e(F)),(0,o._)(t,p.p.OthersFollower,e(D)),(0,o._)(t,p.p.SuggestedFollow,e(M)),t},function(e,t,n){t(e(q)[n.key],n.data)}),R=(0,a.i)(x,function(e,t){return{resetList:function(e){t(x,{key:e.key,data:v})},setShouldShowSuggestedAccounts:function(e){t(M,function(t){return(0,s._)((0,u._)({},t),{shouldShowSuggestedAccounts:e})})},resetUserFollowInfo:function(){(0,c.unstable_batchedUpdates)(function(){t(D,v),t(F,v)})},getRecommendList:function(e){return(0,i._)(function(){var n,r,i;return(0,l.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,L(e.pathname,void 0===(n=e.userId)?"":n)];case 1:return r=o.sent(),t(O,v),i=r.map(function(e){var t=e.cardItem;return{avatarLarger:t.cover,avatarMedium:t.cover,avatarThumb:t.cover,id:t.id,nickname:t.title,relation:t.extraInfo.relation,signature:t.description,uniqueId:t.subTitle.replace(/^@/,""),verified:t.extraInfo.verified,secUid:t.extraInfo.secUid,roomId:t.extraInfo.roomId}}).sort(function(e,t){var n,r;return(null!=(n=null==e?void 0:e.relation)?n:0)-(null!=(r=null==t?void 0:t.relation)?r:0)}).sort(function(e,t){var n,r,i,o;return(null!=(i=null==t||null==(n=t.roomId)?void 0:n.length)?i:0)-(null!=(o=null==e||null==(r=e.roomId)?void 0:r.length)?o:0)}),(0,_.Gp)().multiSetUser(i),U(t,O,{list:i.map(function(e){return e.uniqueId}),hasMore:!1}),[3,3];case 2:return o.sent(),[3,3];case 3:return[2]}})})()},getFollowingList:function(n){return(0,i._)(function(){return(0,l.__generator)(this,function(r){switch(r.label){case 0:return[4,E(e,t,b,{count:n.count,scene:f.pf.WEBSCENE_FOLLOWINGLIST_ALL},{useSorting:!0})];case 1:return r.sent(),[2]}})})()},getFollowerList:function(n){return(0,i._)(function(){return(0,l.__generator)(this,function(r){switch(r.label){case 0:return[4,E(e,t,k,{count:n.count,scene:f.pf.WEBAPP_USER_LIST_FOLLOWER})];case 1:return r.sent(),[2]}})})()},getFriendsList:function(n){return(0,i._)(function(){var r;return(0,l.__generator)(this,function(i){switch(i.label){case 0:return[4,E(e,t,A,{count:null!=(r=n.count)?r:30,scene:f.pf.WEBAPP_USER_LIST_MATCH_FRIEND})];case 1:return i.sent(),[2]}})})()},getSuggestedList:function(n){return(0,i._)(function(){var r;return(0,l.__generator)(this,function(i){switch(i.label){case 0:return[4,E(e,t,M,{count:null!=(r=n.count)?r:30,isNonPersonalized:n.isNonPersonalized,scene:f.pf.WEBAPP_USER_LIST_MATCH_SUGGESTED,targetUid:n.targetUid})];case 1:return i.sent(),[2]}})})()},getTargetFollowerList:function(n){return(0,i._)(function(){var r;return(0,l.__generator)(this,function(i){switch(i.label){case 0:return[4,E(e,t,D,{count:null!=(r=n.count)?r:30,secUid:n.secUid,scene:f.pf.WEBAPP_USER_LIST_FOLLOWER})];case 1:return i.sent(),[2]}})})()},getTargetFollowingList:function(n){return(0,i._)(function(){var r;return(0,l.__generator)(this,function(i){switch(i.label){case 0:return[4,E(e,t,F,{count:null!=(r=n.count)?r:30,secUid:n.secUid,scene:f.pf.WEBSCENE_FOLLOWINGLIST_ALL})];case 1:return i.sent(),[2]}})})()}}}),T=R.useAtomService,N=R.useServiceState,W=R.useServiceDispatchers,B=R.getStaticApi},9580:function(e,t,n){n.d(t,{UO:function(){return d},kq:function(){return a}});var r=n(5377),i=n(45996),o=n(82887),u=n(66905),s=n(10625),l=(0,o._)((0,s.p)("recommendUserListAtom@tiktok/webapp-atoms",{uniqueId:void 0}),{rehydrationKey:"webapp.recommendUserList"}),c=(0,u.i)(l,function(e,t){return{setUniqueId:function(e){t(l,function(t){return(0,i._)((0,r._)({},t),{uniqueId:e})})}}}),a=(c.useAtomService,c.useServiceDispatchers,c.useServiceState),d=c.getStaticApi},1321:function(e,t,n){n.d(t,{kn:function(){return b},MA:function(){return O},c8:function(){return E},aD:function(){return k}});var r=n(79066),i=n(5377),o=n(45996),u=n(16327),s=n(54333),l=n(72516),c=n(82887),a=n(66905),d=n(10625),f=n(7913),_=n(71952),v=n(80660),p=n(18294),g=n(26869),h=n(2259),m=n(73721),y=n(95878),I=n(72665),L=n(44957),S=n(54149),w=n(41015),C=(0,m.M)({csr:function(e){return(0,r._)(function(){var t,n,r;return(0,l.__generator)(this,function(i){return(e.uid,t=(0,u._)(e,["uid"]),n=(0,y.t)("userPlayList"))?[2,n]:(r=(0,I.DV)("userPlayList"))?(w.P.emit("consume_prefetch_data",performance.now(),"unknown","userPlayList"),[2,r.catch(function(){return w.P.emit("consume_prefetch_data",performance.now(),"fail","userPlayList"),L.h.get("/api/user/playlist/",{query:t,baseUrlType:S.Z4.FixedWww})})]):[2,L.h.get("/api/user/playlist/",{query:t,baseUrlType:S.Z4.FixedWww})]})})()},ssr:function(e){return(0,r._)(function(){var t,n,r,i;return(0,l.__generator)(this,function(o){switch(o.label){case 0:return t=(0,h.yK)(),r=void 0===(n=e.uid)?"":n,[4,t.service.webapp.data.getVideoPlaylist({uid:r})];case 1:return 0!==(i=o.sent()).statusCode&&(t._statusCode=404),[2,i]}})})()}}),U={loading:!1,changeOrderLoading:!1,hasMore:!0,statusCode:_.s.Ok,playList:[],cursor:"0"},E=(0,c._)((0,d.p)("videoPlaylistSharedAtom@tiktok/webapp-atoms",U),{rehydrationKey:"webapp.videoPlaylist"}),P=(0,a.i)(E,function(e,t){return{resetData:function(){t(E,U)},setPlaylist:function(e){var n=(0,v.L$)(e),r=n.statusCode,u=n.playList,l=void 0===u?[]:u,c=n.hasMore,a=n.cursor,d=n.loading,f=n.changeOrderLoading,_=n.isMerge,p=void 0!==_&&_;t(E,function(e){var t;return(0,o._)((0,i._)({},e),{statusCode:null!=r?r:e.statusCode,hasMore:null!=c?c:e.hasMore,cursor:null!=a?a:e.cursor,playList:p?(0,s._)(null!=(t=e.playList)?t:[]).concat((0,s._)(l)):l,loading:null!=d?d:e.loading,changeOrderLoading:null!=f?f:e.changeOrderLoading})})},changePlaylistOrder:function(n){return(0,r._)(function(){var u,c,a,d,v,p,h,m,y,I;return(0,l.__generator)(this,function(w){switch(w.label){case 0:if(c=void 0===(u=n.playlist)?[]:u,d=void 0===(a=n.endIndex)?-1:a,v=n.successCallback,h=void 0===(p=e(E).playList)?[]:p,!(m=c.slice(0,d+1)).length)return[2,_.s.Ok];t(E,function(e){return(0,o._)((0,i._)({},e),{changeOrderLoading:!0})}),w.label=1;case 1:var C;return w.trys.push([1,3,,4]),[4,(C={commitMixIds:m.join(",")},(0,r._)(function(){var e;return(0,l.__generator)(this,function(t){return[2,L.h.post("/api/playlist/modify_order/",{baseUrlType:S.Z4.FixedWww,body:g.stringify({commitMixIds:null!=(e=C.commitMixIds)?e:""})})]})})())];case 2:return y=w.sent().statusCode,[3,4];case 3:return w.sent(),y=_.s.UnknownError,[3,4];case 4:try{if(f.c.handleSaveChangePlaylistOrder({status:y===_.s.Ok?"1":"0"}),y!==_.s.Ok)return t(E,function(e){return(0,o._)((0,i._)({},e),{changeOrderLoading:!1})}),[2,y];return I=(0,s._)(m).concat((0,s._)(h.slice(d+1))),null==v||v(),this.setPlaylist({playList:I,changeOrderLoading:!1}),[2,y]}catch(e){return console.error(e),t(E,function(e){return(0,o._)((0,i._)({},e),{changeOrderLoading:!1})}),[2,_.s.UnknownError]}}})}).call(this)},getVideoPlaylistData:function(n){return(0,r._)(function(){var r,s,c,a,d,f,v,g,h,m,y,I,L,S,w;return(0,l.__generator)(this,function(l){switch(l.label){case 0:if(r=n.uid,s=n.secUid,c=n.isReset,f=void 0===(d=(a=e(E)).cursor)?"0":d,!(v=a.hasMore))return[2];g=c?"0":f,t(E,function(e){return(0,o._)((0,i._)({},e),{loading:!0})}),l.label=1;case 1:return l.trys.push([1,3,,4]),m=C({uid:r,secUid:s,cursor:g,count:20}),t(E,function(e){return(0,o._)((0,i._)({},e),{prevPromise:m})}),[4,m];case 2:return h=l.sent(),[3,4];case 3:return l.sent(),h={statusCode:_.s.UnknownError,playList:[],hasMore:v},[3,4];case 4:try{if(y=h.playList,I=void 0===y?[]:y,L=(0,u._)(h,["playList"]),w=(S=I.filter(function(e){return e.id})).map(function(e){return e.id}),(0,p._J)().multiSetPlaylistDetail(S),m&&e(E).prevPromise!==m)return[2];this.setPlaylist((0,o._)((0,i._)({},L),{playList:w,isMerge:!c,loading:!1}))}catch(e){console.error(e),t(E,function(e){return(0,o._)((0,i._)({},e),{loading:!1})})}return[2]}})}).call(this)}}}),b=P.useAtomService,k=(P.useServiceDispatchers,P.useServiceState),O=P.getStaticApi},18294:function(e,t,n){n.d(t,{A4:function(){return d},Se:function(){return f},_J:function(){return _}});var r=n(35383),i=n(5377),o=n(45996),u=n(82887),s=n(66905),l=n(10625),c=(0,u._)((0,l.p)("playlistDetailAtom@tiktok/webapp-atoms",{}),{rehydrationKey:"webapp.videoPlaylistDetails"}),a=(0,s.i)(c,function(e,t){return{multiSetPlaylistDetail:function(n){var r=e(c),o={};n.forEach(function(e){var t,n=e.id,u=void 0===n?"":n,s=null!=(t=r[u])?t:{};o[u]=(0,i._)({},s,e)}),t(c,(0,i._)({},r,o))},setPlaylistDetail:function(e){var n=e.id,u=void 0===n?"":n;t(c,function(t){return(0,o._)((0,i._)({},t),(0,r._)({},u,(0,i._)({},t[u],e)))})}}}),d=a.useAtomService,f=(a.useServiceDispatchers,a.useServiceState),_=a.getStaticApi},6983:function(e,t,n){n.d(t,{HQ:function(){return C},x6:function(){return E},rS:function(){return P},sK:function(){return U}});var r=n(79066),i=n(35383),o=n(5377),u=n(45996),s=n(54333),l=n(72516),c=n(82887),a=n(71111),d=n(66905),f=n(88999),_=n(70991),v=n(42182),p=n(34826),g=n(44957),h=n(54149),m=n(71952),y=n(66190),I=(0,n(51664).l)("/api/collection/move_items/",{statusCode:m.s.Ok}),L={statusCode:m.s.Ok,loading:!1,hasMore:!0,collectionList:[],total:"0"},S=(0,c._)((0,a.atom)(L),{rehydrationKey:"desktop.userPage.userCollectionList"});S.debugLabel="collectionInfoListAtom";var w=(0,d.i)(S,function(e,t){return{getCollectionInfoList:function(n){return(0,r._)(function(){var c,a,d,p,y,I,L,w;return(0,l.__generator)(this,function(C){switch(C.label){case 0:c=n.uniqueId,a=n.secUid,p=void 0!==(d=n.isReset)&&d,C.label=1;case 1:return C.trys.push([1,3,,4]),t(S,function(e){var t;return(0,u._)((0,o._)({},e),{collectionList:null==(t=e.collectionList)?void 0:t.filter(function(e){return e.userName===c}),loading:!0})}),y=(0,f.x)().user,I=(0,u._)((0,o._)({},(0,v.bv)(e,S,{secUid:a})),{appId:_.xE,publicOnly:(null==y?void 0:y.secUid)!==a}),p&&(I.cursor="0"),L=(0,r._)(function(){return(0,l.__generator)(this,function(e){return[2,g.h.get("/api/user/collection_list/",{query:I,baseUrlType:h.Z4.FixedWww,headers:(0,i._)({},h.nk,g.h.csrfToken)})]})})(),t(S,function(e){return(0,u._)((0,o._)({},e),{prevPromise:L})}),[4,L];case 2:return w=C.sent(),t(S,function(e){if(e.prevPromise&&e.prevPromise!==L)return e;if(p)return(0,u._)((0,o._)({},e,w),{loading:!1});var t=(0,s._)(null!=(c=e.collectionList)?c:[]),n=new Set(t.map(function(e){return e.collectionId})),r=!0,i=!1,l=void 0;try{for(var c,a,d,f=(null!=(a=w.collectionList)?a:[])[Symbol.iterator]();!(r=(d=f.next()).done);r=!0){var _=d.value;n.has(_.collectionId)||(n.add(_.collectionId),t.push(_))}}catch(e){i=!0,l=e}finally{try{r||null==f.return||f.return()}finally{if(i)throw l}}return(0,u._)((0,o._)({},e,w),{collectionList:t,loading:!1})}),[3,4];case 3:return C.sent(),t(S,function(e){return(0,u._)((0,o._)({},e),{loading:!1,statusCode:m.s.UnknownError})}),[3,4];case 4:return[2]}})})()},resetCollectionInfoList:function(){t(S,(0,o._)({},L))},moveItems:function(n){return(0,r._)(function(n){var r,i,o,u,s,c,a,d,f,_,v,g,h,L,w,C,U,E,P,b,k,O,A;return(0,l.__generator)(this,function(l){switch(l.label){case 0:if(r=n.itemIds,i=n.fromCollectionId,o=n.targetCollectionId,u=n.onMove,0===r.length)return[2];if(v=null==(s=(_=e(S)).collectionList)?void 0:s.find(function(e){return e.collectionId===i}),g=null==(c=_.collectionList)?void 0:c.find(function(e){return e.collectionId===o}),w=(BigInt(L=null!=(h=null==v?void 0:v.total)?h:"0")-BigInt(r.length)).toString(),E=(BigInt(U=null!=(C=null==g?void 0:g.total)?C:"0")+BigInt(r.length)).toString(),P=null==(f=e(p.Pu)[r[0]])||null==(d=f.video)||null==(a=d.zoomCover)?void 0:a["240"],b="0"===w||null==v?void 0:v.cover,k=(null==g?void 0:g.cover)||!P?null==g?void 0:g.cover:{urlList:[P]},i)o?(this.modifyCollectionInfo(i,{total:w,cover:b}),this.modifyCollectionInfo(o,{total:E,cover:k}),O=t(I,{itemIDs:r.join(","),fromCollectionID:i,targetCollectionID:o})):(this.modifyCollectionInfo(i,{total:w,cover:b}),O=t(y.m,{collectionId:i,deleteIds:r.join(",")}));else{if(!o)return[2];this.modifyCollectionInfo(o,{total:E,cover:k}),O=t(y.m,{collectionId:o,commitIds:r.join(",")})}return[4,O];case 1:return(A=l.sent().statusCode)!==m.s.Ok&&(i&&this.modifyCollectionInfo(i,{total:L,cover:null==v?void 0:v.cover}),o&&this.modifyCollectionInfo(o,{total:U,cover:null==g?void 0:g.cover})),null==u||u({statusCode:A,fromCollection:v,targetCollection:g}),[2]}})}).apply(this,arguments)},prependCollectionInfo:function(n){var r;null!=(r=e(S).collectionList)&&r.some(function(e){return e.collectionId===n.collectionId})||t(S,function(e){var t;return(0,u._)((0,o._)({},e),{collectionList:[n].concat((0,s._)(null!=(t=e.collectionList)?t:[]))})})},modifyCollectionInfo:function(n,r){var i=e(S);if(i.collectionList){var l=i.collectionList.findIndex(function(e){return e.collectionId===n});if(!(l<0)){var c=(0,s._)(i.collectionList);c[l]=(0,o._)({},c[l],r),t(S,function(e){return(0,u._)((0,o._)({},e),{collectionList:c})})}}}}}),C=w.useAtomService,U=w.useServiceDispatchers,E=w.useServiceState,P=w.getStaticApi},51664:function(e,t,n){n.d(t,{l:function(){return v}});var r=n(79066),i=n(35383),o=n(5377),u=n(45996),s=n(72516),l=n(44957),c=n(54149),a=n(71952),d=n(88999),f=n(94185),_=n(98971);function v(e,t){return(0,_.z)({initState:t,fetchAction:function(n,_,v){return(0,r._)(function(){var n,r,p,g,h;return(0,s.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),r=(n=(0,d.x)()).user,p=n.language,[4,l.h.post(e,{query:(0,u._)((0,o._)({},_),{aid:f.xE,region:null==r?void 0:r.region,language:p}),baseUrlType:c.Z4.FixedWww,headers:(0,i._)({},c.nk,l.h.csrfToken)})];case 1:return g=s.sent(),null==v||v(g),[2,g];case 2:return s.sent(),h=(0,u._)((0,o._)({},t),{statusCode:a.s.UnknownError}),null==v||v(h),[2,h];case 3:return[2]}})})()}})}},66190:function(e,t,n){n.d(t,{m:function(){return i}});var r=n(71952),i=(0,n(51664).l)("/api/collection/modify_items/",{statusCode:r.s.Ok})},7913:function(e,t,n){n.d(t,{c:function(){return i}});var r=n(90432),i={handleCreatePlaylist:function(){r.f.sendEvent("create_playlist")},handleClickAddPlaylistVideo:function(e){r.f.sendEvent("click_add_playlist_video",e)},handleAddPlaylistVideo:function(e){r.f.sendEvent("add_playlist_video",e)},handlePostCreatingPlaylist:function(e){r.f.sendEvent("post_creating_playlist",e)},handleClickChangePlaylistOrder:function(){r.f.sendEvent("click_change_playlist_order")},handleSaveChangePlaylistOrder:function(e){r.f.sendEvent("save_change_playlist_order",e)},handleCompleteEditingPlaylist:function(e){r.f.sendEvent("complete_editing_playlist",e)},handleClickPlaylistEntrance:function(e){r.f.sendEvent("click_playlist_entrance",e)},handleClickRenamePlaylist:function(e){r.f.sendEvent("click_rename_playlist",e)},handleClickDeletePlaylist:function(e){r.f.sendEvent("click_delete_playlist",e)},handleDeletePlaylist:function(e){r.f.sendEvent("delete_playlist",e)},handleClickRemovePlaylistVideo:function(e){r.f.sendEvent("click_remove_playlist_video",e)},handleRemovePlaylistVideo:function(e){r.f.sendEvent("remove_playlist_video",e)}}}}]);