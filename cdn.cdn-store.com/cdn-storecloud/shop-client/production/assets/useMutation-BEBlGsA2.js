import{r as a,c as A,_ as E,m as L,A as T,e as C}from"./UserQuery-BcvHLWZm.js";import{c as j,d as q,v as z,D as O}from"./AuthenticationProvider-9RtBMSxF.js";var Q=A?a.useLayoutEffect:a.useEffect;function V(f,o){globalThis.__DEV__!==!1&&j(o||{},"ignoreResults","useMutation","If you don't want to synchronize component state with the mutation, please use the `useApolloClient` hook to get the client instance and call `client.mutate` directly.");var v=q(o==null?void 0:o.client);z(f,O.Mutation);var h=a.useState({called:!1,loading:!1,client:v}),p=h[0],l=h[1],t=a.useRef({result:p,mutationId:0,isMounted:!0,client:v,mutation:f,options:o});Q(function(){Object.assign(t.current,{client:v,options:o,mutation:f})});var R=a.useCallback(function(r){r===void 0&&(r={});var M=t.current,k=M.options,w=M.mutation,_=E(E({},k),{mutation:w}),s=r.client||t.current.client;!t.current.result.loading&&!_.ignoreResults&&t.current.isMounted&&l(t.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:s});var y=++t.current.mutationId,i=L(_,r);return s.mutate(i).then(function(e){var n,u,c=e.data,m=e.errors,d=m&&m.length>0?new T({graphQLErrors:m}):void 0,I=r.onError||((n=t.current.options)===null||n===void 0?void 0:n.onError);if(d&&I&&I(d,i),y===t.current.mutationId&&!i.ignoreResults){var b={called:!0,loading:!1,data:c,error:d,client:s};t.current.isMounted&&!C(t.current.result,b)&&l(t.current.result=b)}var g=r.onCompleted||((u=t.current.options)===null||u===void 0?void 0:u.onCompleted);return d||g==null||g(e.data,i),e},function(e){var n;if(y===t.current.mutationId&&t.current.isMounted){var u={loading:!1,error:e,data:void 0,called:!0,client:s};C(t.current.result,u)||l(t.current.result=u)}var c=r.onError||((n=t.current.options)===null||n===void 0?void 0:n.onError);if(c)return c(e,i),{data:void 0,errors:e};throw e})},[]),D=a.useCallback(function(){if(t.current.isMounted){var r={called:!1,loading:!1,client:t.current.client};Object.assign(t.current,{mutationId:0,result:r}),l(r)}},[]);return a.useEffect(function(){var r=t.current;return r.isMounted=!0,function(){r.isMounted=!1}},[]),[R,E({reset:D},p)]}export{Q as a,V as u};
//# sourceMappingURL=useMutation-BEBlGsA2.js.map
