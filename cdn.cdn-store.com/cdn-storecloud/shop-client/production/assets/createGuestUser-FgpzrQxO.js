import{g as u,s as m}from"./graphqlUtils-DUagluhW.js";import{i as o}from"./useMonorail-J6WwGwSW.js";import{g as T}from"./index-BYdSehkX.js";import{i,C as a,f as g}from"./statsdClient-CCQ7Es9D.js";const h=1e4;async function c(s,r){const e=(r==null?void 0:r.timeout)||h,t=new AbortController,n=setTimeout(()=>t.abort(),e);try{return await fetch(s,{...r,signal:t.signal})}catch(l){if(t.signal.aborted)return i(a.FetchTimeout),new Response(null,{status:504});throw i(a.FetchError),l}finally{clearTimeout(n)}}const y="/dev/guest-signin",f=T(),E=async({signInFallback:s=!0,triggerLogInWithShop:r,cookies:e})=>{const t={};o(e.clientToken)&&(t._MedusaJS_y=e.clientToken),o(e.sessionToken)&&(t._MedusaJS_s=e.sessionToken),o(e._fbp)&&(t._fbp=e._fbp);try{return f.APP_ENV==="development"||f.APP_ENV==="staging"?await c(y):await c(u(),{method:"POST",headers:{"Content-Type":"application/json",...m({cookies:t})},body:JSON.stringify({})})}catch(n){s&&r(),g.notify(n);return}};export{E as c};
//# sourceMappingURL=createGuestUser-FgpzrQxO.js.map
