import{j as d}from"./jsx-runtime-D_zvdyIk.js";import{r as l,x as j}from"./chunk-DQRVZFIR-mrH3D8v7.js";import{R}from"./index-DxO_0hRA.js";import{f as M}from"./statsdClient-CCQ7Es9D.js";import{B as T}from"./deviceUtils-BLIhItqY.js";import{I as i}from"./ImageUtils-D5ojfjzT.js";const O=()=>{const[t,s]=l.useState(!1);return l.useEffect(()=>{const n=window.matchMedia("(prefers-reduced-motion: reduce)");s(n.matches);const r=a=>{s(a.matches)};return n.addEventListener("change",r),()=>n.removeEventListener("change",r)},[]),t},x=t=>t.endsWith(".webm"),E=t=>t.endsWith(".mp4"),V=t=>x(t)||E(t),P=t=>{if(t!=="default")return`(min-width: ${T[t]}px)`},c=["xl","lg","md","sm","default"],K=({previewImageSource:t,sources:s,hasPoster:n,height:r,width:a,className:u,...h})=>{const[f,m]=l.useState(!1),p=O();!f&&Object.values(s).some(o=>!V(o))&&(m(!0),console.warn("Video sources do not have a supported video type. Please provide only .webm or .mp4 video sources."));const y=l.useCallback(o=>{const e=o.currentTarget.error;e&&(m(!0),M.notify(e))},[]),b=l.useMemo(()=>Object.keys(s).sort((o,e)=>c.indexOf(o)-c.indexOf(e)).map(o=>{const e=s[o];return e?W(o,e,P(o)):null}),[s]);return f||p?d.jsx(R,{"data-testid":"video-player-image",src:t==null?void 0:t.url,alt:(t==null?void 0:t.altText)||"",thumbhash:t==null?void 0:t.thumbhash,height:r,width:a,className:u,imageSizeAtBreakpoint:{default:i.lUrl,md:i.xlUrl,lg:i.xxlUrl}}):d.jsx("video",{...h,"data-testid":"video-player",className:u,height:r,width:a,poster:n?t==null?void 0:t.url:void 0,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,onError:y,children:b})},W=(t,s,n)=>d.jsxs(j.Fragment,{children:[x(s)&&d.jsx("source",{media:n,src:s,type:"video/webm"}),E(s)&&d.jsx("source",{media:n,src:s,type:"video/mp4"})]},t);export{K as V,O as u};
//# sourceMappingURL=VideoPlayer-DtkZx-4u.js.map
