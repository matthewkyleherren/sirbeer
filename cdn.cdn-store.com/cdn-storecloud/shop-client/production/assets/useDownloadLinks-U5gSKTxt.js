import{f as g,u as T,r as i}from"./chunk-DQRVZFIR-mrH3D8v7.js";import{I as p,E as l}from"./types-aSuMwFxz.js";import{S as c,g as L,h as m}from"./statsdClient-CCQ7Es9D.js";import{a as f,u as P}from"./useMonorail-J6WwGwSW.js";const R="sbt",G={default:"3I4LDKFZhtb",apple_wallet:"2lOAQisR4sb",shop_guarantee:"2iYr0HAQlyb",order_status_page:"D1D9S3jtsM",shop_cash:"OEYlkBe7GQb"},K={default:`${c}/0202e/z721`,apple_wallet:`${c}/8scl/qnwe`,shop_guarantee:`${c}/5ufp/uacu`,order_status_page:`${c}/6hky/ah85`,shop_cash:`${c}/timdy/d59k`};function b(t){if(t.match(/^\/products\/*./))return"product";if(t.match(/^\/m\/*./))return"merchant"}function C(t){try{const e=new URL(t);return{searchParams:Array.from(e.searchParams.entries()).reduce((n,o)=>(n[o[0]]=o[1],n),{}),pageToReport:b(e.pathname)}}catch{return{searchParams:{},pageToReport:void 0}}}const d=(t,e)=>{const r=new URL(t);return Object.entries(e).forEach(([n,o])=>{o&&r.searchParams.set(n,o)}),r.toString()},I=({sessionToken:t,deeplinkPath:e}={})=>({appleStoreLink:d(m.APPLE_STORE,{sid:t,_dl:e}),playStoreLink:d(m.GOOGLE_STORE,{sid:t,_dl:e}),downloadLink:L,smartBannerAppArguments:"?utm_source=shop-website"});function O({url:t,sessionToken:e,deeplinkPath:r}){const n=I({sessionToken:e,deeplinkPath:r});if(!t)return n;const o=C(t),a=o.searchParams.link_alias;return!a||!o.pageToReport?n:{appleStoreLink:d(n.appleStoreLink,{link_alias:a}),playStoreLink:d(n.playStoreLink,{link_alias:a}),downloadLink:d(L,{link_alias:a}),smartBannerAppArguments:`?utm_source=shop-website&link_alias=${a}`}}function $({deeplinkPath:t}={}){const{initialUrl:e,mobilePlatform:r}=g("root")||{},{sessionToken:n}=f(),[o]=T(),{reportEvent:a}=P(),u=i.useCallback(()=>{a({schemaId:"shop_app_entity_interaction/4.4",payload:{entityType:l.DownloadAppleStoreLink,entityId:"Product Marketing: Download iOS App",interactionType:p.DownloadAppleStoreLinkTapped}})},[a]),_=i.useCallback(()=>{a({schemaId:"shop_app_entity_interaction/4.4",payload:{entityType:l.DownloadPlayStoreLink,entityId:"Product Marketing: Download Android App",interactionType:p.DownloadPlayStoreLinkTapped}})},[a]),h=i.useCallback(()=>{a({schemaId:"shop_app_entity_interaction/4.4",payload:{entityType:l.DownloadBanner,entityId:"download_banner",interactionType:p.DownloadBannerTapped}})},[a]),s=i.useCallback(()=>{var y;if(!r)return;const k=o.get(R);k&&((y=navigator==null?void 0:navigator.clipboard)==null||y.writeText(k))},[r,o]),w=i.useCallback(()=>{s(),a({schemaId:"shop_app_entity_interaction/4.4",payload:{entityType:l.DownloadAppRating,entityId:"download_app_rating",interactionType:p.DownloadAppRatingClicked}})},[a,s]),A=i.useCallback(()=>{s(),a({schemaId:"shop_app_entity_interaction/4.4",payload:{entityType:l.Download,entityId:"download",interactionType:p.DownloadClicked}})},[a,s]),D=i.useCallback(()=>{s(),u()},[u,s]),S=i.useCallback(()=>{s(),_()},[_,s]);return{...O({url:e,sessionToken:n,deeplinkPath:t}),reportAppleStoreLinkClicked:u,reportPlayStoreLinkClicked:_,reportDownloadBannerLinkClicked:h,onClickAppRating:w,onClickDownloadButton:A,onClickAppStoreBadge:D,onClickPlayStoreBadge:S}}export{R as B,K as S,G as a,d as b,$ as u};
//# sourceMappingURL=useDownloadLinks-U5gSKTxt.js.map
