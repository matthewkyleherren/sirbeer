import{j as l}from"./jsx-runtime-D_zvdyIk.js";import{r as s,x as M,e as ze}from"./chunk-DQRVZFIR-mrH3D8v7.js";import{r as ce,R as Xe}from"./index-CbBP5-ZG.js";import{L as Ye}from"./Link-CnJfyO2i.js";import{u as qe}from"./NavigationUIStateProvider-DQZFh1H6.js";import{B as Je}from"./Button-D4K8aSAG.js";import{I as Q}from"./Icon-Vc_yr2r6.js";import{T as ee}from"./Text-BrMatKQv.js";import{c as V}from"./cn-yu2yf51J.js";import{u as Ee}from"./useShoppingEvents-fSQONDgU.js";import{P as pe}from"./types-BLzQfJqq.js";import{e as Ze}from"./useMonorail-J6WwGwSW.js";import{u as Qe}from"./useDeviceInfo-BQxbyz0y.js";import{u as et}from"./useTranslation-DjeLP5O7.js";function O(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e==null||e(o),n===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}function tt(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function he(...e){return t=>e.forEach(n=>tt(n,t))}function F(...e){return s.useCallback(he(...e),e)}function ye(e,t=[]){let n=[];function r(i,a){const u=s.createContext(a),f=n.length;n=[...n,a];function c(x){const{scope:b,children:w,...y}=x,T=(b==null?void 0:b[e][f])||u,p=s.useMemo(()=>y,Object.values(y));return l.jsx(T.Provider,{value:p,children:w})}function m(x,b){const w=(b==null?void 0:b[e][f])||u,y=s.useContext(w);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${x}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,m]}const o=()=>{const i=n.map(a=>s.createContext(a));return function(u){const f=(u==null?void 0:u[e])||i;return s.useMemo(()=>({[`__scope${e}`]:{...u,[e]:f}}),[u,f])}};return o.scopeName=e,[r,nt(o,...t)]}function nt(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){const a=r.reduce((u,{useScope:f,scopeName:c})=>{const x=f(i)[`__scope${c}`];return{...u,...x}},{});return s.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}var X=s.forwardRef((e,t)=>{const{children:n,...r}=e,o=s.Children.toArray(n),i=o.find(ot);if(i){const a=i.props.children,u=o.map(f=>f===i?s.Children.count(a)>1?s.Children.only(null):s.isValidElement(a)?a.props.children:null:f);return l.jsx(re,{...r,ref:t,children:s.isValidElement(a)?s.cloneElement(a,void 0,u):null})}return l.jsx(re,{...r,ref:t,children:n})});X.displayName="Slot";var re=s.forwardRef((e,t)=>{const{children:n,...r}=e;if(s.isValidElement(n)){const o=it(n);return s.cloneElement(n,{...st(r,n.props),ref:t?he(t,o):o})}return s.Children.count(n)>1?s.Children.only(null):null});re.displayName="SlotClone";var rt=({children:e})=>l.jsx(l.Fragment,{children:e});function ot(e){return s.isValidElement(e)&&e.type===rt}function st(e,t){const n={...t};for(const r in t){const o=e[r],i=t[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...u)=>{i(...u),o(...u)}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...e,...n}}function it(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function at(e){const t=e+"CollectionProvider",[n,r]=ye(t),[o,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=w=>{const{scope:y,children:T}=w,p=M.useRef(null),g=M.useRef(new Map).current;return l.jsx(o,{scope:y,itemMap:g,collectionRef:p,children:T})};a.displayName=t;const u=e+"CollectionSlot",f=M.forwardRef((w,y)=>{const{scope:T,children:p}=w,g=i(u,T),h=F(y,g.collectionRef);return l.jsx(X,{ref:h,children:p})});f.displayName=u;const c=e+"CollectionItemSlot",m="data-radix-collection-item",x=M.forwardRef((w,y)=>{const{scope:T,children:p,...g}=w,h=M.useRef(null),P=F(y,h),S=i(c,T);return M.useEffect(()=>(S.itemMap.set(h,{ref:h,...g}),()=>void S.itemMap.delete(h))),l.jsx(X,{[m]:"",ref:P,children:p})});x.displayName=c;function b(w){const y=i(e+"CollectionConsumer",w);return M.useCallback(()=>{const p=y.collectionRef.current;if(!p)return[];const g=Array.from(p.querySelectorAll(`[${m}]`));return Array.from(y.itemMap.values()).sort((S,R)=>g.indexOf(S.ref.current)-g.indexOf(R.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:a,Slot:f,ItemSlot:x},b,r]}var ct=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],I=ct.reduce((e,t)=>{const n=s.forwardRef((r,o)=>{const{asChild:i,...a}=r,u=i?X:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(u,{...a,ref:o})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function be(e,t){e&&ce.flushSync(()=>e.dispatchEvent(t))}function D(e){const t=s.useRef(e);return s.useEffect(()=>{t.current=e}),s.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function ut(e,t=globalThis==null?void 0:globalThis.document){const n=D(e);s.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var lt="DismissableLayer",oe="dismissableLayer.update",dt="dismissableLayer.pointerDownOutside",ft="dismissableLayer.focusOutside",me,Ce=s.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ge=s.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:a,onDismiss:u,...f}=e,c=s.useContext(Ce),[m,x]=s.useState(null),b=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=s.useState({}),y=F(t,v=>x(v)),T=Array.from(c.layers),[p]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),g=T.indexOf(p),h=m?T.indexOf(m):-1,P=c.layersWithOutsidePointerEventsDisabled.size>0,S=h>=g,R=mt(v=>{const C=v.target,N=[...c.branches].some(L=>L.contains(C));!S||N||(o==null||o(v),a==null||a(v),v.defaultPrevented||u==null||u())},b),d=vt(v=>{const C=v.target;[...c.branches].some(L=>L.contains(C))||(i==null||i(v),a==null||a(v),v.defaultPrevented||u==null||u())},b);return ut(v=>{h===c.layers.size-1&&(r==null||r(v),!v.defaultPrevented&&u&&(v.preventDefault(),u()))},b),s.useEffect(()=>{if(m)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(me=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(m)),c.layers.add(m),ve(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=me)}},[m,b,n,c]),s.useEffect(()=>()=>{m&&(c.layers.delete(m),c.layersWithOutsidePointerEventsDisabled.delete(m),ve())},[m,c]),s.useEffect(()=>{const v=()=>w({});return document.addEventListener(oe,v),()=>document.removeEventListener(oe,v)},[]),l.jsx(I.div,{...f,ref:y,style:{pointerEvents:P?S?"auto":"none":void 0,...e.style},onFocusCapture:O(e.onFocusCapture,d.onFocusCapture),onBlurCapture:O(e.onBlurCapture,d.onBlurCapture),onPointerDownCapture:O(e.onPointerDownCapture,R.onPointerDownCapture)})});ge.displayName=lt;var pt="DismissableLayerBranch",Pe=s.forwardRef((e,t)=>{const n=s.useContext(Ce),r=s.useRef(null),o=F(t,r);return s.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),l.jsx(I.div,{...e,ref:o})});Pe.displayName=pt;function mt(e,t=globalThis==null?void 0:globalThis.document){const n=D(e),r=s.useRef(!1),o=s.useRef(()=>{});return s.useEffect(()=>{const i=u=>{if(u.target&&!r.current){let f=function(){Se(dt,n,c,{discrete:!0})};const c={originalEvent:u};u.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=f,t.addEventListener("click",o.current,{once:!0})):f()}else t.removeEventListener("click",o.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",i),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function vt(e,t=globalThis==null?void 0:globalThis.document){const n=D(e),r=s.useRef(!1);return s.useEffect(()=>{const o=i=>{i.target&&!r.current&&Se(ft,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function ve(){const e=new CustomEvent(oe);document.dispatchEvent(e)}function Se(e,t,n,{discrete:r}){const o=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?be(o,i):o.dispatchEvent(i)}var Tt=ge,xt=Pe,Y=globalThis!=null&&globalThis.document?s.useLayoutEffect:()=>{},wt="Portal",Re=s.forwardRef((e,t)=>{var u;const{container:n,...r}=e,[o,i]=s.useState(!1);Y(()=>i(!0),[]);const a=n||o&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return a?Xe.createPortal(l.jsx(I.div,{...r,ref:t}),a):null});Re.displayName=wt;function Et(e,t){return s.useReducer((n,r)=>t[n][r]??n,e)}var Ne=e=>{const{present:t,children:n}=e,r=ht(t),o=typeof n=="function"?n({present:r.isPresent}):s.Children.only(n),i=F(r.ref,yt(o));return typeof n=="function"||r.isPresent?s.cloneElement(o,{ref:i}):null};Ne.displayName="Presence";function ht(e){const[t,n]=s.useState(),r=s.useRef({}),o=s.useRef(e),i=s.useRef("none"),a=e?"mounted":"unmounted",[u,f]=Et(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return s.useEffect(()=>{const c=G(r.current);i.current=u==="mounted"?c:"none"},[u]),Y(()=>{const c=r.current,m=o.current;if(m!==e){const b=i.current,w=G(c);e?f("MOUNT"):w==="none"||(c==null?void 0:c.display)==="none"?f("UNMOUNT"):f(m&&b!==w?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,f]),Y(()=>{if(t){const c=x=>{const w=G(r.current).includes(x.animationName);x.target===t&&w&&ce.flushSync(()=>f("ANIMATION_END"))},m=x=>{x.target===t&&(i.current=G(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",c),t.addEventListener("animationend",c),()=>{t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",c),t.removeEventListener("animationend",c)}}else f("ANIMATION_END")},[t,f]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:s.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function G(e){return(e==null?void 0:e.animationName)||"none"}function yt(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function bt({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,o]=Ct({defaultProp:t,onChange:n}),i=e!==void 0,a=i?e:r,u=D(n),f=s.useCallback(c=>{if(i){const x=typeof c=="function"?c(e):c;x!==e&&u(x)}else o(c)},[i,e,o,u]);return[a,f]}function Ct({defaultProp:e,onChange:t}){const n=s.useState(e),[r]=n,o=s.useRef(r),i=D(t);return s.useEffect(()=>{o.current!==r&&(i(r),o.current=r)},[r,o,i]),n}var gt="VisuallyHidden",ue=s.forwardRef((e,t)=>l.jsx(I.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));ue.displayName=gt;var le="ToastProvider",[de,Pt,St]=at("Toast"),[Oe,En]=ye("Toast",[St]),[Rt,q]=Oe(le),Ae=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:o="right",swipeThreshold:i=50,children:a}=e,[u,f]=s.useState(null),[c,m]=s.useState(0),x=s.useRef(!1),b=s.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${le}\`. Expected non-empty \`string\`.`),l.jsx(de.Provider,{scope:t,children:l.jsx(Rt,{scope:t,label:n,duration:r,swipeDirection:o,swipeThreshold:i,toastCount:c,viewport:u,onViewportChange:f,onToastAdd:s.useCallback(()=>m(w=>w+1),[]),onToastRemove:s.useCallback(()=>m(w=>w-1),[]),isFocusedToastEscapeKeyDownRef:x,isClosePausedRef:b,children:a})})};Ae.displayName=le;var Ie="ToastViewport",Nt=["F8"],se="toast.viewportPause",ie="toast.viewportResume",_e=s.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=Nt,label:o="Notifications ({hotkey})",...i}=e,a=q(Ie,n),u=Pt(n),f=s.useRef(null),c=s.useRef(null),m=s.useRef(null),x=s.useRef(null),b=F(t,x,a.onViewportChange),w=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=a.toastCount>0;s.useEffect(()=>{const p=g=>{var P;r.every(S=>g[S]||g.code===S)&&((P=x.current)==null||P.focus())};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[r]),s.useEffect(()=>{const p=f.current,g=x.current;if(y&&p&&g){const h=()=>{if(!a.isClosePausedRef.current){const d=new CustomEvent(se);g.dispatchEvent(d),a.isClosePausedRef.current=!0}},P=()=>{if(a.isClosePausedRef.current){const d=new CustomEvent(ie);g.dispatchEvent(d),a.isClosePausedRef.current=!1}},S=d=>{!p.contains(d.relatedTarget)&&P()},R=()=>{p.contains(document.activeElement)||P()};return p.addEventListener("focusin",h),p.addEventListener("focusout",S),p.addEventListener("pointermove",h),p.addEventListener("pointerleave",R),window.addEventListener("blur",h),window.addEventListener("focus",P),()=>{p.removeEventListener("focusin",h),p.removeEventListener("focusout",S),p.removeEventListener("pointermove",h),p.removeEventListener("pointerleave",R),window.removeEventListener("blur",h),window.removeEventListener("focus",P)}}},[y,a.isClosePausedRef]);const T=s.useCallback(({tabbingDirection:p})=>{const h=u().map(P=>{const S=P.ref.current,R=[S,...Wt(S)];return p==="forwards"?R:R.reverse()});return(p==="forwards"?h.reverse():h).flat()},[u]);return s.useEffect(()=>{const p=x.current;if(p){const g=h=>{var R,d,v;const P=h.altKey||h.ctrlKey||h.metaKey;if(h.key==="Tab"&&!P){const C=document.activeElement,N=h.shiftKey;if(h.target===p&&N){(R=c.current)==null||R.focus();return}const j=T({tabbingDirection:N?"backwards":"forwards"}),K=j.findIndex(E=>E===C);te(j.slice(K+1))?h.preventDefault():N?(d=c.current)==null||d.focus():(v=m.current)==null||v.focus()}};return p.addEventListener("keydown",g),()=>p.removeEventListener("keydown",g)}},[u,T]),l.jsxs(xt,{ref:f,role:"region","aria-label":o.replace("{hotkey}",w),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&l.jsx(ae,{ref:c,onFocusFromOutsideViewport:()=>{const p=T({tabbingDirection:"forwards"});te(p)}}),l.jsx(de.Slot,{scope:n,children:l.jsx(I.ol,{tabIndex:-1,...i,ref:b})}),y&&l.jsx(ae,{ref:m,onFocusFromOutsideViewport:()=>{const p=T({tabbingDirection:"backwards"});te(p)}})]})});_e.displayName=Ie;var De="ToastFocusProxy",ae=s.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...o}=e,i=q(De,n);return l.jsx(ue,{"aria-hidden":!0,tabIndex:0,...o,ref:t,style:{position:"fixed"},onFocus:a=>{var c;const u=a.relatedTarget;!((c=i.viewport)!=null&&c.contains(u))&&r()}})});ae.displayName=De;var J="Toast",Ot="toast.swipeStart",At="toast.swipeMove",It="toast.swipeCancel",_t="toast.swipeEnd",Le=s.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:o,onOpenChange:i,...a}=e,[u=!0,f]=bt({prop:r,defaultProp:o,onChange:i});return l.jsx(Ne,{present:n||u,children:l.jsx(kt,{open:u,...a,ref:t,onClose:()=>f(!1),onPause:D(e.onPause),onResume:D(e.onResume),onSwipeStart:O(e.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:O(e.onSwipeMove,c=>{const{x:m,y:x}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${x}px`)}),onSwipeCancel:O(e.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:O(e.onSwipeEnd,c=>{const{x:m,y:x}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${x}px`),f(!1)})})})});Le.displayName=J;var[Dt,Lt]=Oe(J,{onClose(){}}),kt=s.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:o,open:i,onClose:a,onEscapeKeyDown:u,onPause:f,onResume:c,onSwipeStart:m,onSwipeMove:x,onSwipeCancel:b,onSwipeEnd:w,...y}=e,T=q(J,n),[p,g]=s.useState(null),h=F(t,E=>g(E)),P=s.useRef(null),S=s.useRef(null),R=o||T.duration,d=s.useRef(0),v=s.useRef(R),C=s.useRef(0),{onToastAdd:N,onToastRemove:L}=T,_=D(()=>{var A;(p==null?void 0:p.contains(document.activeElement))&&((A=T.viewport)==null||A.focus()),a()}),j=s.useCallback(E=>{!E||E===1/0||(window.clearTimeout(C.current),d.current=new Date().getTime(),C.current=window.setTimeout(_,E))},[_]);s.useEffect(()=>{const E=T.viewport;if(E){const A=()=>{j(v.current),c==null||c()},k=()=>{const B=new Date().getTime()-d.current;v.current=v.current-B,window.clearTimeout(C.current),f==null||f()};return E.addEventListener(se,k),E.addEventListener(ie,A),()=>{E.removeEventListener(se,k),E.removeEventListener(ie,A)}}},[T.viewport,R,f,c,j]),s.useEffect(()=>{i&&!T.isClosePausedRef.current&&j(R)},[i,R,T.isClosePausedRef,j]),s.useEffect(()=>(N(),()=>L()),[N,L]);const K=s.useMemo(()=>p?Ue(p):null,[p]);return T.viewport?l.jsxs(l.Fragment,{children:[K&&l.jsx(jt,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:K}),l.jsx(Dt,{scope:n,onClose:_,children:ce.createPortal(l.jsx(de.ItemSlot,{scope:n,children:l.jsx(Tt,{asChild:!0,onEscapeKeyDown:O(u,()=>{T.isFocusedToastEscapeKeyDownRef.current||_(),T.isFocusedToastEscapeKeyDownRef.current=!1}),children:l.jsx(I.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":T.swipeDirection,...y,ref:h,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:O(e.onKeyDown,E=>{E.key==="Escape"&&(u==null||u(E.nativeEvent),E.nativeEvent.defaultPrevented||(T.isFocusedToastEscapeKeyDownRef.current=!0,_()))}),onPointerDown:O(e.onPointerDown,E=>{E.button===0&&(P.current={x:E.clientX,y:E.clientY})}),onPointerMove:O(e.onPointerMove,E=>{if(!P.current)return;const A=E.clientX-P.current.x,k=E.clientY-P.current.y,B=!!S.current,U=["left","right"].includes(T.swipeDirection),$=["left","up"].includes(T.swipeDirection)?Math.min:Math.max,He=U?$(0,A):0,Ge=U?0:$(0,k),Z=E.pointerType==="touch"?10:2,H={x:He,y:Ge},fe={originalEvent:E,delta:H};B?(S.current=H,z(At,x,fe,{discrete:!1})):Te(H,T.swipeDirection,Z)?(S.current=H,z(Ot,m,fe,{discrete:!1}),E.target.setPointerCapture(E.pointerId)):(Math.abs(A)>Z||Math.abs(k)>Z)&&(P.current=null)}),onPointerUp:O(e.onPointerUp,E=>{const A=S.current,k=E.target;if(k.hasPointerCapture(E.pointerId)&&k.releasePointerCapture(E.pointerId),S.current=null,P.current=null,A){const B=E.currentTarget,U={originalEvent:E,delta:A};Te(A,T.swipeDirection,T.swipeThreshold)?z(_t,w,U,{discrete:!0}):z(It,b,U,{discrete:!0}),B.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),T.viewport)})]}):null}),jt=e=>{const{__scopeToast:t,children:n,...r}=e,o=q(J,t),[i,a]=s.useState(!1),[u,f]=s.useState(!1);return Bt(()=>a(!0)),s.useEffect(()=>{const c=window.setTimeout(()=>f(!0),1e3);return()=>window.clearTimeout(c)},[]),u?null:l.jsx(Re,{asChild:!0,children:l.jsx(ue,{...r,children:i&&l.jsxs(l.Fragment,{children:[o.label," ",n]})})})},Mt="ToastTitle",ke=s.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return l.jsx(I.div,{...r,ref:t})});ke.displayName=Mt;var Ft="ToastDescription",je=s.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return l.jsx(I.div,{...r,ref:t})});je.displayName=Ft;var Me="ToastAction",Vt=s.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?l.jsx(Be,{altText:n,asChild:!0,children:l.jsx(Ve,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Me}\`. Expected non-empty \`string\`.`),null)});Vt.displayName=Me;var Fe="ToastClose",Ve=s.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,o=Lt(Fe,n);return l.jsx(Be,{asChild:!0,children:l.jsx(I.button,{type:"button",...r,ref:t,onClick:O(e.onClick,o.onClose)})})});Ve.displayName=Fe;var Be=s.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...o}=e;return l.jsx(I.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...o,ref:t})});function Ue(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),Ut(r)){const o=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!o)if(i){const a=r.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...Ue(r))}}),t}function z(e,t,n,{discrete:r}){const o=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?be(o,i):o.dispatchEvent(i)}var Te=(e,t,n=0)=>{const r=Math.abs(e.x),o=Math.abs(e.y),i=r>o;return t==="left"||t==="right"?i&&r>n:!i&&o>n};function Bt(e=()=>{}){const t=D(e);Y(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function Ut(e){return e.nodeType===e.ELEMENT_NODE}function Wt(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function te(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var Kt=Ae,$t=_e,Ht=Le,Gt=ke,zt=je;const We=({to:e,children:t,testId:n,className:r,onClick:o,target:i,ariaLabel:a})=>e?l.jsx(Ye,{id:a,tabIndex:o?0:-1,to:e,"data-testid":n,className:r,onClick:o,target:i,"aria-label":a,children:t}):t,Ke="feedback",ne={feedback:"text-text-fixed-light",error:"text-text-fixed-light",snackbar:"text-text-fixed-dark text-left md:text-center"},Xt=({title:e,description:t,onUnmount:n,leftIcon:r,leftIconComponent:o,onCloseButtonClick:i,cta:a,variant:u=Ke,toastId:f})=>{s.useEffect(()=>()=>n(f),[n,f]);const c=()=>r?l.jsx(Q,{name:r,size:"m",className:ne[u]}):o;return l.jsxs("div",{className:V("flex items-center justify-center gap-space-8 md:gap-space-12 ",u==="snackbar"&&"md:flex-col"),"data-testid":`toast-${u}`,children:[c(),l.jsxs("div",{className:V("px-20 flex flex-grow flex-col"),children:[l.jsx(Gt,{children:l.jsx(ee,{className:V(ne[u],u==="snackbar"?"text-bodyTitleSmall":"md:text-bodyTitleSmall"),variant:u==="snackbar"?"bodyTitleSmall":"caption",children:e})}),u==="snackbar"&&t&&l.jsx(zt,{asChild:!0,children:l.jsx(ee,{variant:"caption",className:V(ne[u],"text-text-tertiary"),children:t})})]}),a&&l.jsx(We,{to:a.linkTo,testId:"toast-content-link","aria-label":`${a.content.text}`,children:l.jsx(Je,{onClick:m=>{var x;m.stopPropagation(),(x=a.action)==null||x.call(a)},variant:u==="snackbar"?"secondary":"outlined-white",size:"m",className:"ml-space-8",children:l.jsxs("div",{className:"flex items-center justify-center gap-space-4 text-nowrap",children:[l.jsx(ee,{className:"text-text-fixed-light",variant:"bodySmall",children:a.content.text}),a.content.icon&&l.jsx(Q,{"aria-hidden":"true",name:a.content.icon,size:"s",className:"text-text-fixed-light"})]})})}),i&&!a&&l.jsx("button",{onClick:i,className:u==="snackbar"?"right-0 top-0 m-space-16 hidden md:absolute md:block":"","data-testid":"toast-close-button",children:l.jsx(Q,{"aria-hidden":"true",name:"cross-circle-filled",size:"m",className:u==="snackbar"?"text-text-fixed-dark":"text-text-fixed-light"})})]})},W="shopping_event_banner";function xe(){try{const e="__session_storage_test__";return window.sessionStorage.setItem(e,e),window.sessionStorage.removeItem(e),!0}catch{return!1}}function Yt(e){const[t,n]=s.useState(!1);s.useEffect(()=>{var o;if(!e){n(!1);return}if(!xe()){n(!0);return}try{const i=window.sessionStorage.getItem(W);if(!i){n(!0);return}const a=JSON.parse(i);if(!Array.isArray(a)){window.sessionStorage.removeItem(W),n(!0);return}if(a.includes(e)){n(!1);return}n(!0)}catch{(o=window==null?void 0:window.sessionStorage)==null||o.removeItem(W),n(!0)}},[e]);const r=s.useCallback(()=>{if(n(!1),!(!e||!xe()))try{const o=window.sessionStorage.getItem(W);let i=[];if(o){const u=JSON.parse(o);Array.isArray(u)&&(i=u)}i.push(e);const a=JSON.stringify(i);window.sessionStorage.setItem(W,a)}catch{}},[e]);return{isVisible:t,dismiss:r}}const qt="0";function Jt({skip:e=!1}={}){var a,u;const{pageType:t}=Ze(),{shoppingEvent:n}=Ee({skip:e}),r=ze(),o=t===pe.Home&&((a=n==null?void 0:n.discovery)==null?void 0:a.topBannerEnabled),i=t===pe.Categories&&(!(r!=null&&r.id)||r.id===qt)&&((u=n==null?void 0:n.discovery)==null?void 0:u.topBannerOnExploreAndCategoryPagesEnabled);return o||i}const Zt="_ToastViewport_154kk_1",Qt="_ToastRoot_154kk_5",we={ToastViewport:Zt,ToastRoot:Qt},en=4e3,tn=20,nn={feedback:"bg-bg-fill-fixed-dark",error:"bg-bg-fill-critical",snackbar:"bg-bg-fill"},rn={showToast:()=>({close:()=>null}),showGenericError:()=>null,closeGroup:()=>null},$e=s.createContext(rn),hn=()=>s.useContext($e),yn=({children:e,skipShoppingEvents:t=!1})=>{const{t:n}=et(),[r,o]=s.useState([]),i=s.useRef(0),a=s.useRef(null),{isMobile:u}=Qe(),{showHeaderAndBottomTabBar:f}=qe(),c=Jt({skip:t}),{giveaway:m}=Ee({skip:t}),{isVisible:x}=Yt(m.handle),b=c&&x&&m.visible,w=s.useCallback(d=>{o(v=>v.map(C=>{var N;return C.id===d.id?((N=d.onClose)==null||N.call(d,d),{...C,open:!1}):C}))},[]),y=s.useCallback(()=>{a.current=document.activeElement},[]),T=s.useCallback(()=>{a.current&&(a.current.focus(),a.current=null)},[]),p=s.useCallback(d=>{const v={id:`${i.current}`,open:!0,variant:Ke},C={...v,...d};return y(),o(N=>d.groupId?[...N.filter(_=>_.groupId?_.groupId!==d.groupId:!0),{...v,...d}]:[...N,{...v,...d}]),i.current+=1,{close:()=>{w(C)}}},[w,y]),g=s.useCallback(()=>{p({variant:"error",title:n("Toast.GenericError")})},[p,n]),h=s.useCallback(d=>{const v=r.find(C=>C.groupId===d);v&&w(v)},[w,r]),P=s.useCallback(({toast:d})=>{w(d)},[w]),S=s.useCallback(d=>{o(v=>{const C=v.filter(N=>N.id!==d);return C.length||T(),C})},[T]),R=s.useCallback(({open:d,toast:v})=>{d||w(v)},[w]);return l.jsxs($e.Provider,{value:{showToast:p,showGenericError:g,closeGroup:h},children:[e,l.jsx(Kt,{swipeDirection:"down",swipeThreshold:tn,label:n("Toast.Label"),children:l.jsxs(l.Fragment,{children:[r.map(d=>(d.mobileOnly?u:!0)?l.jsx(Ht,{duration:d.duration??en,className:V(we.ToastRoot,"mx-auto max-w-[560px] px-space-20 py-space-12 shadow-lg",d.cta&&"w-full",d.variant==="snackbar"?"rounded-radius-16 border-[0.5px] border-border md:absolute md:bottom-0 md:right-0 md:mb-space-32 md:mr-space-32 md:w-auto md:px-space-32 md:py-space-24":"rounded-radius-max",nn[d.variant]),open:d.open,onOpenChange:C=>R({open:C,toast:d}),ref:C=>{C&&d.cta&&C.focus()},"data-toast-id":d.id,children:l.jsx(We,{to:d.linkTo,onClick:()=>{R({open:!1,toast:d})},className:"block w-full",children:l.jsx(Xt,{title:d.title,description:d.description,leftIcon:d.leftIcon,leftIconComponent:d.leftIconComponent,variant:d.variant,onUnmount:S,onCloseButtonClick:d.showCloseButton?()=>P({toast:d}):void 0,cta:d.cta,toastId:d.id})})},d.id):null),l.jsx($t,{className:V(we.ToastViewport,"fixed bottom-0 left-0 m-space-0 flex w-full max-w-[100vw] list-none flex-col gap-space-16 px-space-16 outline-none md:items-center","mb-space-32 md:left-[50%] md:w-full md:translate-x-[-50%]",f?"max-lg:mb-space-64":"",b?"lg:pb-[96px]":"")})]})})]})};export{We as C,I as P,qt as R,yn as T,ut as a,D as b,Y as c,bt as d,ye as e,at as f,O as g,F as h,Yt as i,Jt as j,hn as u};
//# sourceMappingURL=Toast-Bb3RYazJ.js.map
