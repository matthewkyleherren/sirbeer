import{j as q}from"./jsx-runtime-D_zvdyIk.js";import{r as L}from"./chunk-DQRVZFIR-mrH3D8v7.js";import{I as Bt}from"./Icon-Vc_yr2r6.js";import{c as Rt}from"./cn-yu2yf51J.js";const Et=({className:t})=>q.jsx("div",{className:Rt("flex size-full items-center justify-center bg-bg-fill-secondary",t),"data-testid":"no-image",children:q.jsx(Bt,{name:"no-image",className:"text-text-secondary-inverse"})}),nt="3.7.7",Ft=nt,B=typeof Buffer=="function",Y=typeof TextDecoder=="function"?new TextDecoder:void 0,tt=typeof TextEncoder=="function"?new TextEncoder:void 0,St="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",j=Array.prototype.slice.call(St),Z=(t=>{let e={};return t.forEach((o,r)=>e[o]=r),e})(j),Dt=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,c=String.fromCharCode.bind(String),et=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),at=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),st=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),lt=t=>{let e,o,r,l,n="";const u=t.length%3;for(let f=0;f<t.length;){if((o=t.charCodeAt(f++))>255||(r=t.charCodeAt(f++))>255||(l=t.charCodeAt(f++))>255)throw new TypeError("invalid character found");e=o<<16|r<<8|l,n+=j[e>>18&63]+j[e>>12&63]+j[e>>6&63]+j[e&63]}return u?n.slice(0,u-3)+"===".substring(u):n},$=typeof btoa=="function"?t=>btoa(t):B?t=>Buffer.from(t,"binary").toString("base64"):lt,O=B?t=>Buffer.from(t).toString("base64"):t=>{let o=[];for(let r=0,l=t.length;r<l;r+=4096)o.push(c.apply(null,t.subarray(r,r+4096)));return $(o.join(""))},k=(t,e=!1)=>e?at(O(t)):O(t),Lt=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?c(192|e>>>6)+c(128|e&63):c(224|e>>>12&15)+c(128|e>>>6&63)+c(128|e&63)}else{var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return c(240|e>>>18&7)+c(128|e>>>12&63)+c(128|e>>>6&63)+c(128|e&63)}},jt=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,ft=t=>t.replace(jt,Lt),rt=B?t=>Buffer.from(t,"utf8").toString("base64"):tt?t=>O(tt.encode(t)):t=>$(ft(t)),C=(t,e=!1)=>e?at(rt(t)):rt(t),ot=t=>C(t,!0),It=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Tt=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),o=e-65536;return c((o>>>10)+55296)+c((o&1023)+56320);case 3:return c((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return c((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},it=t=>t.replace(It,Tt),ct=t=>{if(t=t.replace(/\s+/g,""),!Dt.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,o="",r,l;for(let n=0;n<t.length;)e=Z[t.charAt(n++)]<<18|Z[t.charAt(n++)]<<12|(r=Z[t.charAt(n++)])<<6|(l=Z[t.charAt(n++)]),o+=r===64?c(e>>16&255):l===64?c(e>>16&255,e>>8&255):c(e>>16&255,e>>8&255,e&255);return o},G=typeof atob=="function"?t=>atob(st(t)):B?t=>Buffer.from(t,"base64").toString("binary"):ct,ut=B?t=>et(Buffer.from(t,"base64")):t=>et(G(t).split("").map(e=>e.charCodeAt(0))),M=t=>ut(dt(t)),wt=B?t=>Buffer.from(t,"base64").toString("utf8"):Y?t=>Y.decode(ut(t)):t=>it(G(t)),dt=t=>st(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),V=t=>wt(dt(t)),vt=t=>{if(typeof t!="string")return!1;const e=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},xt=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),bt=function(){const t=(e,o)=>Object.defineProperty(String.prototype,e,xt(o));t("fromBase64",function(){return V(this)}),t("toBase64",function(e){return C(this,e)}),t("toBase64URI",function(){return C(this,!0)}),t("toBase64URL",function(){return C(this,!0)}),t("toUint8Array",function(){return M(this)})},ht=function(){const t=(e,o)=>Object.defineProperty(Uint8Array.prototype,e,xt(o));t("toBase64",function(e){return k(this,e)}),t("toBase64URI",function(){return k(this,!0)}),t("toBase64URL",function(){return k(this,!0)})},zt=()=>{bt(),ht()},Gt={version:nt,VERSION:Ft,atob:G,atobPolyfill:ct,btoa:$,btoaPolyfill:lt,fromBase64:V,toBase64:C,encode:C,encodeURI:ot,encodeURL:ot,utob:ft,btou:it,decode:V,isValid:vt,fromUint8Array:k,toUint8Array:M,extendString:bt,extendUint8Array:ht,extendBuiltins:zt};function Pt(t){let{PI:e,min:o,max:r,cos:l,round:n}=Math,u=t[0]|t[1]<<8|t[2]<<16,f=t[3]|t[4]<<8,h=(u&63)/63,m=(u>>6&63)/31.5-1,d=(u>>12&63)/31.5-1,s=(u>>18&31)/31,i=u>>23,I=(f>>3&63)/63,H=(f>>9&63)/63,A=f>>15,p=r(3,A?i?5:7:f&7),R=r(3,A?f&7:i?5:7),mt=i?(t[5]&15)/15:1,yt=(t[5]>>4)/15,pt=i?6:5,J=0,T=(F,y,S)=>{let _=[];for(let g=0;g<y;g++)for(let U=g?0:1;U*y<F*(y-g);U++)_.push(((t[pt+(J>>1)]>>((J++&1)<<2)&15)/7.5-1)*S);return _},gt=T(p,R,s),At=T(3,3,I*1.25),_t=T(3,3,H*1.25),Ut=i&&T(5,5,yt),w=Nt(t),v=n(w>1?32:32*w),z=n(w>1?32/w:32),E=new Uint8Array(v*z*4),P=[],N=[];for(let F=0,y=0;F<z;F++)for(let S=0;S<v;S++,y+=4){let _=h,g=m,U=d,K=mt;for(let a=0,x=r(p,i?5:3);a<x;a++)P[a]=l(e/v*(S+.5)*a);for(let a=0,x=r(R,i?5:3);a<x;a++)N[a]=l(e/z*(F+.5)*a);for(let a=0,x=0;a<R;a++)for(let b=a?0:1,D=N[a]*2;b*R<p*(R-a);b++,x++)_+=gt[x]*P[b]*D;for(let a=0,x=0;a<3;a++)for(let b=a?0:1,D=N[a]*2;b<3-a;b++,x++){let X=P[b]*D;g+=At[x]*X,U+=_t[x]*X}if(i)for(let a=0,x=0;a<5;a++)for(let b=a?0:1,D=N[a]*2;b<5-a;b++,x++)K+=Ut[x]*P[b]*D;let Q=_-2/3*g,W=(3*_-Q+U)/2,Ct=W-U;E[y]=r(0,255*o(1,W)),E[y+1]=r(0,255*o(1,Ct)),E[y+2]=r(0,255*o(1,Q)),E[y+3]=r(0,255*o(1,K))}return{w:v,h:z,rgba:E}}function Nt(t){let e=t[3],o=t[2]&128,r=t[4]&128,l=r?o?5:7:e&7,n=r?e&7:o?5:7;return l/n}function Zt(t,e,o){let r=t*4+1,l=6+e*(5+r),n=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,t>>8,t&255,0,0,e>>8,e&255,8,6,0,0,0,0,0,0,0,l>>>24,l>>16&255,l>>8&255,l&255,73,68,65,84,120,1],u=[0,498536548,997073096,651767980,1994146192,1802195444,1303535960,1342533948,-306674912,-267414716,-690576408,-882789492,-1687895376,-2032938284,-1609899400,-1111625188],f=1,h=0;for(let m=0,d=0,s=r-1;m<e;m++,s+=r-1)for(n.push(m+1<e?0:1,r&255,r>>8,~r&255,r>>8^255,0),h=(h+f)%65521;d<s;d++){let i=o[d]&255;n.push(i),f=(f+i)%65521,h=(h+f)%65521}n.push(h>>8,h&255,f>>8,f&255,0,0,0,0,0,0,0,0,73,69,78,68,174,66,96,130);for(let[m,d]of[[12,29],[37,41+l]]){let s=-1;for(let i=m;i<d;i++)s^=n[i],s=s>>>4^u[s&15],s=s>>>4^u[s&15];s=~s,n[d++]=s>>>24,n[d++]=s>>16&255,n[d++]=s>>8&255,n[d++]=s&255}return"data:image/png;base64,"+btoa(String.fromCharCode(...n))}function kt(t){let e=Pt(t);return Zt(e.w,e.h,e.rgba)}function qt(t){if(t)try{const e=M(t);return kt(e)}catch(e){console.warn("Failed to decode thumbhash to data URL",e)}}function Mt(t){if(t)return{url:t.url,thumbhash:t.thumbhash??void 0}}const Jt=t=>{const[e,o]=L.useState(!1),[r,l]=L.useState(!1),n=L.useRef(null),{className:u,thumbhash:f,style:h,alt:m,onError:d,onLoad:s,...i}=t,I=qt(f),H=p=>{o(!0),d==null||d(p)},A=L.useCallback(p=>{r||(l(!0),p&&s&&s(p))},[r,s]);return L.useEffect(()=>{n.current&&n.current.complete&&!r&&!e&&A(null)},[r,e,A]),!t.src||e?q.jsx(Et,{className:u}):q.jsx("img",{ref:n,"data-testid":"image",className:u,alt:m||"",style:{...h,backgroundImage:!r&&I?`url(${I})`:void 0,backgroundSize:"cover"},onError:H,onLoad:A,...i})};export{Jt as I,Et as N,Gt as g,Mt as t};
//# sourceMappingURL=Image-Cc02ywVl.js.map
