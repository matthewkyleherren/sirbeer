import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{r as h}from"./chunk-DQRVZFIR-mrH3D8v7.js";import{R as P,a as z,A as H}from"./AutoPaginationFooter-BCxywMpp.js";import{T as c}from"./Text-BrMatKQv.js";import{I as R,E as T}from"./types-aSuMwFxz.js";import{C as A}from"./Toast-Bb3RYazJ.js";import{I as F}from"./Icon-Vc_yr2r6.js";import{t as M,c as f}from"./cn-yu2yf51J.js";import{r as D,s as O,u as U,v as V,w as W,m as $,e as G}from"./toFeedSection-HH8g53oo.js";import{u as C,b as L}from"./useMonorail-J6WwGwSW.js";import{T as w}from"./TrackingPixel-D8humLZO.js";import{L as X}from"./Link-CnJfyO2i.js";import{T as Y,a as q}from"./FeedCard-TpcvKHB_.js";import{g as S,S as k}from"./useShoppingEvents-fSQONDgU.js";import{S as J}from"./Section-Bikh_H8y.js";import{F as K}from"./getAdMetadata-crX2O_21.js";const E=({videoUrl:t,imageUrl:s,backgroundColor:n,maxWidth:l,contentClassName:a})=>{const m=h.useRef(null),[b,i]=h.useState(!1);return h.useEffect(()=>{const r=m.current,v=()=>{i(!0)};r==null||r.addEventListener("play",v);const g=(r==null?void 0:r.readyState)||0;return!(r!=null&&r.paused)&&g>2&&i(!0),()=>{r==null||r.removeEventListener("play",v)}},[]),e.jsxs("div",{className:"absolute inset-0",style:{backgroundColor:n||M.colors["bg-brand"]},children:[s&&e.jsx("div",{"data-testid":"shopping-event-banner-img-container",className:f("absolute inset-0",l&&"max-w-[3200px]",a),children:e.jsx("img",{"data-testid":"shopping-event-banner-img",src:s,alt:"",className:"size-full object-cover"})}),t&&e.jsx("div",{className:f("absolute left-0 top-0 mx-auto h-full w-full",b?"animate-fadeInSlow":"opacity-0",l&&"max-w-[3200px]",a),children:e.jsx("video",{"data-testid":"shopping-event-banner-video",ref:m,className:"size-full object-cover",src:t,autoPlay:!0,muted:!0,loop:!0,playsInline:!0})})]})},Q=({giveaway:t})=>{const{reportEvent:s}=C(),n=L();return t!=null&&t.visible?e.jsx(w,{onImpression:()=>{const l={entityType:T.ShoppingEventHeaderClaimButton,entityId:t.handle,yPos:0,xPos:0};s({schemaId:"shop_app_entity_recommendation_impressions/6.11",payload:l}),n.entityImpression(l)},children:e.jsxs(X,{to:`/c/${t.handle}`,className:f("mx-space-16 -mt-space-4 flex h-[58px] flex-row items-center gap-space-12 rounded-radius-16 border-[0.5px] border-[#fff3f340] px-space-12 lg:hidden"),style:{backgroundColor:"#ffffff4d"},"data-testid":"shopping-event-giveaway-toast",onClick:()=>{s({schemaId:"shop_app_entity_interaction/4.4",payload:{entityType:T.ShoppingEventHeaderClaimButton,entityId:"Shopping Events banner text",interactionType:R.ShoppingEventCashClaimToastTapped,interactionValue:t.handle}})},children:[e.jsx("div",{className:"size-[42px] rounded-radius-6 ",children:e.jsx("img",{src:t.image_url,alt:""})}),e.jsxs("div",{className:"flex flex-col justify-center",children:[e.jsx(c,{variant:"bodyTitleSmall",className:"text-bg-fill",children:t.title}),e.jsx(c,{variant:"caption",className:"text-bg-fill opacity-90",children:t.subtitle})]}),e.jsx("div",{className:"ml-auto",children:e.jsx(F,{name:"bold-right-chevron",className:" text-text-inverse opacity-80",size:"xl"})})]})}):null},_=({text:t,link:s,showChevron:n,onClick:l})=>e.jsxs("div",{className:"flex items-center gap-space-4","data-testid":"breadcrumb",children:[e.jsxs(A,{to:s,className:"hover:underline",testId:`link-${t}`,onClick:l,children:[e.jsx(c,{variant:"bodySmall",className:f("hidden md:block",n&&"text-text-tertiary"),children:t}),e.jsx(c,{variant:"caption",className:f("md:hidden",n&&"text-text-tertiary"),children:t})]}),n?e.jsx(F,{name:"bold-right-chevron",size:"m",className:"text-text-tertiary"}):null]},s),Z=({breadcrumb:t,showChevron:s})=>{const{reportEvent:n}=C(),l=h.useCallback(()=>{const a=t.label;n({schemaId:"shop_app_entity_interaction/4.4",payload:{entityType:T.CategoryBreadcrumb,entityId:a,interactionType:R.CategoryBreadcrumbPressed,interactionValue:t.label}})},[t,n]);return D(t)?e.jsx(_,{text:t.text,showChevron:s},t.text):O(t)?e.jsx(_,{text:t.label,link:t.url,showChevron:s,onClick:l},t.label):null},ee=({header:{title:t,breadcrumbs:s}})=>{const n=s.length>1;return e.jsxs("div",{"data-testid":"category-feed-header",className:"flex flex-col items-center gap-space-16 px-space-16 py-space-24",children:[e.jsx(c,{variant:"heroNormal",as:"h1",className:"hidden text-center md:block",children:t}),e.jsx(c,{variant:"headerNormal",as:"h1",className:"text-center md:hidden",children:t}),n?e.jsx("div",{className:"flex flex-wrap justify-center gap-space-4",children:s.map((l,a)=>{const m=a===s.length-1;return e.jsx(Z,{breadcrumb:l,showChevron:!m},a)})}):null]})};function te({header:t}){return e.jsx("div",{"data-testid":"text-feed-header",className:"flex flex-col items-center pb-space-36 pt-space-24",children:e.jsx(c,{variant:"headerNormal",as:"h2",className:"hidden text-center md:block",children:t.title})})}const se=({shoppingEvent:t,giveaway:s,centerContent:n})=>e.jsxs("div",{"data-testid":"shopping-event-header-content",className:f("absolute z-20 flex size-full flex-1 flex-col items-center justify-end gap-space-8 py-space-16 lg:justify-center",n?"justify-center":"justify-end lg:justify-center"),children:[e.jsx(c,{"data-testid":"shopping-event-header-content-title",variant:"headerNormal",as:"p",className:"-mb-space-2 text-text-inverse lg:hidden",style:{fontSize:36,letterSpacing:-1},children:t.texts.expandedBannerTitle||""}),e.jsx(c,{"data-testid":"shopping-event-header-content-title",variant:"headerNormal",as:"p",className:"-mb-space-2 hidden text-text-inverse lg:block",style:{fontSize:36,letterSpacing:-1.15},children:t.texts.expandedBannerTitle||""}),e.jsx(c,{variant:"bodyTitleSmall",className:"w-1/2 text-center text-text-inverse md:w-full",children:t.texts.expandedBannerSubtitle}),e.jsx("div",{className:"mt-space-8",children:e.jsx(Y,{endDate:t.endDate,textOverride:t.texts.countdownText})}),(s==null?void 0:s.visible)&&e.jsx("div",{className:"mt-space-8 w-full max-w-screen-sm",children:e.jsx(Q,{giveaway:s})})]}),ne=30,ae=.05,re=({shoppingEvent:t,giveaway:s,asFeedHeader:n,centerContent:l})=>{var r,v,g,y;const a=h.useRef(null),{reportEvent:m}=C(),b=L();h.useEffect(()=>{const o=()=>{const x=window.scrollY,d=Math.min(x*ae,ne);a.current&&!n&&(a.current.style.backdropFilter=`blur(${d}px)`,a.current.style.WebkitBackdropFilter=`blur(${d}px)`,a.current.setAttribute("backdropFilter",`blur(${d}px)`))};return window.addEventListener("scroll",o,{passive:!0}),()=>{window.removeEventListener("scroll",o)}},[n]);const i=h.useMemo(()=>{const o=S(k.TopBannerBackgroundImageWebDesktop,t.media),x=S(k.TopBannerBackgroundVideoWebDesktop,t.media),d=S(k.TopBannerBackgroundImageWebMobile,t.media),j=S(k.TopBannerBackgroundVideoWebMobile,t.media),p=(d==null?void 0:d.backgroundColor)||(o==null?void 0:o.backgroundColor)||(j==null?void 0:j.backgroundColor)||(x==null?void 0:x.backgroundColor)||"transparent";return{videoDesktop:x,imageDesktop:o,videoMobile:j,imageMobile:d,backgroundColor:p}},[t.media]);return e.jsxs(w,{onImpression:()=>{const o={entityType:T.ShoppingEventHeader,entityId:t.handle,yPos:0,xPos:0,sectionId:"shopping_event_header"};m({schemaId:"shop_app_entity_recommendation_impressions/6.11",payload:o}),b.entityImpression(o)},className:"relative flex size-full flex-1 flex-col",children:[e.jsx("div",{ref:a,"data-testid":"shopping-events-mobile-header-blur-overlay",className:"pointer-events-none absolute inset-0 z-40 bg-transparent lg:hidden"}),e.jsx(se,{shoppingEvent:t,giveaway:s,centerContent:l}),e.jsx("div",{"data-testid":"shopping-events-mobile-header",className:f(n?"absolute bottom-0 left-0 right-0 top-0 z-10 overflow-hidden lg:hidden":"absolute bottom-[-200px] left-1/2 top-0 z-10 w-[973px] -translate-x-1/2 overflow-hidden lg:hidden"),children:e.jsx(E,{videoUrl:(r=i.videoMobile)==null?void 0:r.url,imageUrl:(v=i.imageMobile)==null?void 0:v.url,backgroundColor:i.backgroundColor,contentClassName:n?"flex-1":"h-[455px] w-[973px]"})}),e.jsx("div",{"data-testid":"shopping-events-desktop-header",className:"inset-x-0 top-0 z-10 hidden lg:block",children:e.jsx(E,{videoUrl:(g=i.videoDesktop)==null?void 0:g.url,imageUrl:(y=i.imageDesktop)==null?void 0:y.url,backgroundColor:i.backgroundColor,contentClassName:"h-[238px] w-full lg:h-[230px]"})})]})};function le({header:t}){return e.jsx("div",{"data-testid":"shopping-event-feed-header",className:"h-[238px] w-full overflow-hidden lg:relative lg:h-[230px]",children:e.jsx(re,{shoppingEvent:t.shoppingEvent,asFeedHeader:!0,centerContent:!0})})}const oe=({header:t})=>U(t)?e.jsx(ee,{header:t}):V(t)?e.jsx(te,{header:t}):W(t)?e.jsx(le,{header:t}):null,ie=[...Array(8)];function Te({loading:t,feedId:s,sections:n,loadingComponent:l,header:a,hasMoreSections:m,paginationLoadingComponent:b,isFetchingMore:i,showViewMoreButton:r=!1,fetchMore:v,sectionClassName:g,selectedItemIndex:y,onHoverIndex:o,onMouseLeave:x,theme:d}){const{sectionStartIndices:j}=h.useMemo(()=>{const p=[];let u=0;return n.forEach(N=>{var I,B;p.push(u),$(N)?u+=((B=(I=N.items)==null?void 0:I.nodes)==null?void 0:B.length)||0:G(N)&&(u+=N.item?1:0)}),{sectionStartIndices:p}},[n]);return e.jsx(q,{feedId:s,selectedItemIndex:y,onHoverIndex:o,onMouseLeave:x,theme:d,children:e.jsx("div",{className:"w-full [overflow-anchor:none]",children:t?l??ie.map((p,u)=>e.jsx("div",{"data-testid":"rail-placeholder",className:"mx-auto flex w-full max-w-pageWidth flex-col px-space-0 md:px-space-16",children:e.jsx(P,{type:z.ProductRail,noGutter:!1})},u)):e.jsxs("div",{"data-testid":"feed",className:f(a&&"flex flex-col items-center",!a&&n.length>0&&"pt-space-12"),children:[a?e.jsx(oe,{header:a}):null,e.jsxs("div",{className:g,children:[n.map((p,u)=>e.jsx("div",{"data-testid":"feed-section",children:e.jsx(K,{section:p,sectionIndex:u,sectionGlobalStartIndex:j[u]||0,children:e.jsx(J,{section:p})})},p.id)),m&&e.jsx(H,{loadingComponent:b,isFetchingMore:i,fetchMore:v,showViewMoreButton:r})]})]})})})}export{Te as F,E as S,Q as a,re as b};
//# sourceMappingURL=Feed-al0BGZ_b.js.map
