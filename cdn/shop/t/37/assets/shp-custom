var shpCustom={cartItemsCountPanel:".shpCartCount",cartItemsValuePanel:".shpCartValue",shpProduct:null,shpCart:null,reloadEnabled:!1,twoLevelZoom:!1,baseURL:"",cookieInfoPeriod:0,newsletterDismiss:0,newsletterSubmit:0,init:function(){if(shpCustom.baseURL=$('meta[name="shpBaseDir"]').attr("content"),shpCustom.cookieInfoPeriod=$('meta[name="shpCookieInfoPeriod"]').attr("content"),shpCustom.newsletterDismiss=$('meta[name="shpNewsletterDismiss"]').attr("content"),shpCustom.newsletterSubmit=$('meta[name="shpNewsletterSubmit"]').attr("content"),this.productImages(),this.productMobileImages(),$(".shpAdd2CartButton").on("click",function(event){event.preventDefault(),shpCustom.cartItemAdd(this)}),$(".shpAddRecommended").on("click",function(event){event.preventDefault(),shpCustom.cartRecommendedAdd(this)}),$(".shpAdd2CartButton").removeClass("d-none"),shpCustom.initCartEvents(),sessionStorage.getItem("shpShowCart")&&setTimeout(shpCustom.showCart(),1e3),$("#shpLoadItemsList").on("click",function(event){event.preventDefault(),shpCustom.loadItemsList($(this).attr("href"))}),this.hrefToModal(),$("button[data-target]").on("click",function(){location.href=$(this).data("target")}),$("#shpCustomShowInfo").on("hidden.bs.modal",function(){$(this).find(".modal-title").text(""),$(this).find(".modal-body").html("")}),$("[data-scroll2element]").on("click",function(event){event.preventDefault(),shpCustom.scrollToElement($(this).data("scroll2element"))}),$("[data-clipboard-share]").on("click",function(event){event.preventDefault();let copyText=location.href;copyText&&(navigator.clipboard.writeText(copyText),shpCustom.showInfo($(this).data("clipboard-share"),copyText))}),$("[data-checkbox_group]").on("change",function(event){event.preventDefault(),shpCustom.chceckboxGroup($(this))}),shpCustom.getCookie("newsletter_box")||($("#shpNewsletterModalPanel").on("hidden.bs.modal",function(event){shpCustom.newsletterDismiss>0?shpCustom.setCookie("newsletter_box",1,shpCustom.newsletterDismiss):shpCustom.setCookie("newsletter_box",1)}),setTimeout(function(){$("#shpNewsletterModalPanel").modal("show")},2e3)),$(".shpCustomNewsletterFormDiv form").on("submit",function(){shpCustom.newsletterSubmit>0?shpCustom.setCookie("newsletter_box",1,shpCustom.newsletterSubmit):shpCustom.setCookie("newsletter_box",1)}),shpCustom.getCookie("cookies_box")||($("#shpCookiesModalPanel button.accept").on("click",function(){$("#shpCookiesModalPanel").addClass("d-none"),shpCustom.cookieInfoPeriod>0?shpCustom.setCookie("cookies_box",1,shpCustom.cookieInfoPeriod):shpCustom.setCookie("cookies_box",1)}),$("#shpCookiesModalPanel").removeClass("d-none")),$(".shpLoginFormToggle").on("click",function(event){event.preventDefault(),$(".shpLoginForm").toggle()}),$("body.addresses-page").length>0&&($("[data-target_item_form_id]").on("click",function(event){event.preventDefault(),$("[data-item_form_id]").hide();let form_id=$(this).data("target_item_form_id");$("[data-item_form_id="+form_id+"]").show()}),$("#shpAddressRemoveConfirmation").on("show.bs.modal",function(event){var button=$(event.relatedTarget);$(this).find("form").attr("action",button.data("target"))}),$("#shpAddressRemoveConfirmation").on("hidden.bs.modal",function(event){$(this).find("form").attr("action","#")}),$('select[name="address[country]"]').each(function(){shpCustom.setSelectValue($(this))})),$("body.collection-page").length>0&&($("#filters button.apply").on("click",function(event){event.preventDefault(),shpCustom.reloadEnabled=!0,shpCustom.applyFilters()}),$("#filters button.reset").on("click",function(event){event.preventDefault(),shpCustom.reloadEnabled=!0,shpCustom.applyFilters(!0)}),$("#tag-filters button.apply").on("click",function(event){event.preventDefault(),shpCustom.reloadEnabled=!0,shpCustom.applyTagFilters()}),$("#tag-filters button.reset").on("click",function(event){event.preventDefault(),shpCustom.reloadEnabled=!0,shpCustom.applyTagFilters(!0)}),$("#tag-filters").data("start_mode")=="background"&&$("#tag-filters input[type=checkbox], input[type=radio]").on("click",function(event){shpCustom.applyTagFilters()}),shpCustom.initApplyFilters()),$("body.search-page").length>0){let query=shpCustom.getUrlParameter("q");query&&jQuery.each(query.split(/[\+\,\;]/),function(index,element){$("#tag-filters").find('input[type=checkbox][data-name="'+element.trim()+'"]').prop("checked",!0)}),$("#filters button.apply").on("click",function(event){event.preventDefault(),shpCustom.reloadEnabled=!0,shpCustom.applyFilters()}),$("#filters button.reset").on("click",function(event){event.preventDefault(),shpCustom.reloadEnabled=!0,shpCustom.applyFilters(!0)}),$("#tag-filters button.apply").on("click",function(event){event.preventDefault(),shpCustom.reloadEnabled=!0,shpCustom.applyTagSearchFilters()}),$("#tag-filters button.reset").on("click",function(event){event.preventDefault(),shpCustom.reloadEnabled=!0,shpCustom.applyTagSearchFilters(!0)}),shpCustom.initApplyFilters()}if($("body.product-page").length>0){shpCustom.reloadEnabled=!0;let product_handle=$("#product-object").data("handle");jQuery.getJSON("/products/"+product_handle+".js",function(product){shpCustom.shpProduct=product,shpCustom.add2Visited(product),shpCustom.shpProduct.selected_variant_id=$("#product-object").data("variant"),jQuery.each(shpCustom.shpProduct.variants,function(index,element){element.id==shpCustom.shpProduct.selected_variant_id&&(shpCustom.shpProduct.selected_variant_index=index)}),$("body").trigger("updateProductInfo")}),$("input[name=productgroup]").on("change",function(){let target=$(this).val();target&&target!="#"&&(window.location.href=shpCustom.baseURL+$(this).val())}),shpCustom.initVariantSelectors()}$(window).on("resize",function(){let w=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;$("video[data-mobile]").each(function(){$(this).children("source").data("mobile")!=null&&w<=768?$(this).children("source").data("mobile")!=$(this).children("source").attr("src")&&($(this).children("source").attr("src",$(this).children("source").data("mobile")),$(this)[0].load()):$(this).children("source").data("desktop")!=null&&$(this).children("source").data("desktop")!=$(this).children("source").attr("src")&&($(this).children("source").attr("src",$(this).children("source").data("desktop")),$(this)[0].load())})}),$(window).trigger("resize"),$("[data-variant_simple_selector]").on("click",function(event){shpCustom.varaintSimpleSwitch(this)}),$("[data-ui_group]").on("change",function(event){event.preventDefault(),shpCustom.uiGroupRun(this)}),window.shpCustom=shpCustom},show:function(element){$(element).get(0).style.removeProperty("display")},hide:function(element){$(element).hide()},setCookie:function(cname,cvalue){var expires="",path="path=/";if(arguments[2]){var d=new Date;d.setTime(d.getTime()+arguments[2]*24*60*60*1e3),expires="expires="+d.toGMTString()+"; "}document.cookie="SHP_"+cname+"="+cvalue+"; "+expires+path},getCookie:function(cname){for(var name="SHP_"+cname+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){var c=ca[i].trim();if(c.indexOf(name)==0)return c.substring(name.length,c.length)}return""},hrefToModal:function(){$(".modal").each(function(){let id=$(this).attr("id");$("a[href='#"+id+"']").each(function(){$(this).attr("href","#"),$(this).attr("data-bs-toggle","modal").data("bs-toggle","modal"),$(this).attr("data-bs-target","#"+id).data("bs-target","#"+id)})})},loadItemsList:function(url2load){$("body").addClass("shpItemsLoading");let successCallback=arguments[1]?arguments[1]:"",clearContainer=arguments[2]?arguments[2]:"";$.ajax({url:url2load,type:"GET"}).done(function(data){clearContainer?$("#shpItemsList2Load-container").html($(data).find("#shpItemsList2Load-container").html()):$("#shpItemsList2Load-container").append($(data).find("#shpItemsList2Load-container").html()),$("#shpItemsList2Load-count").html($(data).find("#shpItemsList2Load-count").html()),$("#shpLoadItemsList").on("click",function(event){event.preventDefault(),shpCustom.loadItemsList($(this).attr("href"),successCallback)}),typeof successCallback!="function"&&(successCallback=!1),successCallback&&successCallback(data),$(".shpAdd2CartButton").each(function(){$(this).off("click")}),$(".shpAdd2CartButton").on("click",function(event){event.preventDefault(),shpCustom.cartItemAdd(this)}),$(".shpAdd2CartButton").removeClass("d-none"),$("body").removeClass("shpItemsLoading"),$("body").trigger("loadItemsList")})},getUrlParameter:function(sParam){let sPageURL=window.location.search.substring(1),sURLVariables=sPageURL.split("&"),sParameterName,i;for(i=0;i<sURLVariables.length;i++)if(sParameterName=sURLVariables[i].split("="),sParameterName[0]===sParam)return typeof sParameterName[1]===void 0?!0:decodeURIComponent(sParameterName[1]);return!1},setSelectValue:function(selectElement){let selectValue=$(selectElement).data("default");selectValue&&$(selectElement).find("option").each(function(){if($(this).text()==selectValue)return $(this).prop("selected",!0),!1})},showInfo:function(infoTitle,infoText){if($("#shpCustomShowInfo").length>0){let infoModal=$("#shpCustomShowInfo");$(infoModal).find(".modal-title").text(infoTitle),$(infoModal).find(".modal-body").html(infoText),$(infoModal).modal("show")}else alert(infoTitle+`:\r
`+infoText)},scrollToElement:function(elSelector){if($(elSelector).length>0){let position=$(elSelector).position(),headerOffset=$("header").length>0?$("header").height():0;position=parseInt(position.top)-headerOffset-5,document.body.scrollTop=position,document.documentElement.scrollTop=position}},uiGroupRun:function(element){if($('[data-ui_group="'+$(element).data("ui_group")+'"]').length>1){let mainElement=$('[data-ui="'+$(element).data("ui_group")+'"]'),mainValue=$(element).prop("checked")?$(element).val():"";$(mainElement).length>0&&($(mainElement).val(mainValue),$('[data-ui_group="'+$(element).data("ui_group")+'"]').each(function(){$(this).prop("checked",$(this).val()==mainValue)}),$(mainElement).change())}},gotoURL:function(element){location.href=encodeURI($(element).data("url"))},initApplyFilters:function(){$("#filters button.apply").on("click",function(event){event.preventDefault(),shpCustom.reloadEnabled=!0,shpCustom.applyFilters()}),$("#filters button.reset").on("click",function(event){event.preventDefault(),shpCustom.reloadEnabled=!0,shpCustom.applyFilters(!0)}),$("#filters").data("start_mode")=="background"&&$("#filters input[type=checkbox], input[type=radio]").on("change",function(event){event.preventDefault(),shpCustom.applyFilters()})},applyFilters:function(){let filtersPanel=$("#filters"),targetUrl="";if(filtersPanel.data("collection_url")){let collectionURL=shpCustom.baseURL+filtersPanel.data("collection_url")+"/",filtersList=[],paramsURL=filtersPanel.data("url_params");if(paramsURL&&filtersList.push(paramsURL),arguments[0]!==!0?filtersPanel.find("input[type=checkbox], input[type=radio]").each(function(index){$(this).attr("name")!="sort_by"&&$(this).prop("checked")&&$(this).prop("disabled")==!1&&filtersList.push($(this).attr("name")+"="+encodeURI($(this).val()))}):filtersPanel.find("input[type=checkbox], input[type=radio]").each(function(index){$(this).prop("checked",!1)}),filtersPanel.data("collection_sortby"))filtersList.push("sort_by="+filtersPanel.data("collection_sortby"));else if(arguments[0]!==!0){let sort_order=filtersPanel.find("input[name=sort_by]:checked").val();sort_order&&filtersList.push("sort_by="+sort_order)}targetUrl=collectionURL,filtersList.length>0&&(targetUrl=targetUrl+"?"+filtersList.join("&")),filtersPanel.data("run_mode")=="reload"&&shpCustom.reloadEnabled?window.location.href=targetUrl:filtersPanel.data("run_mode")=="ajax"&&(history.pushState("page","Collection page",targetUrl),$.ajax({url:targetUrl+(targetUrl==collectionURL?"?":"&")+"sections=collection-filters",type:"GET"}).done(function(data){$(data["collection-filters"]).find("[data-filter_item2load]").each(function(){$(this).data("filter_item2load")&&($("#filters").find('[data-filter_item2load="'+$(this).data("filter_item2load")+'"]').html($(this).html()),$("#filters").find('[data-filter_item2load="'+$(this).data("filter_item2load")+'"]').attr("class",$(this).attr("class")))}),shpCustom.initApplyFilters()}),shpCustom.loadItemsList(targetUrl,!1,!0))}return targetUrl},applyTagFilters:function(){let filtersPanel=$("#tag-filters"),targetUrl="";if(filtersPanel.data("collection_url")){let collectionURL=shpCustom.baseURL+filtersPanel.data("collection_url")+"/",filtersList=[],sort_url="";if(arguments[0]!==!0){let externalFilters=!1,filterDataset=filtersPanel.data();if(filterDataset!=null)for(const property in filterDataset)property.substring(0,17)=="collection_filter"&&(externalFilters=!0,filterDataset[property]!=""&&filtersList.push(filterDataset[property]));externalFilters||filtersPanel.find("input[type=checkbox], input[type=radio]").each(function(index){$(this).attr("name")!="sort_by"&&$(this).prop("checked")&&$(this).prop("disabled")==!1&&filtersList.push($(this).val())})}else filtersPanel.find("input[type=checkbox], input[type=radio]").each(function(index){$(this).prop("checked",!1)});if(filtersPanel.data("collection_sortby"))sort_url="?sort_by="+filtersPanel.data("collection_sortby");else if(arguments[0]!==!0){let sort_order=filtersPanel.find("input[name=sort_by]:checked").val();sort_order&&(sort_url="?sort_by="+sort_order)}targetUrl=collectionURL+filtersList.join("+")+sort_url,filtersPanel.data("run_mode")=="reload"&&shpCustom.reloadEnabled?window.location.href=targetUrl:filtersPanel.data("run_mode")=="ajax"&&(history.pushState("page","Collection page",targetUrl),shpCustom.loadItemsList(targetUrl,!1,!0))}return targetUrl},applyTagSearchFilters:function(){let filtersPanel=$("#tag-filters"),targetUrl="";if(filtersPanel.data("collection_url")){let searchURL=shpCustom.baseURL+filtersPanel.data("collection_url"),paramsList=[],sort_url="";if(filtersPanel.data("collection_sortby"))sort_url="sort_by="+filtersPanel.data("collection_sortby").trim();else if(arguments[0]!==!0){let sort_order=filtersPanel.find("input[name=sort_by]:checked").val();sort_order&&(sort_url="sort_by="+sort_order.trim())}sort_url&&paramsList.push(sort_url),filtersPanel.data("search_type")&&paramsList.push("type="+filtersPanel.data("search_type").trim());let filtersList=[];if(filtersPanel.data("search_q")&&filtersList.push(filtersPanel.data("search_q").trim()),arguments[0]!==!0){let externalFilters=!1,filterDataset=filtersPanel.data();if(filterDataset!=null)for(const property in filterDataset)property.substring(0,17)=="collection_filter"&&(externalFilters=!0,filterDataset[property]!=""&&filtersList.push(filterDataset[property]));externalFilters||filtersPanel.find("input[type=checkbox], input[type=radio]").each(function(index){$(this).attr("name")!="sort_by"&&$(this).prop("checked")&&$(this).prop("disabled")==!1&&filtersList.push($(this).val())})}else filtersPanel.find("input[type=checkbox], input[type=radio]").each(function(index){$(this).prop("checked",!1)});paramsList.push("q="+filtersList.join("+")),targetUrl=searchURL+"?"+paramsList.join("&"),filtersPanel.data("run_mode")=="reload"&&shpCustom.reloadEnabled?window.location.href=targetUrl:filtersPanel.data("run_mode")=="ajax"&&(history.pushState("page","Search result",targetUrl),shpCustom.loadItemsList(targetUrl,!1,!0))}return targetUrl},productImages:function(){$(".js-product-desktop-thumbnails").not(".slick-initialized").slick({dots:!1,infinite:!1,speed:300,slidesToShow:7,slidesToScroll:1,arrows:!0,adaptiveHeight:!0,responsive:[{breakpoint:1200,settings:{slidesToShow:6}},{breakpoint:992,settings:{slidesToShow:4}}]}),$(".js-product-thumbnail").on("click",function(){var id=$(this).attr("data-id");return $(".js-product-thumbnail").removeClass("active"),$(this).addClass("active"),$(".js-product-main-image").removeClass("active"),$(".js-product-main-image[data-id='"+id+"']").addClass("active"),!1})},productMobileImages:function(){$(".js-product-mobile-gallery").not(".slick-initialized").slick({dots:!0,infinite:!0,speed:300,slidesToShow:1,arrows:!0})},fixedDiscountAndAddToBag:function(){const $discountAndAddToBag=$(".js-discount-and-add-to-bag"),$navTabs=$(".js-nav-tabs");let lastScrollTop=$(window).scrollTop();const discountHeight=$discountAndAddToBag.outerHeight();$(window).on("scroll",function(){if(window.innerWidth<=767){const navTabsRect=$navTabs[0].getBoundingClientRect(),currentScrollTop=$(window).scrollTop();currentScrollTop>lastScrollTop?navTabsRect.top<=window.innerHeight&&($discountAndAddToBag.hasClass("fixed")||$discountAndAddToBag.addClass("fixed")):navTabsRect.top>window.innerHeight-discountHeight&&$discountAndAddToBag.hasClass("fixed")&&$discountAndAddToBag.removeClass("fixed"),lastScrollTop=currentScrollTop}else $discountAndAddToBag.removeClass("fixed")})},initVariantSelectors:function(){this.fixedDiscountAndAddToBag(),$("#product-object input[name=selling_plan]").val($("#product-object .single-offer.active").data("selling-plan-id")),$("input.variantSelector").on("click",function(e){e.preventDefault();let cartForm=$(this).parents("form"),newVariantID=$(this).val(),currentID=$(this).attr("id");$(cartForm).find("input.variantSelector").each(function(){$(this).val()==newVariantID&&$(this).attr("id")!=currentID&&$(this).prop("checked",!0)}),jQuery.each(shpCustom.shpProduct.variants,function(index,element){element.id==newVariantID&&shpCustom.updateVariantInfo(element)})}),$("select.variantSelector").on("change",function(){let cartForm=$(this).parents("form"),newVariantID=$(this).find("option:selected").val(),currentID=$(this).attr("id");jQuery.each(shpCustom.shpProduct.variants,function(index,element){element.id==newVariantID&&shpCustom.updateVariantInfo(element)})}),this.updateGiftsAndDiscounts()},updateGiftsAndDiscounts:function(){var subscribeModal=$(".js-subscribe-modal");subscribeModal&&!subscribeModal.hasClass("d-none")&&($(".js-selling-plan-promo").addClass("d-none"),$(".js-compare-price-promo").removeClass("d-none"),$("#product-object input[name=selling_plan]").val(""),$("#product-object input[name=gift_id]").val(""),$(".shpAdd2CartButton [data-default-price]").each(function(){$(this).html($(this).data("default-price")),$(this).attr("data-current_price_value",$(this).data("default-price_value")).data("current_price_value",$(this).data("default-price_value"))}));{const variantPrice=$(".shpAdd2CartButton [data-compare-price_value]").data("compare-price_value"),variantCurrentNotSubscribePrice=$(".shpAdd2CartButton [data-compare-price_value]").data("default-price_value"),variantCurrentSubscribePrice=$("#subscribe .single-offer.active .plan-price").data("value"),shippingPrice=$(".js-subscribe-gift[data-shipping-price]").data("shipping-price"),firstGiftPrice=$(".js-subscribe-gift[data-first-free-gift-price]").data("first-free-gift-price"),secondGiftPrice=$(".js-subscribe-gift[data-second-free-gift-price]").data("second-free-gift-price"),firstNotSubscribeSummaryPrice=(Number(variantPrice)+Number(shippingPrice)).toFixed(2),secondNotSubscribeSummaryPrice=(Number(variantPrice)+Number(shippingPrice)).toFixed(2),firstSubscribeSummaryPrice=(Number(variantPrice)+Number(shippingPrice)+Number(firstGiftPrice)).toFixed(2),secondSubscribeSummaryPrice=(Number(variantPrice)+Number(shippingPrice)+Number(firstGiftPrice)+Number(secondGiftPrice)).toFixed(2),firstVariantNotSubscribeSaving=(Number(variantPrice)-Number(variantCurrentNotSubscribePrice)).toFixed(2),secondVariantNotSubscribeSaving=(Number(firstNotSubscribeSummaryPrice)-Number(variantCurrentNotSubscribePrice)).toFixed(2),thirdVariantNotSubscribeSaving=(Number(secondNotSubscribeSummaryPrice)-Number(variantCurrentNotSubscribePrice)).toFixed(2),firstVariantSubscribeSaving=(Number(variantPrice)-Number(variantCurrentSubscribePrice)).toFixed(2),secondVariantSubscribeSaving=(Number(firstSubscribeSummaryPrice)-Number(variantCurrentSubscribePrice)).toFixed(2),thirdVariantSubscribeSaving=(Number(secondSubscribeSummaryPrice)-Number(variantCurrentSubscribePrice)).toFixed(2);$(".js-discount-percentage").text($(".variant-item.current .js-selling-plan-promo[data-percentage-discount]").data("percentage-discount")||0);let moneyFormat=shpTheme.money.moneyFormat+"";$("input.variantSelector").each(function(){if($(this).prop("checked")){const checkedVariant=$(this).data("option-name");$(".js-subscribe-gift").addClass("disabled"),$(".js-free-shipping").removeClass("d-none"),checkedVariant=="12"&&(subscribeModal.hasClass("d-none")?($('.js-subscribe-gift[data-related-variant="12"]').removeClass("disabled"),$(".js-free-shipping").addClass("d-none"),$(".js-subscribe-old-price").html(moneyFormat.replace("{{amount}}",numeral(variantPrice).format("0,0.00"))),$(".js-discount-summary").html(moneyFormat.replace("{{amount}}",numeral(firstVariantSubscribeSaving).format("0,0.00")))):$(".js-discount-summary").html(moneyFormat.replace("{{amount}}",numeral(firstVariantNotSubscribeSaving).format("0,0.00")))),checkedVariant=="24"&&(subscribeModal.hasClass("d-none")?($('.js-subscribe-gift[data-related-variant="24"]').removeClass("disabled"),$('.js-subscribe-gift[data-related-variant="12"]').removeClass("disabled"),$(".js-subscribe-old-price").html(moneyFormat.replace("{{amount}}",numeral(firstSubscribeSummaryPrice).format("0,0.00"))),$(".js-discount-summary").html(moneyFormat.replace("{{amount}}",numeral(secondVariantSubscribeSaving).format("0,0.00")))):$(".js-discount-summary").html(moneyFormat.replace("{{amount}}",numeral(secondVariantNotSubscribeSaving).format("0,0.00")))),checkedVariant=="48"&&(subscribeModal.hasClass("d-none")?($(".js-subscribe-gift").removeClass("disabled"),$(".js-subscribe-old-price").html(moneyFormat.replace("{{amount}}",numeral(secondSubscribeSummaryPrice).format("0,0.00"))),$(".js-discount-summary").html(moneyFormat.replace("{{amount}}",numeral(thirdVariantSubscribeSaving).format("0,0.00")))):$(".js-discount-summary").html(moneyFormat.replace("{{amount}}",numeral(thirdVariantNotSubscribeSaving).format("0,0.00"))))}})}},varaintSimpleSwitch:function(element){let container=$(element).parents("[data-variant_simple_container]"),variant_id=$(element).data("variant_id");container.length>0&&variant_id!=null&&($(container).find("[data-variant_simple_selector]").removeClass("active"),$(element).addClass("active"),$(container).find("[data-selected_variant_id]").addClass("d-none"),$(container).find("[data-selected_variant_id="+variant_id+"]").removeClass("d-none"),jQuery.each(shpCustom.shpProduct.variants,function(index,element2){element2.id==variant_id&&(element2.available?($(container).find("[data-selected_variant_notavailable]").addClass("d-none"),$(container).find("[data-selected_variant_available]").removeClass("d-none")):($(container).find("[data-selected_variant_available]").addClass("d-none"),$(container).find("[data-selected_variant_notavailable]").removeClass("d-none")))}))},reload2Variant:function(option1,option2,option3){let goodID_123=null,goodID_12=null,firstOption1ID=null,firstOption2ID=null,firstOption3ID=null,selectedVariant=shpCustom.shpProduct.variants[shpCustom.shpProduct.selected_variant_index];jQuery.each(shpCustom.shpProduct.variants,function(index,element){!firstOption1ID&&element.options[0]==option1&&(firstOption1ID=element.id),!firstOption2ID&&element.options[1]==option2&&(firstOption2ID=element.id),!firstOption3ID&&element.options[2]==option3&&(firstOption3ID=element.id),!goodID_12&&element.options[0]==option1&&element.options[1]==option2&&(goodID_12=element.id),!goodID_123&&element.options[0]==option1&&element.options[1]==option2&&element.options[2]==option3&&(goodID_123=element.id)});let goodID=goodID_123||goodID_12;goodID||(firstOption1ID?goodID=firstOption1ID:firstOption2ID?goodID=firstOption2ID:goodID=firstOption3ID),goodID&&(window.location.href=shpCustom.baseURL+shpCustom.shpProduct.url+"?variant="+goodID)},setNewVariantByOptions:function(optionID,optionValue){let newVariant=!1,currentVariant=shpCustom.shpProduct.variants[shpCustom.shpProduct.selected_variant_index],currentFeatures={option1:null,option2:null,option3:null};currentVariant&&(currentFeatures={option1:currentVariant.option1,option2:currentVariant.option2,option3:currentVariant.option3});let newFeatures=Object.assign({},currentFeatures);newFeatures[optionID]=optionValue,jQuery.each(shpCustom.shpProduct.variants,function(index,element){element.option1==newFeatures.option1&&element.option2==newFeatures.option2&&element.option3==newFeatures.option3&&(newVariant=Object.assign({},element),newVariant.index=index)}),shpCustom.updateVariantInfo(newVariant)},updateVariantInfo:function(newVariant){const mode="load";if(newVariant!=!1){$("#product-object").attr("data-variant",newVariant.id).data("variant",newVariant.id),$("#product-object input[name=id]").val(newVariant.id);let sellingPlan="",variantName=$(`#variant-${newVariant.id}`).data("option-name"),freeGiftId=$(`.js-product-gift[data-related-variant="${variantName}"]`).data("free-gift-id");if($("#product-object input[name=gift_id]").val(freeGiftId),mode=="load"){$("#product-object input[name=selling_plan]").val()!=""&&(sellingPlan="&selling_plan="+$("#product-object input[name=selling_plan]").val());var productTemplate="";$("body").hasClass("product-merch")?productTemplate="merch-product":$("body").hasClass("product-peach")?productTemplate="peach-product":productTemplate="bundle-builder",$.ajax({url:$("#product-object").data("baseurl")+"?sections="+productTemplate+"&variant="+newVariant.id+sellingPlan,type:"GET"}).done(function(data){$("#shpProductVariant-container").html($(data[productTemplate]).find("#shpProductVariant-container").html()),$("#subscribe").html($(data[productTemplate]).find("#subscribe").html()),$("#subscribe-add-to-bag").html($(data[productTemplate]).find("#subscribe-add-to-bag").html()),($("body").hasClass("product-merch")||$("body").hasClass("product-peach"))&&$("#discount-summary").html($(data[productTemplate]).find("#discount-summary").html()),shpCustom.initVariantSelectors(),$(".shpAdd2CartButton").off("click").on("click",function(event){event.preventDefault(),shpCustom.cartItemAdd(this)}),shpCustom.shpProduct.selected_variant_index=newVariant.index,history.pushState("page",shpCustom.shpProduct.title,$("#product-object").data("baseurl")+"?variant="+newVariant.id),$("body").trigger("updateVariantInfo"),$(".js-subscribe-modal").hasClass("d-none")||($("#product-object input[name=selling_plan]").val(""),$("#product-object input[name=gift_id]").val(""),$(".shpAdd2CartButton [data-default-price]").each(function(){$(this).html($(this).data("default-price")),$(this).attr("data-current_price_value",$(this).data("default-price_value")).data("current_price_value",$(this).data("default-price_value"))}))})}else{let moneyFormat=shpTheme.money.moneyFormat+"";$("#product-object .product-standard-price").html(moneyFormat.replace("{{amount}}",numeral(newVariant.price/100).format("0,0.00"))),newVariant.compare_at_price>newVariant.price?$("#product-object .product-compare-price").html(moneyFormat.replace("{{amount}}",numeral(newVariant.compare_at_price/100).format("0,0.00"))):$("#product-object .product-compare-price").html("");let Add2Cart=$("#product-object .shpAdd2CartButton");newVariant.available?($(Add2Cart).prop("disabled",!1),$(Add2Cart).find("[data-unavailable_label]").hide(),$(Add2Cart).find("[data-add2cart_label]").show()):($(Add2Cart).prop("disabled",!0),$(Add2Cart).find("[data-add2cart_label]").hide(),$(Add2Cart).find("[data-unavailable_label]").show()),newVariant.featured_image&&$(".product-carousel").length>0&&($(".product-carousel.flickity-enabled").length>0?$(".product-carousel .carousel-cell").each(function(index){newVariant.featured_image.id==$(this).data("src_id")&&$(".product-carousel").flickity("select",index,!1,!0)}):$(".product-carousel.slick-initialized").length>0&&$(".product-carousel .slick-slide").not(".slick-cloned").each(function(){newVariant.featured_image.id==$(this).data("src_id")&&$(".product-carousel").slick("slickGoTo",$(this).data("slick-index"),!0)})),shpCustom.shpProduct.selected_variant_index=newVariant.index,history.pushState("page",shpCustom.shpProduct.title,$("#product-object").data("baseurl")+"?variant="+newVariant.id),$("body").trigger("updateVariantInfo")}}else shpCustom.showInfo(shpTheme.strings.unknownVariantTitle,shpTheme.strings.unknownVariantMessage)},add2Visited:function(product){const productData={productID:product.id,title:product.title,handle:product.handle},productList=[];let jsonResp,jsonRespArr,jsonRespArrStr;const numberOfProducts=20;productList.push(productData);const currProductPageTitle=productData.title,productDataString=JSON.stringify(productList),localData=localStorage.getItem("recentlyViewedProduct");if(localData===null)localStorage.setItem("recentlyViewedProduct",productDataString);else if(localData){const oldProductData=localStorage.getItem("recentlyViewedProduct"),countProductData=(oldProductData.match(/productID/g)||[]).length,sameProduct=oldProductData.includes(currProductPageTitle);countProductData<numberOfProducts&&sameProduct==!1?(jsonResp=JSON.parse(oldProductData),jsonRespArr=jsonResp.concat(productList),jsonRespArrStr=JSON.stringify(jsonRespArr),localStorage.setItem("recentlyViewedProduct",jsonRespArrStr)):countProductData>=numberOfProducts&&sameProduct==!1&&(jsonResp=JSON.parse(oldProductData),jsonResp.shift(),jsonRespArr=jsonResp.concat(productList),jsonRespArr=JSON.stringify(jsonRespArr),localStorage.setItem("recentlyViewedProduct",jsonRespArr))}},initCartEvents:function(){$("[data-cart-item-quantity_group] [data-type=minus]").on("click",function(event){event.preventDefault(),shpCustom.setQuantity(this,-1)}),$("[data-cart-item-quantity_group] [data-type=plus]").on("click",function(event){event.preventDefault(),shpCustom.setQuantity(this,1)}),$("[data-cart-item-quantity_group] [data-type=remove], .cart-item__size-and-remove [data-type=remove]").on("click",function(event){event.preventDefault(),shpCustom.cartItemRemove(this)}),$("[data-cart-item-quantity_group] [data-cart-item-quantity]").on("change",function(event){event.preventDefault();let productSection=$(this).parents("[data-cart-item]");shpCustom.cartItemUpdate(productSection.data("cart-item-key"),$(this).val())}),$("[data-cart-item-variant_options]").on("change",function(event){event.preventDefault();let productSection=$(this).parents("[data-cart-item]"),getSellingPlanId=$(this).find(":selected").data("selling-plan"),selectedText=$(this).find(":selected").text();shpCustom.cartVariantUpdate(productSection.data("cart-item-key"),$(this).val(),getSellingPlanId,selectedText)}),$("[data-cart-attribute]").on("change",function(event){event.preventDefault(),shpCustom.cartAttributeUpdate(this)}),$("[data-cart-note]").on("change",function(event){event.preventDefault(),shpCustom.cartUpdate($(this).val(),null)}),window.cwCart&&$(".shpAddRecommended").on("click",function(event){event.preventDefault(),shpCustom.cartRecommendedAdd(this)})},showCart:function(){$("body").trigger("shpShowCart"),sessionStorage.removeItem("shpShowCart")},getCart:function(){let silentMode=arguments[0]===!0;jQuery.getJSON("/cart.js",function(cart){shpCustom.shpCart=cart,shpCustom.updateCartInfo(),$(".shpProcessCartWait").hide(),silentMode||shpCustom.showCart()})},updateCartInfo:function(showCart){let moneyFormat=shpTheme.money.moneyFormat+"";if(window.cwCart){if(Object.hasOwn(shpCustom.shpCart,"sections")&&Object.hasOwn(shpCustom.shpCart.sections,"cw-api-cart_content")){if($(".shpCartContent").html($(shpCustom.shpCart.sections["cw-api-cart_content"]).html()),$("#cwCart .recommended-products").length>0&&($("#cwCart .recommended-products").html($(".cw-recommended-products").html()),$("body.a-b-test-collider-8 #cwCart.offcanvas .recommended-products .recommended-products__items .recommended-product").length>0)){var $carousel=$("body.a-b-test-collider-8 #cwCart.offcanvas .recommended-products .recommended-products__items");$carousel.hasClass("slick-initialized")&&$carousel.slick("unslick"),$carousel.slick({infinite:!1,slidesToShow:1,slidesToScroll:1,autoplay:!1,dots:!1,arrows:!0})}shpCustom.initCartEvents()}}else Object.hasOwn(shpCustom.shpCart,"sections")&&Object.hasOwn(shpCustom.shpCart.sections,"api-cart_content")&&($(".shpCartContent").html($(shpCustom.shpCart.sections["api-cart_content"]).html()),shpCustom.initCartEvents());$(shpCustom.cartItemsValuePanel).html(moneyFormat.replace("{{amount}}",numeral(shpCustom.shpCart.total_price/100).format("0,0.00"))),jQuery.getJSON("/cart.js",function(cart){shpCustom.shpCart.item_count=cart.item_count,$(shpCustom.cartItemsCountPanel).text(shpCustom.shpCart.item_count),shpCustom.shpCart.item_count==0?$(".shpCartContent").addClass("empty"):$(".shpCartContent").removeClass("empty")}),$("body").trigger("updateCartInfo"),showCart&&shpCustom.showCart()},setQuantity:function(element,step){let sectionContainer=$(element).parents("[data-cart-item-quantity_group]");if(!$(sectionContainer).hasClass("section-disabled")){let sectionInput=$(sectionContainer).find('input[name="quantity"]'),sectionlabel=$(sectionContainer).find("[data-cart-item-quantity_label]"),productSection=$(element).parents("[data-cart-item]"),result=$(sectionInput).val()*1+step*1;result*1<=0&&(result=1),$(sectionInput).val(result),result<=1?$(sectionContainer).find("[data-type=minus]").prop("disabled",!0):$(sectionContainer).find("[data-type=minus]").prop("disabled",!1),shpCustom.cartItemUpdate(productSection.data("cart-item-key"),result),result<10&&(result="0"+result),$(sectionlabel).text(result)}},cartItemRemove:function(element){let productSection=$(element).parents("[data-cart-item]"),line_key=productSection.data("cart-item-key");const giftId=productSection.data("cart-item-gift-id");giftId?($(".shpProcessCartWait").show(),window.cwCart?(jQuery.ajax({type:"POST",url:"/cart/change.js",data:{id:line_key,quantity:0,sections:"cw-api-cart_content"},dataType:"json",success:function(){$('[data-cart-item-key="'+line_key+'"]').remove()},error:function(error_data,error_type){shpCustom.cartUpdateError(error_data)},complete:function(){}}),setTimeout(function(){jQuery.ajax({type:"POST",url:"/cart/change.js",data:{id:giftId,quantity:0,sections:"cw-api-cart_content"},dataType:"json",success:function(success_data){shpCustom.shpCart=success_data,shpCustom.updateCartInfo()},error:function(error_data,error_type){shpCustom.cartUpdateError(error_data)},complete:function(){}})},500)):(jQuery.ajax({type:"POST",url:"/cart/change.js",data:{id:line_key,quantity:0,sections:"api-cart_content"},dataType:"json",success:function(){$('[data-cart-item-key="'+line_key+'"]').remove()},error:function(error_data,error_type){shpCustom.cartUpdateError(error_data)},complete:function(){}}),setTimeout(function(){jQuery.ajax({type:"POST",url:"/cart/change.js",data:{id:giftId,quantity:0,sections:"api-cart_content"},dataType:"json",success:function(success_data){shpCustom.shpCart=success_data,shpCustom.updateCartInfo()},error:function(error_data,error_type){shpCustom.cartUpdateError(error_data)},complete:function(){}})},500))):shpCustom.cartItemUpdate(productSection.data("cart-item-key"),0)},cartItemAdd:function(element){let variant_id,gift_id,variant_quantity,selling_plan,do_reload,properties={};if($(element).data("variant_id")!=null){if(variant_id=$(element).data("variant_id"),variant_quantity=$(element).data("quantity")!==void 0?$(element).data("quantity"):1,selling_plan=$(element).data("selling_plan"),do_reload=$(element).data("reload")!==void 0&&$(element).data("reload"),$(element).data("item_property")!=null){let property=$(element).data("item_property").split("|");properties[property[0]]=property[1]}}else{let cartForm=$(element).parents("form");variant_id=$(cartForm).find('input[name="id"]').val(),variant_quantity=$(cartForm).find('input[name="quantity"]').val()||1,selling_plan=$(cartForm).find('input[name="selling_plan"]').val(),gift_id=$(cartForm).find('input[name="gift_id"]').val(),$(cartForm).find('input[name^="properties"]').each(function(){if($(this).val()){let text=$(this).attr("name"),propertyName=text.substr(0,text.length-1).replace("properties[","");properties[propertyName]=$(this).val()}}),gift_id&&(properties.Gift=gift_id)}$(".shpProcessCartWait").show(),$(element).prop("disabled",!0),gift_id?window.cwCart?($.ajax({type:"POST",url:"/cart/add.js",data:{id:gift_id,quantity:1,sections:"cw-api-cart_content,cw-api-cart_summary"},dataType:"json",error:function(error_data){shpCustom.cartUpdateError(error_data)}}),setTimeout(function(){$.ajax({type:"POST",url:"/cart/add.js",data:{id:variant_id,quantity:variant_quantity||1,selling_plan,properties,sections:"cw-api-cart_content,cw-api-cart_summary"},dataType:"json",success:function(success_data){if(do_reload)sessionStorage.getItem("isReloading")||(sessionStorage.setItem("isReloading","true"),sessionStorage.setItem("shpShowCart",!0),window.location.reload());else{shpCustom.shpCart?shpCustom.shpCart.sections=success_data.sections:shpCustom.shpCart={sections:success_data.sections};let dataSet=$(shpCustom.shpCart.sections["cw-api-cart_summary"]).find("#cart_summary").data();for(const key in dataSet)dataSet.hasOwnProperty(key)&&(shpCustom.shpCart[key]=dataSet[key]);shpCustom.updateCartInfo(!0)}},error:function(error_data){shpCustom.cartUpdateError(error_data)},complete:function(){$(element).prop("disabled",!1),$(".shpProcessCartWait").hide()}})},1e3)):($.ajax({type:"POST",url:"/cart/add.js",data:{id:gift_id,quantity:1,sections:"api-cart_content,api-cart_summary"},dataType:"json",error:function(error_data){shpCustom.cartUpdateError(error_data)}}),setTimeout(function(){$.ajax({type:"POST",url:"/cart/add.js",data:{id:variant_id,quantity:variant_quantity||1,selling_plan,properties,sections:"api-cart_content,api-cart_summary"},dataType:"json",success:function(success_data){if(do_reload)sessionStorage.getItem("isReloading")||(sessionStorage.setItem("isReloading","true"),sessionStorage.setItem("shpShowCart",!0),window.location.reload());else{shpCustom.shpCart?shpCustom.shpCart.sections=success_data.sections:shpCustom.shpCart={sections:success_data.sections};let dataSet=$(shpCustom.shpCart.sections["api-cart_summary"]).find("#cart_summary").data();for(const key in dataSet)dataSet.hasOwnProperty(key)&&(shpCustom.shpCart[key]=dataSet[key]);shpCustom.updateCartInfo(!0)}},error:function(error_data){shpCustom.cartUpdateError(error_data)},complete:function(){$(element).prop("disabled",!1),$(".shpProcessCartWait").hide()}})},1e3)):window.cwCart?$.ajax({type:"POST",url:"/cart/add.js",data:{id:variant_id,quantity:variant_quantity||1,selling_plan,properties,sections:"cw-api-cart_content,cw-api-cart_summary"},dataType:"json",success:function(success_data){if(do_reload)sessionStorage.getItem("isReloading")||(sessionStorage.setItem("isReloading","true"),sessionStorage.setItem("shpShowCart",!0),window.location.reload());else{shpCustom.shpCart?shpCustom.shpCart.sections=success_data.sections:shpCustom.shpCart={sections:success_data.sections};let dataSet=$(shpCustom.shpCart.sections["api-cart_summary"]).find("#cart_summary").data();for(const key in dataSet)dataSet.hasOwnProperty(key)&&(shpCustom.shpCart[key]=dataSet[key]);shpCustom.updateCartInfo(!0)}},error:function(error_data){shpCustom.cartUpdateError(error_data)},complete:function(){$(element).prop("disabled",!1),$(".shpProcessCartWait").hide()}}):$.ajax({type:"POST",url:"/cart/add.js",data:{id:variant_id,quantity:variant_quantity||1,selling_plan,properties,sections:"api-cart_content,api-cart_summary"},dataType:"json",success:function(success_data){if(do_reload)sessionStorage.getItem("isReloading")||(sessionStorage.setItem("isReloading","true"),sessionStorage.setItem("shpShowCart",!0),window.location.reload());else{shpCustom.shpCart?shpCustom.shpCart.sections=success_data.sections:shpCustom.shpCart={sections:success_data.sections};let dataSet=$(shpCustom.shpCart.sections["api-cart_summary"]).find("#cart_summary").data();for(const key in dataSet)dataSet.hasOwnProperty(key)&&(shpCustom.shpCart[key]=dataSet[key]);shpCustom.updateCartInfo(!0)}},error:function(error_data){shpCustom.cartUpdateError(error_data)},complete:function(){$(element).prop("disabled",!1),$(".shpProcessCartWait").hide()}})},cartRecommendedAdd:function(element){let variant_id,variant_quantity,selling_plan,do_reload,properties={};if($(element).data("variant_id")!=null){if(variant_id=$(element).data("variant_id"),variant_quantity=$(element).data("quantity")!=null?$(element).data("quantity"):1,selling_plan=$(element).data("selling_plan"),do_reload=$(element).data("reload")!=null&&$(element).data("reload"),$(element).data("item_property")!=null){let property=$(element).data("item_property").split("|");properties[property[0]]=property[1]}}else{let cartForm=$(element).parents("form");variant_id=$(cartForm).find('input[name="id"]').val(),variant_quantity=$(cartForm).find('input[name="quantity"]').val(),selling_plan=$(cartForm).find('input[name="selling_plan"]').val(),$(cartForm).find('input[name^="properties"]').each(function(){if($(this).val()){let text=$(this).attr("name"),propertyName=text.substr(0,text.length-1).replace("properties[","");properties[propertyName]=$(this).val()}})}$(".shpProcessCartWait").show(),$(element).prop("disabled",!0),window.cwCart?jQuery.ajax({type:"POST",url:"/cart/add.js",data:{id:variant_id,quantity:variant_quantity=variant_quantity||1,selling_plan,properties,sections:"cw-api-cart_content,cw-api-cart_summary"},dataType:"json",success:function(success_data){if(do_reload)sessionStorage.setItem("shpShowCart",!0),window.location.reload();else{shpCustom.shpCart?shpCustom.shpCart.sections=success_data.sections:shpCustom.shpCart={sections:success_data.sections};let dataSet=$(shpCustom.shpCart.sections["cw-api-cart_summary"]).find("#cart_summary").data();for(const key in dataSet)dataSet.hasOwnProperty(key)&&(shpCustom.shpCart[key]=dataSet[key]);shpCustom.updateCartInfo(!0)}},error:function(error_data,error_type){shpCustom.cartUpdateError(error_data)},complete:function(){$(element).prop("disabled",!1),$(".shpProcessCartWait").hide()}}):jQuery.ajax({type:"POST",url:"/cart/add.js",data:{id:variant_id,quantity:variant_quantity=variant_quantity||1,selling_plan,properties,sections:"api-cart_content,api-cart_summary"},dataType:"json",success:function(success_data){if(do_reload)sessionStorage.setItem("shpShowCart",!0),window.location.reload();else{shpCustom.shpCart?shpCustom.shpCart.sections=success_data.sections:shpCustom.shpCart={sections:success_data.sections};let dataSet=$(shpCustom.shpCart.sections["api-cart_summary"]).find("#cart_summary").data();for(const key in dataSet)dataSet.hasOwnProperty(key)&&(shpCustom.shpCart[key]=dataSet[key]);shpCustom.updateCartInfo(!0)}},error:function(error_data,error_type){shpCustom.cartUpdateError(error_data)},complete:function(){$(element).prop("disabled",!1),$(".shpProcessCartWait").hide()}})},cartItemUpdate:function(line_key,new_quantity,new_selling_plan,new_properties){if(window.cwCart)var data2change={id:line_key,sections:"cw-api-cart_content"};else var data2change={id:line_key,sections:"api-cart_content"};new_quantity!==null&&(data2change.quantity=new_quantity),new_selling_plan!==null&&(data2change.selling_plan=new_selling_plan),new_properties!==null&&(data2change.properties=new_properties),$(".shpProcessCartWait").show(),jQuery.ajax({type:"POST",url:"/cart/change.js",data:data2change,dataType:"json",success:function(success_data){new_quantity==0?$('[data-cart-item-key="'+line_key+'"]').remove():success_data.items&&$.each(success_data.items,function(index,item){line_key==item.key&&new_quantity>item.quantity&&shpCustom.showInfo(shpTheme.strings.cartUpdateUnsuccessful,shpTheme.strings.productInventoryLevelTooLow)}),shpCustom.shpCart=success_data,shpCustom.updateCartInfo()},error:function(error_data,error_type){shpCustom.cartUpdateError(error_data)},complete:function(){}})},cartVariantUpdate:function(line_key,new_variant,selling_plan=null,selectedText=null){if($(".shpProcessCartWait").show(),window.cwCart)if(selling_plan!="undefined"&&selling_plan!=null&&selling_plan!=""&&selectedText!="undefined"&&selectedText!=null&&selectedText!=""){var free_gift_variant_id="";let cartData2={};if(selectedText=="24 Pack"){free_gift_variant_id=55265733869942;let mainProperties={};mainProperties.Gift=free_gift_variant_id,cartData2={items:[{id:new_variant,quantity:1,selling_plan,properties:mainProperties},{id:free_gift_variant_id,quantity:1}],sections:"cw-api-cart_content,cw-api-cart_summary"}}else if(selectedText=="48 Pack"){free_gift_variant_id=55265733902710;let mainProperties={};mainProperties.Gift=free_gift_variant_id,cartData2={items:[{id:new_variant,quantity:1,selling_plan,properties:mainProperties},{id:free_gift_variant_id,quantity:1}],sections:"cw-api-cart_content,cw-api-cart_summary"}}else selectedText=="12 Pack"&&(cartData2={items:[{id:new_variant,quantity:1,selling_plan}],sections:"cw-api-cart_content,cw-api-cart_summary"});$.getJSON("/cart.json",function(cart_data){var giftKey=null;$.each(cart_data.items,function(index,item){if(item.key===line_key){if(item.properties&&item.properties.Gift){let giftVariantId=item.properties.Gift;$.each(cart_data.items,function(i,giftItem){if(giftItem.variant_id==giftVariantId)return giftKey=giftItem.key,!1})}if(giftKey){let updates={};updates[line_key]=0,updates[giftKey]=0,$.ajax({type:"POST",url:"/cart/update.js",data:{updates},dataType:"json",success:function(){$.ajax({type:"POST",url:"/cart/add.js",data:cartData2,dataType:"json",success:function(success_data){shpCustom.shpCart=success_data,shpCustom.updateCartInfo()},error:function(error_data){shpCustom.cartUpdateError(error_data)}})},error:function(error_data){shpCustom.cartUpdateError(error_data)}})}else{let updates={};updates[line_key]=0,$.ajax({type:"POST",url:"/cart/update.js",data:{updates},dataType:"json",success:function(){$.ajax({type:"POST",url:"/cart/add.js",data:cartData2,dataType:"json",success:function(success_data){shpCustom.shpCart=success_data,shpCustom.updateCartInfo()},error:function(error_data){shpCustom.cartUpdateError(error_data)}})},error:function(error_data){shpCustom.cartUpdateError(error_data)}})}}})})}else{if(selling_plan!="undefined"&&selling_plan!=null&&selling_plan!="")var cartData={id:new_variant,quantity:1,selling_plan,sections:"cw-api-cart_content,cw-api-cart_summary"};else var cartData={id:new_variant,quantity:1,sections:"cw-api-cart_content,cw-api-cart_summary"};jQuery.ajax({type:"POST",url:"/cart/change.js",data:{id:line_key,quantity:0,sections:"cw-api-cart_content"},dataType:"json",success:function(){jQuery.ajax({type:"POST",url:"/cart/add.js",data:cartData,dataType:"json",success:function(success_data){shpCustom.shpCart=success_data,shpCustom.updateCartInfo()},error:function(error_data){shpCustom.cartUpdateError(error_data)}})},error:function(error_data){shpCustom.cartUpdateError(error_data)}})}else jQuery.ajax({type:"POST",url:"/cart/change.js",data:{id:line_key,quantity:0,sections:"api-cart_content"},dataType:"json",success:function(){jQuery.ajax({type:"POST",url:"/cart/add.js",data:{id:new_variant,quantity:1,sections:"api-cart_content,api-cart_summary"},dataType:"json",success:function(success_data){shpCustom.shpCart=success_data,shpCustom.updateCartInfo()},error:function(error_data){shpCustom.cartUpdateError(error_data)}})},error:function(error_data){shpCustom.cartUpdateError(error_data)}})},cartAttributeUpdate:function(element){let elementValue;if(element!=null&&!$(element).data("disable_events")){let elementName=$(element).attr("name"),elementForm=$(element).parents("form");$(element).attr("type")=="checkbox"||$(element).attr("type")=="radio"?elementValue=$('[name="'+elementName+'"]:checked').val():elementValue=$('[name="'+elementName+'"]').val();let attributes={};$(elementForm).find("[data-cart-attribute]").each(function(){let thisName=$(this).attr("name"),thisValue;$(this).attr("type")=="checkbox"||$(this).attr("type")=="radio"?thisValue=$(elementForm).find('[name="'+thisName+'"]:checked').val():thisValue=$(elementForm).find('[name="'+thisName+'"]').val(),thisValue!=null&&thisValue!=""?attributes[$(this).data("cart-attribute")]=thisValue:attributes[$(this).data("cart-attribute")]=null}),window.cwCart?jQuery.ajax({type:"POST",url:"/cart/update.js",data:{attributes,sections:"cw-api-cart_content"},dataType:"json",success:function(success_data){shpCustom.shpCart=success_data,shpCustom.updateCartInfo()},error:function(error_data,error_type){shpCustom.cartUpdateError(error_data)},complete:function(){$(".shpProcessCartWait").hide()}}):jQuery.ajax({type:"POST",url:"/cart/update.js",data:{attributes,sections:"api-cart_content"},dataType:"json",success:function(success_data){shpCustom.shpCart=success_data,shpCustom.updateCartInfo()},error:function(error_data,error_type){shpCustom.cartUpdateError(error_data)},complete:function(){$(".shpProcessCartWait").hide()}})}},cartUpdate:function(cart_note,cart_attributes){if(window.cwCart)var data2change={sections:"cw-api-cart_content"};else var data2change={sections:"api-cart_content"};cart_note!==null&&(data2change.note=cart_note),cart_note!==null&&(data2change.attributes=cart_attributes),jQuery.ajax({type:"POST",url:"/cart/update.js",data:data2change,dataType:"json",success:function(success_data){shpCustom.shpCart=success_data,shpCustom.updateCartInfo()},error:function(error_data,error_type){shpCustom.cartUpdateError(error_data)},complete:function(){$(".shpProcessCartWait").hide()}})},cartUpdateSuccess:function(success_data,sucess_info){},cartUpdateError:function(error_data){let error_info=error_data.responseJSON;shpCustom.showInfo(error_info.message,error_info.description)},calculateFS:function(){console.log("calculateFS"),$("[data-free_shipment]").each(function(){let fsObj=$(this),fsObjLevel=fsObj.find("[data-free_shipment_level]"),fsObjCountry=fsObjLevel.data("free_shipment_country");if(fsObjLevel.data("free_shipment_level")!=null&&fsObjLevel.data("free_shipment_level")>0&&$("[data-cart-subtotal]").attr("data-cart-subtotal")!=null&&$("[data-cart-subtotal]").attr("data-cart-subtotal")>=0){let moneyFormat=shpTheme.money.moneyFormat+"",cart_value=$("[data-cart-subtotal]").attr("data-cart-subtotal")*1;fsObjLevel.data("free_shipment_virtual")*1>0&&(cart_value=cart_value+fsObjLevel.data("free_shipment_virtual")*1);let left_2_free_shipment=fsObjLevel.data("free_shipment_level")-cart_value,info,percentage;left_2_free_shipment>0?(fsObj.data("free_shipment_missing")!=""&&Object.hasOwn(shpTheme.strings,fsObj.data("free_shipment_missing"))?info=shpTheme.strings[fsObj.data("free_shipment_missing")]+"":info=shpTheme.strings.free_shipment_missing+"",info=info.replace("{{value}}",moneyFormat.replace("{{amount}}",numeral(left_2_free_shipment).format("0,0.00"))),percentage=Math.round(100*(cart_value/fsObjLevel.data("free_shipment_level"))),fsObj.removeClass("free_shipping_achieved")):(fsObj.data("free_shipment_unlocked")!=""&&Object.hasOwn(shpTheme.strings,fsObj.data("free_shipment_unlocked"))?info=shpTheme.strings[fsObj.data("free_shipment_unlocked")]+"":info=shpTheme.strings.free_shipment_unlocked+"",info=info.replace("{{value}}",moneyFormat.replace("{{amount}}",numeral(fsObjLevel.data("free_shipment_level")).format("0,0.00"))),percentage=100,fsObj.addClass("free_shipping_achieved")),info=info.replace("{{country}}",fsObjCountry),fsObjLevel.html(info),fsObj.find(".progress-bar").attr("aria-valuenow",percentage),fsObj.find(".progress-bar").attr("style","width:"+percentage+"%")}else fsObj.hide()})},initSellingPlanElements:function(){let variantName=$(".variant-item.current input").data("option-name"),freeGiftId=$(`.js-product-gift[data-related-variant="${variantName}"]`).data("free-gift-id");$("#product-object input[name=gift_id]").val(freeGiftId),$("#selling-plan-select details").on("click",function(event){$(this).prop("open")&&(event.preventDefault(),$(this).prop("open",!1))}),$(document).on("click","#selling-plan-select details",function(){$(this).prop("open",!1)}),$(document).on("click",function(e){$(e.target).closest("#selling-plan-select details").length||$("#selling-plan-select details").prop("open",!1)}),$("#product-object input[name=selling_plan]").val()==""&&$(".subscribe[data-default-plan-id]").length>0&&$("#product-object input[name=selling_plan]").val($(".subscribe[data-default-plan-id]").data("default-plan-id"));let current_plan_price=$("#subscribe .single-offer.active .plan-price");$(".shpAdd2CartButton [data-default-price]").each(function(){$("#subscribe .single-offer.active .plan-price").length>0&&($(this).html(current_plan_price.html()),$(this).attr("data-current_price_value",current_plan_price.data("value")).data("current_price_value",current_plan_price.data("value"))),$("[data-free_shipment_virtual]").attr("data-free_shipment_virtual",$(".shpAdd2CartButton [data-current_price_value]").attr("data-current_price_value")).data("free_shipment_virtual",$(".shpAdd2CartButton [data-current_price_value]").attr("data-current_price_value"))}),$(".js-new-subscribe-price").html(current_plan_price.html()),$("#product-object .single-offer").on("click",function(e){$(this).addClass("active").siblings().removeClass("active"),$("#product-object input[name=selling_plan]").val($(this).data("selling-plan-id")),$("#selected-selling-plan").text($(this).data("plan-name")),$(".shpAdd2CartButton [data-default-price]").each(function(){let current_plan_price2=$("#subscribe .single-offer.active .plan-price");$(this).html(current_plan_price2.html()),$(this).attr("data-current_price_value",current_plan_price2.data("value")).data("current_price_value",current_plan_price2.data("value"))})}),$("#subscribe-tabSelector button").on("click",function(){$(this).hasClass("active")&&($(this).removeClass("active"),$(".js-subscribe-modal").removeClass("d-none"),$(".js-subscribe-gift").addClass("disabled"),$(".js-selling-plan-promo").addClass("d-none"),$(".js-compare-price-promo").removeClass("d-none"),shpCustom.updateGiftsAndDiscounts(),$("#product-object input[name=selling_plan]").val(""),$("#product-object input[name=gift_id]").val(""),$(".shpAdd2CartButton [data-default-price]").each(function(){$(this).html($(this).data("default-price")),$(this).attr("data-current_price_value",$(this).data("default-price_value")).data("current_price_value",$(this).data("default-price_value"))}),$(".js-subscribe-price").addClass("d-none"))}),$(".js-subscribe-modal").on("click",function(){$(this).addClass("d-none"),$("#subscribe-tabSelector button").addClass("active"),shpCustom.updateGiftsAndDiscounts(),$(".js-selling-plan-promo").removeClass("d-none"),$(".js-compare-price-promo").addClass("d-none"),$("#product-object input[name=selling_plan]").val($("#subscribe .single-offer.active").data("selling-plan-id")),$("#product-object input[name=gift_id]").val(freeGiftId),$(".shpAdd2CartButton [data-default-price]").each(function(){let current_plan_price2=$("#subscribe .single-offer.active .plan-price");$(this).html(current_plan_price2.html()),$(this).attr("data-current_price_value",current_plan_price2.data("value")).data("current_price_value",current_plan_price2.data("value"))}),$(".js-subscribe-price").removeClass("d-none")})}};$(document).ready(function(){shpCustom.init();let doc_width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;!shpCustom.getCookie("newsletter_box_modal")&&doc_width<=768&&($("#NewsletterModal").on("hidden.bs.modal",function(event){shpCustom.setCookie("newsletter_box_modal",1)}),setTimeout(function(){$("#NewsletterModal").modal("show")},1e3));const urlSearchParams=new URLSearchParams(window.location.search),urlParams=Object.fromEntries(urlSearchParams.entries());if($(".happy-science").length>0){let accordionExists=!1;$("[data-button2do]").each(function(){let identifier=$(this).data("button2do");identifier&&$('[data-accordion2do="'+identifier+'"]').length>0&&(accordionExists||($(".happy-science").after('<div class="adaptogens-content"><div class="container"><div class="row"><div class="col-md-12"><div class="accordion" id="accordionPositions"></div></div></div></div></div>'),accordionExists=!0),$("[data-accordion2do="+identifier+"]").detach().appendTo("#accordionPositions"),$("#accordionPositions").find(".accordion-item").removeClass("d-none"),$(this).attr("data-bs-toggle","collapse").data("bs-toggle","collapse"),$(this).attr("href","#collapse-"+identifier),$(this).on("click",function(event){shpCustom.scrollToElement('[data-bs-target="#collapse-'+identifier+'"]')}),urlParams.goto==identifier&&($(this).click(),$('button[data-bs-target="#collapse-'+identifier+'"]').click()))})}if($(".mood-boosting-blend").length>0){let accordionExists=!1;$(".accordion-section .accordion-item[data-accordion2do]").each(function(){const $item=$(this);accordionExists||($(".mood-boosting-blend").after('<div class="adaptogens-content"><div class="container"><div class="row"><div class="col-md-12"><div class="accordion" id="accordionPositions"></div></div></div></div></div>'),accordionExists=!0),$item.detach().appendTo("#accordionPositions").removeClass("d-none")})}$(".visualiser-section").length>0&&($("button[data-audio_src]").on("click",function(event){event.preventDefault();let soundURL=$(this).data("audio_src"),audio=document.getElementById("audio");soundURL!=""&&audio!=null&&(audio.setAttribute("src",soundURL),audio.play(),$("button.stop-music").addClass("playing"))}),$("button.stop-music").on("click",function(event){event.preventDefault();let audio=document.getElementById("audio");audio!=null&&($(this).hasClass("playing")?(audio.pause(),$(this).removeClass("playing")):(audio.play(),$(this).addClass("playing")))}),console.log("show_on_start",$("#visualiserModal").data("show_on_start")),$("#visualiserModal").data("show_on_start")==!0&&(console.log("open-modal"),$("#visualiserModal").modal("show"))),$("body").on("updateVariantInfo",function(event){shpCustom.initSellingPlanElements()}),shpCustom.initSellingPlanElements(),$("body").on("updateCartInfo",function(event){$("body.cart-page").length>0?window.location.reload():($(".shpCartItemsList .cart-item").not(".shpCartLineTemplate").each(function(){$(this).find("select[data-cart-item-quantity]").each(function(){!$(this).val()&&$(this).data("cart-item-quantity")>0&&$(this).append("<option selected>"+$(this).data("cart-item-quantity")+"</option>")}),$(this).find("select.pre-select").removeClass("pre-select").addClass("select")}),$(" .select").select2({minimumResultsForSearch:1/0}),$(".dropdown-select").select2({minimumResultsForSearch:1/0,dropdownCssClass:"subscribe-dropdown"}))}),$("body").on("shpShowCart",function(event){if(window.cwCart){if($("#cwCart").siblings(".offcanvas-backdrop").length==0){var cartOffcanvas=new bootstrap.Offcanvas("#cwCart");cartOffcanvas.show()}}else if($("#cart").siblings(".offcanvas-backdrop").length==0){var cartOffcanvas=new bootstrap.Offcanvas("#cart");cartOffcanvas.show()}}),$("#accepts_regulations").on("change",function(){$(this).prop("checked")!=!0?$(this).parents("form").find("button[type=submit]").prop("disabled",!0):$(this).parents("form").find("button[type=submit]").prop("disabled",!1)})});
//# sourceMappingURL=/cdn/shop/t/37/assets/shp-custom.js.map?v=172949119811108584111763969365
